"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6615],{99125:function(e,t,a){a.r(t);var n=a(59499),r=a(50029),s=a(64687),i=a.n(s),c=a(67294),l=a(47321),o=a(29222),d=a(62546),u=a(61711),m=a(85781),h=a(11163),g=a(64675),p=a(85893);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach(function(t){(0,n.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}t.default=function(e){var t,a,s=e.isOpen,x=e.onClose,j=e.token,v=e.existingData,N=(0,c.useState)(v||{clientFirstName:"",clientLastName:"",email:""}),y=N[0],C=N[1],b=(0,c.useState)("basic"),I=b[0],S=b[1],O=(0,c.useState)([]),F=O[0],k=O[1],w=(0,h.useRouter)();(0,c.useEffect)(function(){var e;(e=(0,r.Z)(i().mark(function e(){var t;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.gajkesaristeels.in/employee/getAll",{headers:{Authorization:"Bearer ".concat(j)}});case 3:return t=e.sent,e.next=6,t.json();case 6:k(e.sent),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching employees:",e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])})),function(){return e.apply(this,arguments)})()},[j]);var P=function(e,t){var a=t;["pincode","monthlySale","primaryContact","secondaryContact","fieldOfficerId"].includes(e)&&(a=""===t?"":parseInt(t.toString(),10)),C(function(t){return f(f({},t),{},(0,n.Z)({},e,a))})},_=(t=(0,r.Z)(i().mark(function e(){var t,a,n,r,s;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("requestBody",t=f(f({},y),{},{primaryContact:y.primaryContact?parseInt(y.primaryContact.toString(),10):void 0,secondaryContact:y.secondaryContact?parseInt(y.secondaryContact.toString(),10):void 0,pincode:y.pincode?parseInt(y.pincode.toString(),10):void 0,monthlySale:y.monthlySale?parseInt(y.monthlySale.toString(),10):void 0,latitude:10,longitude:-23,employeeId:y.fieldOfficerId})),a=v&&v.id?"https://api.gajkesaristeels.in/store/update?id=".concat(v.id):"https://api.gajkesaristeels.in/store/create",n=v&&v.id?"PUT":"POST",e.next=7,fetch(a,{method:n,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(j)},body:JSON.stringify(t)});case 7:if(console.log(r=e.sent),!r.ok){e.next=18;break}return e.next=12,r.json();case 12:console.log(s=e.sent),w.push("/CustomerDetailPage/".concat(s)),x(),e.next=19;break;case 18:console.error("Failed to update/create customer");case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.error("Error updating/creating customer:",e.t0);case 24:case"end":return e.stop()}},e,null,[[0,21]])})),function(){return t.apply(this,arguments)});return(0,p.jsx)(l.Vq,{open:s,onOpenChange:x,children:(0,p.jsxs)(l.cZ,{className:"sm:max-w-[600px]",children:[(0,p.jsxs)(l.fK,{children:[(0,p.jsx)(l.$N,{children:"Add Customer"}),(0,p.jsx)(l.Be,{children:"Enter the details of the new customer."})]}),(0,p.jsxs)(m.mQ,{value:I,onValueChange:S,className:"mt-4",children:[(0,p.jsxs)(m.dr,{children:[(0,p.jsx)(m.SP,{value:"basic",children:"Basic Info"}),(0,p.jsx)(m.SP,{value:"contact",children:"Contact"}),(0,p.jsx)(m.SP,{value:"address",children:"Address"}),(0,p.jsx)(m.SP,{value:"additional",children:"Additional"})]}),(0,p.jsx)(m.nU,{value:"basic",className:"mt-4",children:(0,p.jsxs)("div",{className:"grid gap-4",children:[(0,p.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,p.jsx)(u._,{htmlFor:"storeName",className:"text-right",children:"Shop Name"}),(0,p.jsx)(d.I,{id:"storeName",value:y.storeName||"",className:"col-span-3",onChange:function(e){return P("storeName",e.target.value)}})]}),(0,p.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,p.jsx)(u._,{htmlFor:"clientFirstName",className:"text-right",children:"First Name"}),(0,p.jsx)(d.I,{id:"clientFirstName",value:y.clientFirstName||"",className:"col-span-3",onChange:function(e){return P("clientFirstName",e.target.value)}})]}),(0,p.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,p.jsx)(u._,{htmlFor:"clientLastName",className:"text-right",children:"Last Name"}),(0,p.jsx)(d.I,{id:"clientLastName",value:y.clientLastName||"",className:"col-span-3",onChange:function(e){return P("clientLastName",e.target.value)}})]})]})}),(0,p.jsx)(m.nU,{value:"contact",className:"mt-4",children:(0,p.jsxs)("div",{className:"grid gap-4",children:[(0,p.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,p.jsx)(u._,{htmlFor:"primaryContact",className:"text-right",children:"Primary Contact"}),(0,p.jsx)(d.I,{id:"primaryContact",type:"tel",value:y.primaryContact||"",className:"col-span-3",onChange:function(e){return P("primaryContact",e.target.value)}})]}),(0,p.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,p.jsx)(u._,{htmlFor:"secondaryContact",className:"text-right",children:"Secondary Contact"}),(0,p.jsx)(d.I,{id:"secondaryContact",type:"tel",value:y.secondaryContact||"",className:"col-span-3",onChange:function(e){return P("secondaryContact",e.target.value)}})]}),(0,p.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,p.jsx)(u._,{htmlFor:"email",className:"text-right",children:"Email"}),(0,p.jsx)(d.I,{id:"email",type:"email",value:y.email||"",className:"col-span-3",onChange:function(e){return P("email",e.target.value)}})]})]})}),(0,p.jsx)(m.nU,{value:"address",className:"mt-4",children:(0,p.jsxs)("div",{className:"grid gap-4",children:[(0,p.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,p.jsx)(u._,{htmlFor:"addressLine1",className:"text-right",children:"Address Line 1"}),(0,p.jsx)(d.I,{id:"addressLine1",value:y.addressLine1||"",className:"col-span-3",onChange:function(e){return P("addressLine1",e.target.value)}})]}),(0,p.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,p.jsx)(u._,{htmlFor:"addressLine2",className:"text-right",children:"Address Line 2"}),(0,p.jsx)(d.I,{id:"addressLine2",value:y.addressLine2||"",className:"col-span-3",onChange:function(e){return P("addressLine2",e.target.value)}})]}),(0,p.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,p.jsx)(u._,{htmlFor:"city",className:"text-right",children:"City"}),(0,p.jsx)(d.I,{id:"city",value:y.city||"",className:"col-span-3",onChange:function(e){return P("city",e.target.value)}})]}),(0,p.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,p.jsx)(u._,{htmlFor:"state",className:"text-right",children:"State"}),(0,p.jsx)(d.I,{id:"state",value:y.state||"",className:"col-span-3",onChange:function(e){return P("state",e.target.value)}})]}),(0,p.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,p.jsx)(u._,{htmlFor:"country",className:"text-right",children:"Country"}),(0,p.jsx)(d.I,{id:"country",value:y.country||"",className:"col-span-3",onChange:function(e){return P("country",e.target.value)}})]}),(0,p.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,p.jsx)(u._,{htmlFor:"pincode",className:"text-right",children:"Pincode"}),(0,p.jsx)(d.I,{id:"pincode",type:"number",value:y.pincode||"",className:"col-span-3",onChange:function(e){return P("pincode",e.target.value)}})]})]})}),(0,p.jsx)(m.nU,{value:"additional",className:"mt-4",children:(0,p.jsxs)("div",{className:"grid gap-4",children:[(0,p.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,p.jsx)(u._,{htmlFor:"gstNumber",className:"text-right",children:"GST Number"}),(0,p.jsx)(d.I,{id:"gstNumber",value:y.gstNumber||"",className:"col-span-3",onChange:function(e){return P("gstNumber",e.target.value)}})]}),(0,p.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,p.jsx)(u._,{htmlFor:"monthlySale",className:"text-right",children:"Monthly Sale"}),(0,p.jsx)(d.I,{id:"monthlySale",type:"number",value:y.monthlySale||"",className:"col-span-3",onChange:function(e){return P("monthlySale",e.target.value)}})]}),(0,p.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,p.jsx)(u._,{htmlFor:"clientType",className:"text-right",children:"Client Type"}),(0,p.jsx)("div",{className:"col-span-3",children:(0,p.jsxs)(g.h_,{children:[(0,p.jsx)(g.$F,{className:"w-full",children:(0,p.jsx)(d.I,{id:"clientType",value:y.clientType||"",placeholder:"Select Client Type",readOnly:!0,className:"cursor-pointer text-gray-400"})}),(0,p.jsxs)(g.AW,{children:[(0,p.jsx)(g.Xi,{onClick:function(){return P("clientType","Project")},children:"Project"}),(0,p.jsx)(g.Xi,{onClick:function(){return P("clientType","Shop")},children:"Shop"})]})]})})]}),(0,p.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,p.jsx)(u._,{htmlFor:"fieldOfficer",className:"text-right",children:"Field Officer"}),(0,p.jsx)("div",{className:"col-span-3",children:(0,p.jsxs)(g.h_,{children:[(0,p.jsx)(g.$F,{className:"w-full",children:(0,p.jsx)(d.I,{id:"fieldOfficer",value:y.fieldOfficerId?null===(a=F.find(function(e){return e.id===y.fieldOfficerId}))||void 0===a?void 0:a.firstName:"",placeholder:"Select Field Officer",readOnly:!0,className:"cursor-pointer text-gray-400"})}),(0,p.jsx)(g.AW,{children:F.map(function(e){return(0,p.jsxs)(g.Xi,{onClick:function(){return P("fieldOfficerId",e.id.toString())},children:[e.firstName," ",e.lastName]},e.id)})})]})})]})]})})]}),(0,p.jsxs)(l.cN,{children:[(0,p.jsx)(o.z,{variant:"outline",onClick:x,children:"Cancel"}),"basic"!==I&&(0,p.jsx)(o.z,{variant:"outline",onClick:function(){"additional"===I?S("address"):"address"===I?S("contact"):"contact"===I&&S("basic")},children:"Previous"}),"additional"!==I?(0,p.jsx)(o.z,{onClick:function(){"basic"===I?S("contact"):"contact"===I?S("address"):"address"===I&&S("additional")},children:"Next"}):(0,p.jsx)(o.z,{onClick:_,children:"Add Customer"})]})]})})}},60434:function(e,t,a){a.d(t,{VY:function(){return _},aV:function(){return w},fC:function(){return k},xz:function(){return P}});var n=a(67294),r=a(36206),s=a(25360),i=a(66681),c=a(29115),l=a(75320),o=a(78990),d=a(77342),u=a(91276),m=a(85893),h="Tabs",[g,p]=(0,s.b)(h,[i.Pc]),x=(0,i.Pc)(),[f,j]=g(h),v=n.forwardRef((e,t)=>{let{__scopeTabs:a,value:n,onValueChange:r,defaultValue:s,orientation:i="horizontal",dir:c,activationMode:h="automatic",...g}=e,p=(0,o.gm)(c),[x,j]=(0,d.T)({prop:n,onChange:r,defaultProp:s});return(0,m.jsx)(f,{scope:a,baseId:(0,u.M)(),value:x,onValueChange:j,orientation:i,dir:p,activationMode:h,children:(0,m.jsx)(l.WV.div,{dir:p,"data-orientation":i,...g,ref:t})})});v.displayName=h;var N="TabsList",y=n.forwardRef((e,t)=>{let{__scopeTabs:a,loop:n=!0,...r}=e,s=j(N,a),c=x(a);return(0,m.jsx)(i.fC,{asChild:!0,...c,orientation:s.orientation,dir:s.dir,loop:n,children:(0,m.jsx)(l.WV.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:t})})});y.displayName=N;var C="TabsTrigger",b=n.forwardRef((e,t)=>{let{__scopeTabs:a,value:n,disabled:s=!1,...c}=e,o=j(C,a),d=x(a),u=O(o.baseId,n),h=F(o.baseId,n),g=n===o.value;return(0,m.jsx)(i.ck,{asChild:!0,...d,focusable:!s,active:g,children:(0,m.jsx)(l.WV.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":h,"data-state":g?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:u,...c,ref:t,onMouseDown:(0,r.M)(e.onMouseDown,e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(n)}),onKeyDown:(0,r.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(n)}),onFocus:(0,r.M)(e.onFocus,()=>{let e="manual"!==o.activationMode;g||s||!e||o.onValueChange(n)})})})});b.displayName=C;var I="TabsContent",S=n.forwardRef((e,t)=>{let{__scopeTabs:a,value:r,forceMount:s,children:i,...o}=e,d=j(I,a),u=O(d.baseId,r),h=F(d.baseId,r),g=r===d.value,p=n.useRef(g);return n.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,m.jsx)(c.z,{present:s||g,children:({present:a})=>(0,m.jsx)(l.WV.div,{"data-state":g?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!a,id:h,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:a&&i})})});function O(e,t){return`${e}-trigger-${t}`}function F(e,t){return`${e}-content-${t}`}S.displayName=I;var k=v,w=y,P=b,_=S}}]);