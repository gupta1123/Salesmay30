(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1996],{29222:function(e,s,a){"use strict";a.d(s,{d:function(){return m},z:function(){return h}});var n=a(59499),t=a(4730),r=a(67294),i=a(88426),l=a(12003),c=a(20439),o=a(85893),d=["className","variant","size","asChild"];function u(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);s&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}var m=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),h=r.forwardRef(function(e,s){var a=e.className,r=e.variant,l=e.size,h=e.asChild,p=(0,t.Z)(e,d),x=void 0!==h&&h?i.g7:"button";return(0,o.jsx)(x,function(e){for(var s=1;s<arguments.length;s++){var a=null!=arguments[s]?arguments[s]:{};s%2?u(Object(a),!0).forEach(function(s){(0,n.Z)(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}({className:(0,c.cn)(m({variant:r,size:l,className:a})),ref:s},p))});h.displayName="Button"},41079:function(e,s,a){"use strict";a.d(s,{$0:function(){return k},Dj:function(){return w},dN:function(){return y},kN:function(){return Z},ng:function(){return b},nt:function(){return g},tl:function(){return N}});var n=a(59499),t=a(4730),r=a(67294),i=a(62469),l=a(20439),c=a(29222),o=a(85893),d=["className"],u=["className"],m=["className"],h=["className","isActive","size"],p=["className"],x=["className"],f=["className"];function j(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);s&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function v(e){for(var s=1;s<arguments.length;s++){var a=null!=arguments[s]?arguments[s]:{};s%2?j(Object(a),!0).forEach(function(s){(0,n.Z)(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}var N=function(e){var s=e.className,a=(0,t.Z)(e,d);return(0,o.jsx)("nav",v({role:"navigation","aria-label":"pagination",className:(0,l.cn)("mx-auto flex w-full justify-center",s)},a))};N.displayName="Pagination";var b=r.forwardRef(function(e,s){var a=e.className,n=(0,t.Z)(e,u);return(0,o.jsx)("ul",v({ref:s,className:(0,l.cn)("flex flex-row items-center gap-1",a)},n))});b.displayName="PaginationContent";var g=r.forwardRef(function(e,s){var a=e.className,n=(0,t.Z)(e,m);return(0,o.jsx)("li",v({ref:s,className:(0,l.cn)("",a)},n))});g.displayName="PaginationItem";var Z=function(e){var s=e.className,a=e.isActive,n=e.size,r=(0,t.Z)(e,h);return(0,o.jsx)("a",v({"aria-current":a?"page":void 0,className:(0,l.cn)((0,c.d)({variant:a?"outline":"ghost",size:void 0===n?"icon":n}),s)},r))};Z.displayName="PaginationLink";var y=function(e){var s=e.className,a=(0,t.Z)(e,p);return(0,o.jsxs)(Z,v(v({"aria-label":"Go to previous page",size:"default",className:(0,l.cn)("gap-1 pl-2.5",s)},a),{},{children:[(0,o.jsx)(i.wyc,{className:"h-4 w-4"}),(0,o.jsx)("span",{children:"Previous"})]}))};y.displayName="PaginationPrevious";var k=function(e){var s=e.className,a=(0,t.Z)(e,x);return(0,o.jsxs)(Z,v(v({"aria-label":"Go to next page",size:"default",className:(0,l.cn)("gap-1 pr-2.5",s)},a),{},{children:[(0,o.jsx)("span",{children:"Next"}),(0,o.jsx)(i.XCv,{className:"h-4 w-4"})]}))};k.displayName="PaginationNext";var w=function(e){var s=e.className,a=(0,t.Z)(e,f);return(0,o.jsxs)("span",v(v({"aria-hidden":!0,className:(0,l.cn)("flex h-9 w-9 items-center justify-center",s)},a),{},{children:[(0,o.jsx)(i.nWS,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"sr-only",children:"More pages"})]}))};w.displayName="PaginationEllipsis"},61996:function(e,s,a){"use strict";a.r(s);var n=a(27812),t=a(16835),r=a(59499),i=a(50029),l=a(64687),c=a.n(l),o=a(67294),d=a(87066),u=a(21161),m=a(30522),h=a(19059),p=a(19398),x=a(79269),f=a(99474),j=a(3328),v=a(14034),N=a(12595),b=a(56641),g=a(23325),Z=a(26674),y=a(55724),k=a(2374),w=a(60488),C=a(26826),P=a(58150),S=a(49486),z=a(40187),O=a(76803),A=a(41695),I=a(8221),E=a(29808),F=a(4821),B=a(35376),D=a(54142),M=a(27484),q=a.n(M);a(82533);var R=a(41079),Y=a(85893);function T(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);s&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function L(e){for(var s=1;s<arguments.length;s++){var a=null!=arguments[s]?arguments[s]:{};s%2?T(Object(a),!0).forEach(function(s){(0,r.Z)(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}var U=u.Z.Option,V=m.Z.RangePicker,$=function(e){var s=e.visible,a=e.onCancel,n=e.onConfirm,t=e.site,r=e.isMarkingComplete;if(!t)return null;var i=t.completed?Math.min(t.completed/t.requirement*100,100).toFixed(0):0;return(0,Y.jsx)(h.Z,{visible:s,onCancel:a,footer:null,width:400,className:"completion-status-modal",closable:!1,children:(0,Y.jsxs)("div",{className:"completion-modal-content",children:[(0,Y.jsx)("div",{className:"status-icon ".concat(r?"complete":"ongoing"),children:r?(0,Y.jsx)(N.Z,{size:24}):(0,Y.jsx)(b.Z,{size:24})}),(0,Y.jsx)("h3",{className:"modal-title",children:r?"Mark Site as Complete":"Mark Site as Ongoing"}),(0,Y.jsxs)("div",{className:"site-summary",children:[(0,Y.jsx)("h4",{children:"Site Summary"}),(0,Y.jsxs)("div",{className:"summary-item",children:[(0,Y.jsx)("span",{children:"Site Name:"}),(0,Y.jsx)("strong",{children:t.siteName})]}),(0,Y.jsxs)("div",{className:"summary-item",children:[(0,Y.jsx)("span",{children:"Progress:"}),(0,Y.jsxs)("strong",{children:[i,"% Complete"]})]}),(0,Y.jsxs)("div",{className:"summary-item",children:[(0,Y.jsx)("span",{children:"Area Completed:"}),(0,Y.jsxs)("strong",{children:[t.completed||0," / ",t.requirement," sq.ft"]})]})]}),(0,Y.jsx)("p",{className:"status-message",children:r?(0,Y.jsxs)(Y.Fragment,{children:["Are you sure you want to mark this site as ",(0,Y.jsx)("span",{className:"highlight complete",children:"completed"}),"? This will indicate that all work has been finished."]}):(0,Y.jsxs)(Y.Fragment,{children:["Are you sure you want to mark this site as ",(0,Y.jsx)("span",{className:"highlight ongoing",children:"ongoing"}),"? This will indicate that work is still in progress."]})}),(0,Y.jsxs)("div",{className:"modal-actions",children:[(0,Y.jsx)("button",{className:"cancel-btn",onClick:a,children:"Cancel"}),(0,Y.jsx)("button",{className:"confirm-btn ".concat(r?"complete":"ongoing"),onClick:n,children:r?"Mark as Complete":"Mark as Ongoing"})]})]})})},_=function(e){var s,a=e.visible,n=e.onCancel,t=e.form,r=e.onFinish,l=e.isEditMode,d=e.currentSite,m=(0,o.useState)(1),j=m[0],v=m[1],b=(0,o.useState)({}),k=b[0],w=b[1];(0,o.useEffect)(function(){l&&d&&t.setFieldsValue({siteName:d.siteName,status:d.status.toLowerCase(),dateRange:[q()(d.startDate),q()(d.endDate)],brands:d.brandsInUse.join(", "),totalArea:d.requirement,completedArea:d.completed||0,city:d.city})},[l,d,t]);var C=(s=(0,i.Z)(c().mark(function e(){var s,a;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,1!==j){e.next=9;break}return e.next=4,t.validateFields(["siteName","status","dateRange","brands"]);case 4:s=e.sent,w(L(L({},k),s)),v(2),e.next=14;break;case 9:return e.next=11,t.validateFields(["totalArea","completedArea","city"]);case 11:a=e.sent,r(L(L({},k),a));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log("Validation failed:",e.t0);case 19:case"end":return e.stop()}},e,null,[[0,16]])})),function(){return s.apply(this,arguments)});return(0,Y.jsxs)(h.Z,{title:null,visible:a,onCancel:function(){t.resetFields(),v(1),w({}),n()},footer:null,className:"site-modal",width:420,closeIcon:(0,Y.jsx)(g.Z,{className:"modal-close-icon"}),children:[(0,Y.jsxs)("div",{className:"modal-header",children:[(0,Y.jsx)("h3",{className:"modal-title",children:l?"Edit Site":"Add New Site"}),(0,Y.jsx)("p",{className:"modal-subtitle",children:1===j?"Enter basic site information":"Provide site details and requirements"})]}),(0,Y.jsxs)("div",{className:"modal-stepper",children:[(0,Y.jsxs)("div",{className:"stepper-item ".concat(j>=1?"active":""," ").concat(j>1?"completed":""),children:[(0,Y.jsx)("div",{className:"step-number",children:j>1?(0,Y.jsx)(N.Z,{size:20}):"1"}),(0,Y.jsx)("span",{children:"Basic Info"})]}),(0,Y.jsx)("div",{className:"stepper-line"}),(0,Y.jsxs)("div",{className:"stepper-item ".concat(2===j?"active":""),children:[(0,Y.jsx)("div",{className:"step-number",children:"2"}),(0,Y.jsx)("span",{children:"Site Details"})]})]}),(0,Y.jsxs)(p.Z,{form:t,layout:"vertical",className:"site-form",children:[(0,Y.jsx)("div",{className:"form-step ".concat(1===j?"active":""),children:(0,Y.jsxs)("div",{className:"form-section",children:[(0,Y.jsx)(p.Z.Item,{name:"siteName",label:"Site Name",rules:[{required:!0,message:"Site name is required"}],children:(0,Y.jsx)(x.Z,{placeholder:"Enter site name"})}),(0,Y.jsxs)("div",{className:"form-row",children:[(0,Y.jsx)(p.Z.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Status is required"}],children:(0,Y.jsxs)(u.Z,{children:[(0,Y.jsx)(U,{value:"active",children:(0,Y.jsxs)("div",{className:"status-option",children:[(0,Y.jsx)("span",{className:"status-dot active"}),"Active"]})}),(0,Y.jsx)(U,{value:"inactive",children:(0,Y.jsxs)("div",{className:"status-option",children:[(0,Y.jsx)("span",{className:"status-dot inactive"}),"Inactive"]})})]})}),(0,Y.jsx)(p.Z.Item,{name:"brands",label:"Brands",tooltip:l?"Brands cannot be edited":"Enter brand names separated by commas",children:(0,Y.jsx)(x.Z,{placeholder:"e.g. Brand1, Brand2",disabled:l,className:l?"disabled-input":""})})]}),(0,Y.jsx)(p.Z.Item,{name:"dateRange",label:"Project Timeline",rules:[{required:!0,message:"Timeline is required"}],children:(0,Y.jsx)(V,{style:{width:"100%"},format:"DD MMM YYYY",separator:(0,Y.jsx)(Z.Z,{size:16})})})]})}),(0,Y.jsx)("div",{className:"form-step ".concat(2===j?"active":""),children:(0,Y.jsx)("div",{className:"form-section",children:(0,Y.jsxs)("div",{className:"section-group",children:[(0,Y.jsx)("h4",{className:"section-subtitle",children:"Site Details"}),(0,Y.jsxs)("div",{className:"form-grid",children:[(0,Y.jsx)(p.Z.Item,{name:"addressLine1",label:"Address Line 1",rules:[{required:!0,message:"Address is required"}],children:(0,Y.jsx)(x.Z.TextArea,{placeholder:"Enter street address",autoSize:{minRows:2,maxRows:3},className:"address-input"})}),(0,Y.jsxs)("div",{className:"form-row",children:[(0,Y.jsx)(p.Z.Item,{name:"addressLine2",label:"Address Line 2 (Optional)",children:(0,Y.jsx)(x.Z,{placeholder:"Landmark, nearby location"})}),(0,Y.jsx)(p.Z.Item,{name:"city",label:"City",rules:[{required:!0,message:"City is required"}],children:(0,Y.jsx)(x.Z,{placeholder:"Enter city name"})})]}),(0,Y.jsxs)("div",{className:"form-row measurements",children:[(0,Y.jsx)(p.Z.Item,{name:"totalArea",label:"Total Area",rules:[{required:!0,message:"Required"}],children:(0,Y.jsx)(x.Z,{type:"number",suffix:"sq.ft",placeholder:"Total",prefix:(0,Y.jsx)("div",{className:"area-icon total"})})}),(0,Y.jsx)(p.Z.Item,{name:"completedArea",label:"Completed",rules:[{required:!0,message:"Required"}],children:(0,Y.jsx)(x.Z,{type:"number",suffix:"sq.ft",placeholder:"Completed",prefix:(0,Y.jsx)("div",{className:"area-icon completed"})})})]})]})]})})})]}),(0,Y.jsx)("div",{className:"modal-footer",children:(0,Y.jsxs)("div",{className:"step-buttons",children:[j>1&&(0,Y.jsxs)(f.ZP,{className:"back-button",onClick:function(){return v(j-1)},children:[(0,Y.jsx)(y.Z,{size:18}),"Back"]}),(0,Y.jsx)(f.ZP,{className:"next-button",onClick:C,children:l?"Update Site":"Create Site"})]})})]})},G=function(e){var s=e.visible,a=e.onCancel,n=e.professionals,t=e.setSelectedProfessional,r=e.setIsDeleteModalVisible,i=(0,o.useState)(!1),l=i[0],c=i[1],d=(0,o.useState)(1),u=d[0],m=d[1],p=6*u,x=l?n.slice(p-6,p):n.slice(0,6),f=Math.ceil(n.length/6);return(0,Y.jsxs)(h.Z,{visible:s,onCancel:a,footer:null,width:800,className:"view-professionals-modal",title:null,closable:!1,children:[(0,Y.jsxs)("div",{className:"view-modal-header",children:[(0,Y.jsx)("h3",{className:"modal-title",children:"All Site Professionals"}),(0,Y.jsx)("button",{className:"modal-close",onClick:a,children:(0,Y.jsx)(g.Z,{size:20})})]}),(0,Y.jsxs)("div",{className:"view-modal-content",children:[(0,Y.jsx)("div",{className:"all-professionals-grid",children:x.map(function(e){return(0,Y.jsxs)("div",{className:"professional-card",children:[(0,Y.jsxs)("div",{className:"professional-info",children:[(0,Y.jsxs)("div",{className:"role-icon",children:["engineer"===e.role&&(0,Y.jsx)(k.Z,{size:16}),"architect"===e.role&&(0,Y.jsx)(w.Z,{size:16}),"builder"===e.role&&(0,Y.jsx)(C.Z,{size:16})]}),(0,Y.jsxs)("div",{className:"professional-details",children:[(0,Y.jsx)("span",{className:"professional-name",children:e.name}),(0,Y.jsx)("span",{className:"professional-role",children:e.role}),(0,Y.jsxs)("span",{className:"professional-contact",children:[(0,Y.jsx)(P.Z,{size:14}),e.contact]})]})]}),(0,Y.jsx)("div",{className:"professional-actions",children:(0,Y.jsx)("button",{className:"remove-professional",onClick:function(s){s.stopPropagation(),t(e),r(!0)},children:(0,Y.jsx)(g.Z,{size:16})})})]},e.id)})}),(0,Y.jsxs)("div",{className:"modal-footer",children:[n.length>6&&!l&&(0,Y.jsx)("button",{className:"show-more-btn",onClick:function(){return c(!0)},children:"Show More"}),l&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(R.tl,{className:"pagination-container",children:(0,Y.jsxs)(R.ng,{children:[(0,Y.jsx)(R.nt,{children:(0,Y.jsx)(R.dN,{onClick:function(){return m(function(e){return Math.max(e-1,1)})},className:1===u?"disabled":""})}),Array.from({length:f},function(e,s){return(0,Y.jsx)(R.nt,{children:(0,Y.jsx)(R.kN,{onClick:function(){return m(s+1)},isActive:u===s+1,children:s+1})},s+1)}),(0,Y.jsx)(R.nt,{children:(0,Y.jsx)(R.$0,{onClick:function(){return m(function(e){return Math.min(e+1,f)})},className:u===f?"disabled":""})})]})}),(0,Y.jsx)("button",{className:"show-less-btn",onClick:function(){c(!1),m(1)},children:"Show Less"})]})]})]})]})};s.default=function(e){var s,a,r,l,m,Z,y,M,T,L=e.storeId,V=e.token,W=(0,o.useState)([]),X=W[0],H=W[1],J=(0,o.useState)(!1),K=J[0],Q=J[1],ee=(0,o.useState)(!1),es=ee[0],ea=ee[1],en=(0,o.useState)(null),et=en[0],er=en[1],ei=p.Z.useForm(),el=(0,t.Z)(ei,1)[0],ec=(0,o.useState)(!1),eo=ec[0],ed=ec[1],eu=(0,o.useState)(1),em=eu[0],eh=eu[1],ep=(0,o.useState)([]),ex=ep[0],ef=ep[1],ej=(0,o.useState)(!1),ev=ej[0],eN=ej[1],eb=p.Z.useForm(),eg=(0,t.Z)(eb,1)[0],eZ=(0,o.useState)(!1),ey=eZ[0],ek=eZ[1],ew=(0,o.useState)(!1),eC=ew[0],eP=ew[1],eS=(0,o.useState)(!1),ez=eS[0],eO=eS[1],eA=(0,o.useState)(null),eI=eA[0],eE=eA[1],eF=(0,o.useState)(!1),eB=eF[0],eD=eF[1],eM=(0,o.useState)(null),eq=eM[0],eR=eM[1],eY=(0,o.useState)(!1),eT=eY[0],eL=eY[1],eU=(0,o.useState)(null),eV=eU[0],e$=eU[1],e_=(0,o.useState)(""),eG=e_[0],eW=e_[1],eX=(0,o.useState)(!1),eH=eX[0],eJ=eX[1],eK=(0,o.useState)(null),eQ=eK[0],e0=eK[1],e1=(0,o.useState)(!1),e2=e1[0],e4=e1[1],e6=[{value:"engineer",label:"Engineer",icon:(0,Y.jsx)(k.Z,{size:18})},{value:"architect",label:"Architect",icon:(0,Y.jsx)(w.Z,{size:18})},{value:"builder",label:"Builder",icon:(0,Y.jsx)(C.Z,{size:18})}],e9=(0,o.useCallback)((0,i.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.get("https://api.gajkesaristeels.in/site/getByStore?id=".concat(L),{headers:{Authorization:"Bearer ".concat(V)}});case 3:H(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching sites:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),[L,V]);(0,o.useEffect)(function(){L&&e9()},[L,e9]);var e3=(s=(0,i.Z)(c().mark(function e(s){var a,n;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=s.brands.split(",").map(function(e){return e.trim()}).filter(Boolean),n={siteName:s.siteName,startDate:q()(s.dateRange[0]).format("YYYY-MM-DD"),endDate:q()(s.dateRange[1]).format("YYYY-MM-DD"),status:s.status,requirement:parseFloat(s.totalArea),city:s.city,storeId:parseInt(L,10),completed:parseFloat(s.completedArea),brandsInUse:a},!(es&&et)){e.next=9;break}return e.next=6,d.Z.put("https://api.gajkesaristeels.in/site/update?id=".concat(et.id),n,{headers:{Authorization:"Bearer ".concat(V)}});case 6:j.ZP.success("Site updated successfully"),e.next=13;break;case 9:return e.next=11,d.Z.post("https://api.gajkesaristeels.in/site/add",n,{headers:{Authorization:"Bearer ".concat(V)}});case 11:200===e.sent.status&&j.ZP.success("Site added successfully");case 13:Q(!1),el.resetFields(),e9(),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),console.error("Error saving site:",e.t0),j.ZP.error("Failed to save site");case 22:case"end":return e.stop()}},e,null,[[0,18]])})),function(e){return s.apply(this,arguments)}),e8=function(e){ea(!0),er(e),Q(!0)};(0,o.useEffect)(function(){eC&&eI&&eg.setFieldsValue({name:eI.name,role:eI.role,contactInfo:eI.contact})},[eC,eI,eg]);var e5=(a=(0,i.Z)(c().mark(function e(s){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.delete("https://api.gajkesaristeels.in/site/delete?id=".concat(s),{headers:{Authorization:"Bearer ".concat(V)}});case 3:j.ZP.success("Site deleted successfully"),e9(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error deleting site:",e.t0),j.ZP.error("Failed to delete site");case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return a.apply(this,arguments)}),e7=2*em,se=eo?X.slice(e7-2,e7):X.slice(0,2),ss=Math.ceil(X.length/2),sa=(0,o.useCallback)((0,i.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.get("https://api.gajkesaristeels.in/professionals/getByStore?storeId=".concat(L),{headers:{Authorization:"Bearer ".concat(V)}});case 3:ef(e.sent.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching professionals:",e.t0),j.ZP.error("Failed to fetch professionals");case 11:case"end":return e.stop()}},e,null,[[0,7]])})),[L,V]);(0,o.useEffect)(function(){L&&sa()},[L,sa]);var sn=(r=(0,i.Z)(c().mark(function e(s){var a;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={name:s.name,role:s.role,contact:parseInt(s.contactInfo),storeId:parseInt(L)},e.next=4,d.Z.post("https://api.gajkesaristeels.in/professionals/addForStore",a,{headers:{Authorization:"Bearer ".concat(V)}});case 4:e.sent.data&&(j.ZP.success("Professional added successfully"),eN(!1),eg.resetFields(),sa()),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error adding professional:",e.t0),j.ZP.error("Failed to add professional");case 12:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return r.apply(this,arguments)}),st=(l=(0,i.Z)(c().mark(function e(s){var a;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(eI){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,a={name:s.name,role:s.role,contact:parseInt(s.contactInfo),storeId:parseInt(L)},e.next=6,d.Z.put("https://api.gajkesaristeels.in/professionals/edit?professionalId=".concat(eI.id),a,{headers:{Authorization:"Bearer ".concat(V)}});case 6:e.sent.data&&(j.ZP.success("Professional updated successfully"),eP(!1),eg.resetFields(),sa(),eE(null)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Error updating professional:",e.t0),j.ZP.error("Failed to update professional");case 14:case"end":return e.stop()}},e,null,[[2,10]])})),function(e){return l.apply(this,arguments)}),sr=(m=(0,i.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(eI){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,d.Z.delete("https://api.gajkesaristeels.in/professionals/delete?professionalId=".concat(eI.id),{headers:{Authorization:"Bearer ".concat(V)}});case 5:e.sent.data&&(j.ZP.success("Professional deleted successfully"),eO(!1),sa()),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error deleting professional:",e.t0),j.ZP.error("Failed to delete professional");case 13:case"end":return e.stop()}},e,null,[[2,9]])})),function(){return m.apply(this,arguments)}),si=(Z=(0,i.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(eq){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,d.Z.put("https://api.gajkesaristeels.in/site/removeBrands?id=".concat(eq.site.id),{brands:[eq.brand]},{headers:{Authorization:"Bearer ".concat(V)}});case 5:"Brands removed!"===e.sent.data&&(j.ZP.success("Brand removed successfully"),eD(!1),eR(null),e9()),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error removing brand:",e.t0),j.ZP.error("Failed to remove brand");case 13:case"end":return e.stop()}},e,null,[[2,9]])})),function(){return Z.apply(this,arguments)}),sl=(y=(0,i.Z)(c().mark(function e(){var s,a;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!eV||!eG)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,s=eG.split(",").map(function(e){return e.trim()}).filter(Boolean),a=Array.from(new Set([].concat((0,n.Z)(eV.brandsInUse),(0,n.Z)(s)))),e.next=8,d.Z.put("https://api.gajkesaristeels.in/site/addBrands?id=".concat(eV.id),{brands:a},{headers:{Authorization:"Bearer ".concat(V)}});case 8:"Brands updated!"===e.sent.data&&(j.ZP.success("Brands added successfully"),eL(!1),eW(""),e$(null),e9()),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.error("Error adding brands:",e.t0),j.ZP.error("Failed to add brands");case 16:case"end":return e.stop()}},e,null,[[2,12]])})),function(){return y.apply(this,arguments)}),sc=(M=(0,i.Z)(c().mark(function e(s){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e0(s),e4(!s.completionStatus),eJ(!0);case 3:case"end":return e.stop()}},e)})),function(e){return M.apply(this,arguments)}),so=(T=(0,i.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(eQ){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,d.Z.put("https://api.gajkesaristeels.in/site/markCompletionStatus?id=".concat(eQ.id,"&status=").concat(e2),{},{headers:{Authorization:"Bearer ".concat(V)}});case 5:"Status Updated!"===e.sent.data&&(j.ZP.success("Site marked as ".concat(e2?"completed":"ongoing"," successfully")),e9()),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error updating completion status:",e.t0),j.ZP.error("Failed to update site status");case 13:return e.prev=13,eJ(!1),e0(null),e.finish(13);case 17:case"end":return e.stop()}},e,null,[[2,9,13,17]])})),function(){return T.apply(this,arguments)});return(0,Y.jsxs)("div",{className:"sites-container",children:[(0,Y.jsxs)("div",{className:"site-professionals-container",children:[(0,Y.jsxs)("div",{className:"section-header",children:[(0,Y.jsx)("h2",{className:"section-title",children:"Site Professionals"}),(0,Y.jsxs)(f.ZP,{onClick:function(){return eN(!0)},className:"add-professional-btn",children:[(0,Y.jsx)(S.Z,{size:18}),"Add Professional"]})]}),(0,Y.jsxs)("div",{className:"professionals-grid",children:[ex.slice(0,3).map(function(e){return(0,Y.jsxs)("div",{className:"professional-card",children:[(0,Y.jsxs)("div",{className:"professional-info",children:[(0,Y.jsxs)("div",{className:"role-icon",children:["engineer"===e.role&&(0,Y.jsx)(k.Z,{size:16}),"architect"===e.role&&(0,Y.jsx)(w.Z,{size:16}),"builder"===e.role&&(0,Y.jsx)(C.Z,{size:16})]}),(0,Y.jsxs)("div",{className:"professional-details",children:[(0,Y.jsx)("span",{className:"professional-name",children:e.name}),(0,Y.jsx)("span",{className:"professional-role",children:e.role}),(0,Y.jsxs)("span",{className:"professional-contact",children:[(0,Y.jsx)(P.Z,{size:14}),e.contact]})]})]}),(0,Y.jsxs)("div",{className:"professional-actions",children:[(0,Y.jsx)(v.Z,{title:"Edit Professional",children:(0,Y.jsx)("button",{className:"action-btn edit",onClick:function(){eE(e),eP(!0)},children:(0,Y.jsx)(z.Z,{size:16})})}),(0,Y.jsx)(v.Z,{title:"Delete Professional",children:(0,Y.jsx)("button",{className:"action-btn delete",onClick:function(){eE(e),eO(!0)},children:(0,Y.jsx)(O.Z,{size:16})})})]})]},e.id)}),0===ex.length&&(0,Y.jsx)("div",{className:"empty-state",children:(0,Y.jsx)("span",{className:"empty-text",children:"No professionals assigned"})})]}),ex.length>3&&(0,Y.jsx)("div",{className:"view-all-wrapper",children:(0,Y.jsxs)("button",{className:"view-all-professionals-btn",onClick:function(){return ek(!0)},children:[(0,Y.jsx)(A.Z,{size:16}),"View All (",ex.length,")"]})}),(0,Y.jsx)(G,{visible:ey,onCancel:function(){return ek(!1)},professionals:ex,setSelectedProfessional:eE,setIsDeleteModalVisible:eO}),(0,Y.jsx)(h.Z,{visible:ez,onCancel:function(){eO(!1),eE(null)},footer:null,width:400,className:"delete-professional-modal",closable:!1,children:(0,Y.jsxs)("div",{className:"delete-modal-content",children:[(0,Y.jsx)("div",{className:"delete-icon-wrapper",children:(0,Y.jsx)(b.Z,{size:28,className:"delete-icon"})}),(0,Y.jsx)("h3",{className:"delete-title",children:"Remove Professional"}),(0,Y.jsxs)("p",{className:"delete-message",children:["Are you sure you want to remove ",(0,Y.jsx)("span",{className:"highlight",children:null==eI?void 0:eI.name})," from your site professionals? This action cannot be undone."]}),(0,Y.jsxs)("div",{className:"delete-actions",children:[(0,Y.jsx)("button",{className:"cancel-delete-btn",onClick:function(){eO(!1),eE(null)},children:"Cancel"}),(0,Y.jsx)("button",{className:"confirm-delete-btn",onClick:sr,children:"Remove Professional"})]})]})}),(0,Y.jsxs)(h.Z,{visible:ev,onCancel:function(){eN(!1),eg.resetFields()},footer:null,width:420,className:"professional-modal",closable:!1,children:[(0,Y.jsxs)("div",{className:"professional-modal-header",children:[(0,Y.jsxs)("div",{className:"modal-title-section",children:[(0,Y.jsx)("div",{className:"title-icon",children:(0,Y.jsx)(A.Z,{size:20})}),(0,Y.jsxs)("div",{children:[(0,Y.jsx)("h3",{className:"modal-title",children:"Add Professional"}),(0,Y.jsx)("p",{className:"modal-subtitle",children:"Enter professional details"})]})]}),(0,Y.jsx)("button",{className:"modal-close-btn",onClick:function(){eN(!1),eg.resetFields()},children:(0,Y.jsx)(g.Z,{size:20})})]}),(0,Y.jsx)(p.Z,{form:eg,layout:"vertical",className:"professional-form",onFinish:sn,children:(0,Y.jsxs)("div",{className:"input-group",children:[(0,Y.jsx)(p.Z.Item,{name:"name",label:"Full Name",rules:[{required:!0,message:"Please enter the name"}],children:(0,Y.jsx)(x.Z,{prefix:(0,Y.jsx)(I.Z,{size:16,className:"input-icon"}),placeholder:"Enter professional's name"})}),(0,Y.jsx)(p.Z.Item,{name:"role",label:"Role",rules:[{required:!0,message:"Please select a role"}],children:(0,Y.jsx)(u.Z,{placeholder:"Select role",children:e6.map(function(e){return(0,Y.jsx)(U,{value:e.value,children:(0,Y.jsxs)("div",{className:"role-option",children:[e.icon,(0,Y.jsx)("span",{children:e.label})]})},e.value)})})}),(0,Y.jsx)(p.Z.Item,{name:"contactInfo",label:"Contact Information",rules:[{required:!0,message:"Please enter contact information"},{pattern:/^[0-9]{10}$/,message:"Please enter a valid 10-digit phone number"}],children:(0,Y.jsx)(x.Z,{prefix:(0,Y.jsx)(P.Z,{size:16,className:"input-icon"}),placeholder:"Enter 10-digit phone number"})})]})}),(0,Y.jsxs)("div",{className:"professional-modal-footer",children:[(0,Y.jsx)("button",{className:"cancel-btn",onClick:function(){eN(!1),eg.resetFields()},children:"Cancel"}),(0,Y.jsxs)("button",{className:"submit-btn",onClick:function(){return eg.submit()},children:[(0,Y.jsx)(E.Z,{size:16}),"Add Professional"]})]})]}),(0,Y.jsx)(h.Z,{visible:ez,onCancel:function(){return eO(!1)},footer:null,width:400,className:"delete-confirmation-modal",closable:!1,children:(0,Y.jsxs)("div",{className:"delete-modal-content",children:[(0,Y.jsx)("div",{className:"delete-icon-wrapper",children:(0,Y.jsx)(b.Z,{size:32,className:"delete-icon"})}),(0,Y.jsx)("h3",{className:"delete-title",children:"Delete Professional"}),(0,Y.jsxs)("p",{className:"delete-message",children:["Are you sure you want to delete"," ",(0,Y.jsx)("span",{className:"highlight",children:null==eI?void 0:eI.name}),"? This action cannot be undone."]}),(0,Y.jsxs)("div",{className:"delete-actions",children:[(0,Y.jsx)("button",{className:"cancel-btn",onClick:function(){return eO(!1)},children:"Cancel"}),(0,Y.jsx)("button",{className:"delete-btn",onClick:sr,children:"Delete Professional"})]})]})})]}),(0,Y.jsxs)(f.ZP,{onClick:function(){ea(!1),er(null),Q(!0)},className:"add-site-btn",children:[(0,Y.jsx)(S.Z,{size:18}),"Add New Site"]}),(0,Y.jsx)("div",{className:"sites-grid",children:se.map(function(e){var s;return(0,Y.jsxs)("div",{className:"site-card",children:[(0,Y.jsxs)("div",{className:"site-card-left",children:[(0,Y.jsxs)("div",{className:"site-header",children:[(0,Y.jsxs)("div",{className:"site-title-row",children:[(0,Y.jsx)("h3",{className:"site-title",children:e.siteName}),(0,Y.jsxs)("div",{className:"site-actions",children:[(0,Y.jsx)(v.Z,{title:"Edit Site",children:(0,Y.jsx)("button",{className:"icon-button edit",onClick:function(){return e8(e)},children:(0,Y.jsx)(z.Z,{size:16})})}),(0,Y.jsx)(v.Z,{title:"Delete Site",children:(0,Y.jsx)("button",{className:"icon-button delete",onClick:function(){return e5(e.id)},children:(0,Y.jsx)(O.Z,{size:16})})})]})]}),(0,Y.jsx)("span",{className:"status-badge ".concat((null===(s=e.status)||void 0===s?void 0:s.toLowerCase())||"unknown"),children:e.status||"Unknown"}),(0,Y.jsxs)("div",{className:"site-location",children:[(0,Y.jsx)(F.Z,{size:16}),(0,Y.jsx)("span",{children:e.city})]}),(0,Y.jsxs)("div",{className:"site-brands-container",children:[(0,Y.jsxs)("div",{className:"brands-header",children:[(0,Y.jsx)("span",{className:"brands-title",children:"Brands"}),(0,Y.jsx)("button",{className:"brand-action-btn",onClick:function(s){s.stopPropagation(),e$(e),eL(!0)},children:(0,Y.jsx)(S.Z,{size:16})})]}),(0,Y.jsx)("div",{className:"site-brands",children:e.brandsInUse.map(function(s){return(0,Y.jsxs)("div",{className:"brand-pill",children:[s,(0,Y.jsx)("button",{className:"remove-brand",onClick:function(a){a.stopPropagation(),eR({site:e,brand:s}),eD(!0)},children:(0,Y.jsx)(g.Z,{size:14})})]},s)})})]})]}),(0,Y.jsxs)("div",{className:"site-dates",children:[(0,Y.jsxs)("div",{className:"date-row",children:[(0,Y.jsx)(B.Z,{size:16,className:"text-gray-400"}),(0,Y.jsx)("span",{className:"date-label",children:"Start"}),(0,Y.jsx)("span",{className:"date-value",children:q()(e.startDate).format("DD MMM YYYY")})]}),(0,Y.jsxs)("div",{className:"date-row",children:[(0,Y.jsx)(B.Z,{size:16,className:"text-gray-400"}),(0,Y.jsx)("span",{className:"date-label",children:"End"}),(0,Y.jsx)("span",{className:"date-value",children:q()(e.endDate).format("DD MMM YYYY")})]})]})]}),(0,Y.jsx)("div",{className:"site-card-right",children:(0,Y.jsxs)("div",{className:"progress-section",children:[(0,Y.jsxs)("div",{className:"progress-metrics",children:[(0,Y.jsxs)("div",{className:"progress-header",children:[(0,Y.jsx)("span",{className:"progress-title",children:"Project Progress"}),(0,Y.jsx)(v.Z,{title:e.completionStatus?"Mark as Ongoing":"Mark as Completed",children:(0,Y.jsx)("button",{className:"status-toggle ".concat(e.completionStatus?"completed":"ongoing"),onClick:function(){return sc(e)},children:e.completionStatus?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(N.Z,{size:14}),"Completed"]}):(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(b.Z,{size:14}),"Ongoing"]})})})]}),(0,Y.jsx)("div",{className:"progress-bar-container",children:(0,Y.jsx)("div",{className:"progress-bar ".concat(e.completionStatus?"completed":""),style:{width:"".concat(e.completed?Math.min(e.completed/e.requirement*100,100):0,"%")}})})]}),(0,Y.jsxs)("div",{className:"progress-stats",children:[(0,Y.jsxs)("div",{className:"stat-item",children:[(0,Y.jsx)("div",{className:"stat-value",children:e.completed||0}),(0,Y.jsx)("div",{className:"stat-label",children:"Completed (sq.ft)"})]}),(0,Y.jsxs)("div",{className:"stat-item",children:[(0,Y.jsx)("div",{className:"stat-value",children:e.requirement}),(0,Y.jsx)("div",{className:"stat-label",children:"Total Area (sq.ft)"})]})]})]})})]},e.id)})}),(0,Y.jsxs)("div",{className:"sites-footer",children:[eo&&X.length>2&&(0,Y.jsx)(R.tl,{className:"pagination-container",children:(0,Y.jsxs)(R.ng,{children:[(0,Y.jsx)(R.nt,{children:(0,Y.jsx)(R.dN,{onClick:function(){return eh(function(e){return Math.max(e-1,1)})},className:1===em?"disabled":""})}),Array.from({length:ss},function(e,s){return s+1}).map(function(e){return(0,Y.jsx)(R.nt,{children:(0,Y.jsx)(R.kN,{onClick:function(){return eh(e)},isActive:em===e,children:e})},e)}),(0,Y.jsx)(R.nt,{children:(0,Y.jsx)(R.$0,{onClick:function(){return eh(function(e){return Math.min(e+1,ss)})},className:em===ss?"disabled":""})})]})}),X.length>2&&(0,Y.jsx)(f.ZP,{onClick:function(){ed(!eo),eh(1)},className:"show-more-btn",children:eo?"Show Less":"Show More"})]}),(0,Y.jsx)(_,{visible:K,onCancel:function(){return Q(!1)},form:el,onFinish:e3,isEditMode:es,currentSite:et}),(0,Y.jsxs)(h.Z,{visible:eC,onCancel:function(){eP(!1),eg.resetFields(),eE(null)},footer:null,width:420,className:"professional-modal",closable:!1,children:[(0,Y.jsxs)("div",{className:"professional-modal-header",children:[(0,Y.jsxs)("div",{className:"modal-title-section",children:[(0,Y.jsx)("div",{className:"title-icon",children:(0,Y.jsx)(D.Z,{size:20})}),(0,Y.jsxs)("div",{children:[(0,Y.jsx)("h3",{className:"modal-title",children:"Edit Professional"}),(0,Y.jsx)("p",{className:"modal-subtitle",children:"Update professional details"})]})]}),(0,Y.jsx)("button",{className:"modal-close-btn",onClick:function(){eP(!1),eg.resetFields(),eE(null)},children:(0,Y.jsx)(g.Z,{size:20})})]}),(0,Y.jsx)(p.Z,{form:eg,layout:"vertical",className:"professional-form",onFinish:st,children:(0,Y.jsxs)("div",{className:"input-group",children:[(0,Y.jsx)(p.Z.Item,{name:"name",label:"Full Name",rules:[{required:!0,message:"Please enter the name"}],children:(0,Y.jsx)(x.Z,{prefix:(0,Y.jsx)(I.Z,{size:16,className:"input-icon"}),placeholder:"Enter professional's name"})}),(0,Y.jsx)(p.Z.Item,{name:"role",label:"Role",rules:[{required:!0,message:"Please select a role"}],children:(0,Y.jsx)(u.Z,{placeholder:"Select role",children:e6.map(function(e){return(0,Y.jsx)(U,{value:e.value,children:(0,Y.jsxs)("div",{className:"role-option",children:[e.icon,(0,Y.jsx)("span",{children:e.label})]})},e.value)})})}),(0,Y.jsx)(p.Z.Item,{name:"contactInfo",label:"Contact Information",rules:[{required:!0,message:"Please enter contact information"},{pattern:/^[0-9]{10}$/,message:"Please enter a valid 10-digit phone number"}],children:(0,Y.jsx)(x.Z,{prefix:(0,Y.jsx)(P.Z,{size:16,className:"input-icon"}),placeholder:"Enter 10-digit phone number"})})]})}),(0,Y.jsxs)("div",{className:"professional-modal-footer",children:[(0,Y.jsx)("button",{className:"cancel-btn",onClick:function(){eP(!1),eg.resetFields(),eE(null)},children:"Cancel"}),(0,Y.jsxs)("button",{className:"submit-btn",onClick:function(){return eg.submit()},children:[(0,Y.jsx)(E.Z,{size:16}),"Save Changes"]})]})]}),(0,Y.jsx)(h.Z,{visible:eB,onCancel:function(){eD(!1),eR(null)},footer:null,width:400,className:"remove-brand-modal",closable:!1,children:(0,Y.jsxs)("div",{className:"remove-modal-content",children:[(0,Y.jsx)("div",{className:"remove-icon-wrapper",children:(0,Y.jsx)(b.Z,{size:28,className:"remove-icon"})}),(0,Y.jsx)("h3",{className:"remove-title",children:"Remove Brand"}),(0,Y.jsxs)("p",{className:"remove-message",children:["Are you sure you want to remove ",(0,Y.jsx)("span",{className:"highlight",children:null==eq?void 0:eq.brand})," from this site? This action cannot be undone."]}),(0,Y.jsxs)("div",{className:"remove-actions",children:[(0,Y.jsx)("button",{className:"cancel-remove-btn",onClick:function(){eD(!1),eR(null)},children:"Cancel"}),(0,Y.jsx)("button",{className:"confirm-remove-btn",onClick:si,children:"Remove Brand"})]})]})}),(0,Y.jsx)(h.Z,{visible:eT,onCancel:function(){eL(!1),eW(""),e$(null)},footer:null,width:400,className:"add-brand-modal",closable:!1,children:(0,Y.jsxs)("div",{className:"add-brand-content",children:[(0,Y.jsx)("div",{className:"add-icon-wrapper",children:(0,Y.jsx)(S.Z,{size:28,className:"add-icon"})}),(0,Y.jsx)("h3",{className:"add-title",children:"Add Brands"}),(0,Y.jsxs)("p",{className:"add-message",children:["Enter brand names separated by commas to add them to ",(0,Y.jsx)("span",{className:"highlight",children:null==eV?void 0:eV.siteName})]}),(0,Y.jsx)("div",{className:"brand-input-container",children:(0,Y.jsx)(x.Z.TextArea,{value:eG,onChange:function(e){return eW(e.target.value)},placeholder:"e.g. Brand1, Brand2, Brand3",autoSize:{minRows:2,maxRows:4},className:"brand-input"})}),(0,Y.jsxs)("div",{className:"add-actions",children:[(0,Y.jsx)("button",{className:"cancel-add-btn",onClick:function(){eL(!1),eW(""),e$(null)},children:"Cancel"}),(0,Y.jsx)("button",{className:"confirm-add-btn",onClick:sl,disabled:!eG.trim(),children:"Add Brands"})]})]})}),(0,Y.jsx)($,{visible:eH,onCancel:function(){eJ(!1),e0(null)},onConfirm:so,site:eQ,isMarkingComplete:e2})]})}},82533:function(){}}]);