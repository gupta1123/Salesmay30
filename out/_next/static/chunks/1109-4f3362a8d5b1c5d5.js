(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1109],{62546:function(e,r,n){"use strict";n.d(r,{I:function(){return u}});var t=n(59499),a=n(4730),s=n(67294),l=n(20439),i=n(85893),c=["className","type"];function o(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,t)}return n}var u=s.forwardRef(function(e,r){var n=e.className,s=e.type,u=(0,a.Z)(e,c);return(0,i.jsx)("input",function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?o(Object(n),!0).forEach(function(r){(0,t.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}({type:s,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),ref:r},u))});u.displayName="Input"},91617:function(e,r,n){"use strict";n.d(r,{RM:function(){return y},Rn:function(){return k},SC:function(){return N},iA:function(){return j},pj:function(){return g},ss:function(){return w},xD:function(){return b}});var t=n(59499),a=n(4730),s=n(67294),l=n(20439),i=n(85893),c=["className"],o=["className"],u=["className"],d=["className"],f=["className"],m=["className"],p=["className"],h=["className"];function v(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,t)}return n}function x(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?v(Object(n),!0).forEach(function(r){(0,t.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var j=s.forwardRef(function(e,r){var n=e.className,t=(0,a.Z)(e,c);return(0,i.jsx)("div",{className:"relative w-full overflow-auto",children:(0,i.jsx)("table",x({ref:r,className:(0,l.cn)("w-full caption-bottom text-sm",n)},t))})});j.displayName="Table";var b=s.forwardRef(function(e,r){var n=e.className,t=(0,a.Z)(e,o);return(0,i.jsx)("thead",x({ref:r,className:(0,l.cn)("[&_tr]:border-b",n)},t))});b.displayName="TableHeader";var y=s.forwardRef(function(e,r){var n=e.className,t=(0,a.Z)(e,u);return(0,i.jsx)("tbody",x({ref:r,className:(0,l.cn)("[&_tr:last-child]:border-0",n)},t))});y.displayName="TableBody",s.forwardRef(function(e,r){var n=e.className,t=(0,a.Z)(e,d);return(0,i.jsx)("tfoot",x({ref:r,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n)},t))}).displayName="TableFooter";var N=s.forwardRef(function(e,r){var n=e.className,t=(0,a.Z)(e,f);return(0,i.jsx)("tr",x({ref:r,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n)},t))});N.displayName="TableRow";var w=s.forwardRef(function(e,r){var n=e.className,t=(0,a.Z)(e,m);return(0,i.jsx)("th",x({ref:r,className:(0,l.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n)},t))});w.displayName="TableHead";var g=s.forwardRef(function(e,r){var n=e.className,t=(0,a.Z)(e,p);return(0,i.jsx)("td",x({ref:r,className:(0,l.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n)},t))});g.displayName="TableCell";var k=s.forwardRef(function(e,r){var n=e.className,t=(0,a.Z)(e,h);return(0,i.jsx)("caption",x({ref:r,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",n)},t))});k.displayName="TableCaption"},91109:function(e,r,n){"use strict";n.r(r);var t=n(27812),a=n(59499),s=n(50029),l=n(64687),i=n.n(l),c=n(67294),o=n(29222),u=n(91617),d=n(41079),f=n(78787),m=n(62546),p=n(65474),h=n(57231),v=n(78657),x=n(52070),j=n(35022),b=n(82534),y=n(75564),N=n.n(y),w=n(85893);function g(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,t)}return n}function k(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?g(Object(n),!0).forEach(function(r){(0,a.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}r.default=function(e){var r,n=e.authToken,l=(0,c.useState)([]),y=l[0],g=l[1],O=(0,c.useState)({}),P=O[0],R=O[1],C=(0,c.useState)({}),S=C[0],A=C[1],Z=(0,c.useState)(1),E=Z[0],K=Z[1],I=(0,c.useState)([]),D=I[0],M=I[1],T=(0,c.useState)(!1),_=T[0],z=T[1],B=(0,c.useState)({}),F=B[0],J=B[1];(0,c.useEffect)(function(){var e=function(){return z(window.innerWidth<768)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]);var L=(0,c.useCallback)((0,s.Z)(i().mark(function e(){var r;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.gajkesaristeels.in/employee/getAll",{headers:{Authorization:"Bearer ".concat(n)}});case 3:return r=e.sent,e.next=6,r.json();case 6:g(e.sent.sort(function(e,r){return e.firstName.localeCompare(r.firstName)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error fetching employees:",e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])})),[n]),U=(0,c.useCallback)((0,s.Z)(i().mark(function e(){var r;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.gajkesaristeels.in/travel-rates/getAll",{headers:{Authorization:"Bearer ".concat(n)}});case 3:if((r=e.sent).ok){e.next=6;break}throw Error("Failed to fetch travel rates");case 6:return e.next=8,r.json();case 8:M(e.sent),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error fetching travel rates:",e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])})),[n]);(0,c.useEffect)(function(){L(),U()},[L,U]);var H=function(e,r,n){A(function(t){return k(k({},t),{},(0,a.Z)({},e,k(k({},t[e]),{},(0,a.Z)({},r,n))))})},Q=(r=(0,s.Z)(i().mark(function e(r){var t,s,l,c;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=S[r]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,fetch("https://api.gajkesaristeels.in/employee/setSalary",{method:"PUT",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({travelAllowance:t.travelAllowance,dearnessAllowance:t.dearnessAllowance,fullMonthSalary:t.fullMonthSalary,employeeId:r})});case 6:if(e.sent.ok){e.next=9;break}throw Error("Failed to update salary");case 9:if(s=D.find(function(e){return e.employeeId===r}),l={employeeId:r,carRatePerKm:parseFloat(t.carRatePerKm)||0,bikeRatePerKm:parseFloat(t.bikeRatePerKm)||0},!s){e.next=17;break}return e.next=14,fetch("https://api.gajkesaristeels.in/travel-rates/edit?id=".concat(s.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify(l)});case 14:c=e.sent,e.next=20;break;case 17:return e.next=19,fetch("https://api.gajkesaristeels.in/travel-rates/create",{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify(l)});case 19:c=e.sent;case 20:if(c.ok){e.next=22;break}throw Error("Failed to update travel rates");case 22:L(),U(),R(function(e){return k(k({},e),{},(0,a.Z)({},r,!1))}),f.ZP.success({message:"Success",description:"Salary and travel rates updated successfully!"}),e.next=32;break;case 28:e.prev=28,e.t0=e.catch(3),console.error("Error saving changes:",e.t0),f.ZP.error({message:"Error",description:"Error saving changes."});case 32:case"end":return e.stop()}},e,null,[[3,28]])})),function(e){return r.apply(this,arguments)}),Y=function(e){var r=y.find(function(r){return r.id===e}),n=D.find(function(r){return r.employeeId===e});R(function(r){return k(k({},r),{},(0,a.Z)({},e,!0))}),A(function(t){return k(k({},t),{},(0,a.Z)({},e,{travelAllowance:(null==r?void 0:r.travelAllowance)||0,dearnessAllowance:(null==r?void 0:r.dearnessAllowance)||0,fullMonthSalary:(null==r?void 0:r.fullMonthSalary)||0,carRatePerKm:(null==n?void 0:n.carRatePerKm)||0,bikeRatePerKm:(null==n?void 0:n.bikeRatePerKm)||0}))})},q=function(e){R(function(r){return k(k({},r),{},(0,a.Z)({},e,!1))}),A(function(r){var n=k({},r);return delete n[e],n})},W=10*E,$=y.slice(W-10,W),G=Math.ceil(y.length/10),V=function(e){J(function(r){return k(k({},r),{},(0,a.Z)({},e,!r[e]))})};return(0,w.jsxs)("div",{className:N().allowanceContainer,children:[(0,w.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Allowance Details"}),_?(0,w.jsx)("div",{className:"space-y-4",children:$.map(function(e){var r,n,t,a,s,l,i,c,u,d,f,y,N,g,k,O,R,C;return(0,w.jsxs)(p.Zb,{className:"overflow-hidden",children:[(0,w.jsx)(p.Ol,{className:"pb-2",children:(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,w.jsx)(h.qE,{className:"h-12 w-12 bg-blue-500",children:(0,w.jsx)(h.Q5,{children:(R=e.firstName,C=e.lastName,"".concat(R.charAt(0)).concat(C.charAt(0)).toUpperCase())})}),(0,w.jsx)(p.ll,{children:"".concat(e.firstName," ").concat(e.lastName)})]}),(0,w.jsx)(o.z,{variant:"ghost",size:"sm",onClick:function(){return V(e.id)},children:F[e.id]?(0,w.jsx)(v.Z,{className:"h-5 w-5"}):(0,w.jsx)(x.Z,{className:"h-5 w-5"})})]})}),F[e.id]&&(0,w.jsxs)(p.aY,{children:[(0,w.jsxs)("div",{className:"space-y-4",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(j.Z,{className:"h-5 w-5 text-green-500"}),(0,w.jsx)("span",{className:"font-medium",children:"DA:"})]}),P[e.id]?(0,w.jsx)(m.I,{type:"number",value:null!==(r=null===(n=S[e.id])||void 0===n?void 0:n.dearnessAllowance)&&void 0!==r?r:e.dearnessAllowance,onChange:function(r){return H(e.id,"dearnessAllowance",r.target.value)},className:"w-24 text-right"}):(0,w.jsx)("span",{className:"font-semibold",children:e.dearnessAllowance})]}),(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(j.Z,{className:"h-5 w-5 text-blue-500"}),(0,w.jsx)("span",{className:"font-medium",children:"Salary:"})]}),P[e.id]?(0,w.jsx)(m.I,{type:"number",value:null!==(t=null===(a=S[e.id])||void 0===a?void 0:a.fullMonthSalary)&&void 0!==t?t:e.fullMonthSalary,onChange:function(r){return H(e.id,"fullMonthSalary",r.target.value)},className:"w-24 text-right"}):(0,w.jsx)("span",{className:"font-semibold",children:e.fullMonthSalary})]}),(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(b.Z,{className:"h-5 w-5 text-yellow-500"}),(0,w.jsx)("span",{className:"font-medium",children:"Car Rate:"})]}),P[e.id]?(0,w.jsx)(m.I,{type:"number",value:null!==(s=null!==(l=null===(i=S[e.id])||void 0===i?void 0:i.carRatePerKm)&&void 0!==l?l:null===(c=D.find(function(r){return r.employeeId===e.id}))||void 0===c?void 0:c.carRatePerKm)&&void 0!==s?s:0,onChange:function(r){return H(e.id,"carRatePerKm",r.target.value)},className:"w-24 text-right"}):(0,w.jsx)("span",{className:"font-semibold",children:null!==(u=null===(d=D.find(function(r){return r.employeeId===e.id}))||void 0===d?void 0:d.carRatePerKm)&&void 0!==u?u:0})]}),(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(b.Z,{className:"h-5 w-5 text-purple-500"}),(0,w.jsx)("span",{className:"font-medium",children:"Bike Rate:"})]}),P[e.id]?(0,w.jsx)(m.I,{type:"number",value:null!==(f=null!==(y=null===(N=S[e.id])||void 0===N?void 0:N.bikeRatePerKm)&&void 0!==y?y:null===(g=D.find(function(r){return r.employeeId===e.id}))||void 0===g?void 0:g.bikeRatePerKm)&&void 0!==f?f:0,onChange:function(r){return H(e.id,"bikeRatePerKm",r.target.value)},className:"w-24 text-right"}):(0,w.jsx)("span",{className:"font-semibold",children:null!==(k=null===(O=D.find(function(r){return r.employeeId===e.id}))||void 0===O?void 0:O.bikeRatePerKm)&&void 0!==k?k:0})]})]}),(0,w.jsx)("div",{className:"mt-4",children:P[e.id]?(0,w.jsxs)("div",{className:"flex space-x-2",children:[(0,w.jsx)(o.z,{onClick:function(){return Q(e.id)},className:"flex-1",children:"Save"}),(0,w.jsx)(o.z,{onClick:function(){return q(e.id)},variant:"outline",className:"flex-1",children:"Cancel"})]}):(0,w.jsx)(o.z,{onClick:function(){return Y(e.id)},className:"w-full",children:"Edit"})})]})]},e.id)})}):(0,w.jsxs)(u.iA,{children:[(0,w.jsx)(u.xD,{children:(0,w.jsxs)(u.SC,{children:[(0,w.jsx)(u.ss,{children:"Employee"}),(0,w.jsx)(u.ss,{children:"DA"}),(0,w.jsx)(u.ss,{children:"Salary"}),(0,w.jsx)(u.ss,{children:"Car Rate (per km)"}),(0,w.jsx)(u.ss,{children:"Bike Rate (per km)"}),(0,w.jsx)(u.ss,{children:"Action"})]})}),(0,w.jsx)(u.RM,{children:$.map(function(e){var r,n,t,a,s,l,i,c,d,f,p,h,v,x,j,b;return(0,w.jsxs)(u.SC,{children:[(0,w.jsxs)(u.pj,{children:[e.firstName," ",e.lastName]}),(0,w.jsx)(u.pj,{children:P[e.id]?(0,w.jsx)(m.I,{type:"number",value:null!==(r=null===(n=S[e.id])||void 0===n?void 0:n.dearnessAllowance)&&void 0!==r?r:e.dearnessAllowance,onChange:function(r){return H(e.id,"dearnessAllowance",r.target.value)},className:"w-full"}):e.dearnessAllowance}),(0,w.jsx)(u.pj,{children:P[e.id]?(0,w.jsx)(m.I,{type:"number",value:null!==(t=null===(a=S[e.id])||void 0===a?void 0:a.fullMonthSalary)&&void 0!==t?t:e.fullMonthSalary,onChange:function(r){return H(e.id,"fullMonthSalary",r.target.value)},className:"w-full"}):e.fullMonthSalary}),(0,w.jsx)(u.pj,{children:P[e.id]?(0,w.jsx)(m.I,{type:"number",value:null!==(s=null!==(l=null===(i=S[e.id])||void 0===i?void 0:i.carRatePerKm)&&void 0!==l?l:null===(c=D.find(function(r){return r.employeeId===e.id}))||void 0===c?void 0:c.carRatePerKm)&&void 0!==s?s:0,onChange:function(r){return H(e.id,"carRatePerKm",r.target.value)},className:"w-full"}):null!==(d=null===(f=D.find(function(r){return r.employeeId===e.id}))||void 0===f?void 0:f.carRatePerKm)&&void 0!==d?d:0}),(0,w.jsx)(u.pj,{children:P[e.id]?(0,w.jsx)(m.I,{type:"number",value:null!==(p=null!==(h=null===(v=S[e.id])||void 0===v?void 0:v.bikeRatePerKm)&&void 0!==h?h:null===(x=D.find(function(r){return r.employeeId===e.id}))||void 0===x?void 0:x.bikeRatePerKm)&&void 0!==p?p:0,onChange:function(r){return H(e.id,"bikeRatePerKm",r.target.value)},className:"w-full"}):null!==(j=null===(b=D.find(function(r){return r.employeeId===e.id}))||void 0===b?void 0:b.bikeRatePerKm)&&void 0!==j?j:0}),(0,w.jsx)(u.pj,{children:P[e.id]?(0,w.jsxs)("div",{className:"flex space-x-2",children:[(0,w.jsx)(o.z,{onClick:function(){return Q(e.id)},className:"flex-1",children:"Save"}),(0,w.jsx)(o.z,{onClick:function(){return q(e.id)},variant:"outline",className:"flex-1",children:"Cancel"})]}):(0,w.jsx)(o.z,{onClick:function(){return Y(e.id)},className:"w-full",children:"Edit"})})]},e.id)})})]}),(0,w.jsx)(d.tl,{className:"mt-4",children:(0,w.jsxs)(d.ng,{children:[E>1&&(0,w.jsx)(d.nt,{children:(0,w.jsx)(d.dN,{onClick:function(){return K(E-1)}})}),(0,t.Z)(Array(G)).map(function(e,r){return(0,w.jsx)(d.nt,{children:(0,w.jsx)(d.kN,{isActive:E===r+1,onClick:function(){return K(r+1)},children:r+1})},r)}),E<G&&(0,w.jsx)(d.nt,{children:(0,w.jsx)(d.$0,{onClick:function(){return K(E+1)}})})]})})]})}},75564:function(e){e.exports={allowanceContainer:"Allowance_allowanceContainer__E2utl",table:"Allowance_table__yBLYf",noDataMessage:"Allowance_noDataMessage__y_QMT"}}}]);