(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1426],{5408:function(e,t,n){"use strict";n.r(t);var r=n(59499),a=n(50029),s=n(64687),o=n.n(s),c=n(67294),i=n(11163),l=n(45007),u=n(83800),d=n(94425),p=n(29222),f=n(7731),y=n(85377),h=n(87066),m=n(85893);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b="https://api.gajkesaristeels.in";t.default=function(){var e,t=(0,i.useRouter)(),n=t.query,r=n.employee,s=n.state,w=(0,c.useState)((0,u.WU)(new Date,"yyyy-MM-dd")),g=w[0],v=w[1],O=(0,c.useState)((0,u.WU)(new Date,"yyyy-MM-dd")),D=O[0],j=O[1],E=(0,c.useState)(t.query.selectedOption||"Today"),k=E[0],P=E[1],q=(0,c.useState)(parseInt(t.query.currentPage||"1")),N=q[0],_=q[1],S=(0,c.useState)(!1),C=S[0],R=S[1],B=(0,c.useState)(null),M=B[0],Z=B[1],L=(0,l.v9)(function(e){return e.auth.token}),T=(e=(0,a.Z)(o().mark(function e(t,n,r){var a,s;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.prev=1,e.next=4,h.Z.get("".concat(b,"/employee/getAll"),{headers:{Authorization:"Bearer ".concat(L)}});case 4:if(a=e.sent.data.find(function(e){return"".concat(e.firstName," ").concat(e.lastName).toLowerCase()===t.toLowerCase()})){e.next=9;break}throw Error("Employee not found");case 9:return e.next=11,fetch("".concat(b,"/visit/getByDateRangeAndEmployeeStats?id=").concat(a.id,"&start=").concat(n,"&end=").concat(r),{headers:{Authorization:"Bearer ".concat(L)}});case 11:if((s=e.sent).ok){e.next=14;break}throw Error("Failed to fetch employee details: ".concat(s.statusText));case 14:return e.next=16,s.json();case 16:Z(e.sent),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(1),console.error("Error fetching employee details:",e.t0),Z(null);case 24:return e.prev=24,R(!1),e.finish(24);case 27:case"end":return e.stop()}},e,null,[[1,20,24,27]])})),function(t,n,r){return e.apply(this,arguments)});(0,c.useEffect)(function(){t.isReady&&(t.query.startDate&&t.query.endDate&&(v(t.query.startDate),j(t.query.endDate)),t.query.selectedOption&&P(t.query.selectedOption))},[t.isReady,t.query]),(0,c.useEffect)(function(){r&&L&&g&&D&&T(r,g,D)},[r,L,g,D]);var z=function(e,n,r){v(e),j(n),P(r),t.push({pathname:t.pathname,query:x(x({},t.query),{},{startDate:e,endDate:n,selectedOption:r})},void 0,{shallow:!0})},A=function(){t.push(s?"/Dashboard?state=".concat(s):"/Dashboard")};return r?(0,m.jsx)("div",{className:"container-dashboard w-full max-w-[100vw] mx-auto py-4 sm:py-8 px-3 sm:px-4",children:(0,m.jsxs)("div",{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,m.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Employee Details"}),(0,m.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,m.jsx)(f.default,{selectedOption:k,onDateRangeChange:z}),(0,m.jsxs)(p.z,{variant:"outline",size:"sm",onClick:A,children:[(0,m.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})]})]}),M&&(0,m.jsx)(y.default,{employeeDetails:M,selectedEmployee:r,setSelectedEmployee:function(){},handleDateRangeChange:z,selectedOption:k,handleViewDetails:function(e){t.push({pathname:"/VisitDetailPage/".concat(e),query:{returnTo:"employeeDetails",employee:r,state:s,startDate:g,endDate:D,selectedOption:k,currentPage:N.toString()}})},currentPage:N,setCurrentPage:_,isLoading:C,onBackClick:A})]})}):null}},14038:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/EmployeeDetailsPage/[employee]",function(){return n(5408)}])},94425:function(e,t,n){"use strict";var r=n(4730),a=n(67294),s=["title","titleId"],o=a.forwardRef(function(e,t){var n=e.title,o=e.titleId,c=(0,r.Z)(e,s);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},c),n?a.createElement("title",{id:o},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))});t.Z=o}},function(e){e.O(0,[3800,3287,7662,5377,2888,9774,179],function(){return e(e.s=14038)}),_N_E=e.O()}]);