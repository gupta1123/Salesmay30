(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2767],{92765:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var s=n(16835),r=n(27812),a=n(59499),i=n(4730),c=n(67294),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},o=["color","size","strokeWidth","absoluteStrokeWidth","className","children"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=function(e,t){var n=(0,c.forwardRef)(function(n,a){var u=n.color,m=n.size,f=void 0===m?24:m,h=n.strokeWidth,p=void 0===h?2:h,x=n.absoluteStrokeWidth,j=n.className,N=n.children,y=(0,i.Z)(n,o);return(0,c.createElement)("svg",d(d({ref:a},l),{},{width:f,height:f,stroke:void 0===u?"currentColor":u,strokeWidth:x?24*Number(p)/Number(f):p,className:["lucide","lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),void 0===j?"":j].join(" ")},y),[].concat((0,r.Z)(t.map(function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return(0,c.createElement)(n,r)})),(0,r.Z)(Array.isArray(N)?N:[N])))});return n.displayName="".concat(e),n}},79162:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var s=(0,n(92765).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},57231:function(e,t,n){"use strict";n.d(t,{F$:function(){return p},Q5:function(){return x},qE:function(){return h}});var s=n(59499),r=n(4730),a=n(67294),i=n(10952),c=n(20439),l=n(85893),o=["className"],u=["className"],d=["className"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=a.forwardRef(function(e,t){var n=e.className,s=(0,r.Z)(e,o);return(0,l.jsx)(i.fC,f({ref:t,className:(0,c.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n)},s))});h.displayName=i.fC.displayName;var p=a.forwardRef(function(e,t){var n=e.className,s=(0,r.Z)(e,u);return(0,l.jsx)(i.Ee,f({ref:t,className:(0,c.cn)("aspect-square h-full w-full",n)},s))});p.displayName=i.Ee.displayName;var x=a.forwardRef(function(e,t){var n=e.className,s=(0,r.Z)(e,d);return(0,l.jsx)(i.NY,f({ref:t,className:(0,c.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",n)},s))});x.displayName=i.NY.displayName},91617:function(e,t,n){"use strict";n.d(t,{RM:function(){return v},Rn:function(){return C},SC:function(){return w},iA:function(){return N},pj:function(){return g},ss:function(){return b},xD:function(){return y}});var s=n(59499),r=n(4730),a=n(67294),i=n(20439),c=n(85893),l=["className"],o=["className"],u=["className"],d=["className"],m=["className"],f=["className"],h=["className"],p=["className"];function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var N=a.forwardRef(function(e,t){var n=e.className,s=(0,r.Z)(e,l);return(0,c.jsx)("div",{className:"relative w-full overflow-auto",children:(0,c.jsx)("table",j({ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",n)},s))})});N.displayName="Table";var y=a.forwardRef(function(e,t){var n=e.className,s=(0,r.Z)(e,o);return(0,c.jsx)("thead",j({ref:t,className:(0,i.cn)("[&_tr]:border-b",n)},s))});y.displayName="TableHeader";var v=a.forwardRef(function(e,t){var n=e.className,s=(0,r.Z)(e,u);return(0,c.jsx)("tbody",j({ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",n)},s))});v.displayName="TableBody",a.forwardRef(function(e,t){var n=e.className,s=(0,r.Z)(e,d);return(0,c.jsx)("tfoot",j({ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n)},s))}).displayName="TableFooter";var w=a.forwardRef(function(e,t){var n=e.className,s=(0,r.Z)(e,m);return(0,c.jsx)("tr",j({ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n)},s))});w.displayName="TableRow";var b=a.forwardRef(function(e,t){var n=e.className,s=(0,r.Z)(e,f);return(0,c.jsx)("th",j({ref:t,className:(0,i.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n)},s))});b.displayName="TableHead";var g=a.forwardRef(function(e,t){var n=e.className,s=(0,r.Z)(e,h);return(0,c.jsx)("td",j({ref:t,className:(0,i.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n)},s))});g.displayName="TableCell";var C=a.forwardRef(function(e,t){var n=e.className,s=(0,r.Z)(e,p);return(0,c.jsx)("caption",j({ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",n)},s))});C.displayName="TableCaption"},47587:function(e,t,n){"use strict";n.r(t);var s=n(50029),r=n(64687),a=n.n(r),i=n(67294),c=n(47321),l=n(29222),o=n(89899),u=n(45007),d=n(85893);t.default=function(e){var t=e.isOpen,n=e.onClose,r=e.onConfirm,m=(0,i.useState)(""),f=m[0],h=m[1],p=(0,i.useState)([]),x=p[0],j=p[1],N=(0,u.v9)(function(e){return e.auth.token});return(0,i.useEffect)(function(){var e,n=(e=(0,s.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.gajkesaristeels.in/employee/getAll",{headers:{Authorization:"Bearer ".concat(N)}});case 3:return t=e.sent,e.next=6,t.json();case 6:j(e.sent),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching field officers:",e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])})),function(){return e.apply(this,arguments)});t&&n()},[t,N]),(0,d.jsx)(c.Vq,{open:t,onOpenChange:function(){h(""),n()},children:(0,d.jsxs)(c.cZ,{children:[(0,d.jsxs)(c.fK,{children:[(0,d.jsx)(c.$N,{children:"Change Field Officer"}),(0,d.jsx)(c.Be,{children:"Select a field officer to assign to the selected customers."})]}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsxs)(o.Ph,{value:f,onValueChange:h,children:[(0,d.jsx)(o.i4,{className:"w-full",children:(0,d.jsx)(o.ki,{placeholder:"Select a field officer"})}),(0,d.jsx)(o.Bw,{children:x.map(function(e){return(0,d.jsxs)(o.Ql,{value:e.id.toString(),children:[e.firstName," ",e.lastName]},e.id)})})]})}),(0,d.jsxs)(c.cN,{children:[(0,d.jsx)(c.GG,{asChild:!0,children:(0,d.jsx)(l.z,{variant:"outline",children:"Cancel"})}),(0,d.jsx)(l.z,{onClick:function(){r(f),n()},children:"Confirm"})]})]})})}},52255:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var s=n(27812),r=n(59499),a=n(16835),i=n(50029),c=n(64687),l=n.n(c),o=n(67294),u=n(65474),d=n(19756),m=n(88767),f=n(62469),h=n(33352),p=n(47587),x=n(57231),j=n(41079),N=n(29222),y=n(6339),v=n(87462),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"},b=n(26492),g=o.forwardRef(function(e,t){return o.createElement(b.Z,(0,v.Z)({},e,{ref:t,icon:w}))}),C=n(91617),k=n(64675),O=n(99125),S=n(82724),P=n(45007),D=n(11163),Z=n(46674),T=n(62546),z=n(61711);n(13571);var E=n(79162),F=n(85893);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var A=new m.QueryClient;function R(){return(0,F.jsx)(m.QueryClientProvider,{client:A,children:(0,F.jsx)(I,{})})}function I(){var e,t,n=(0,D.useRouter)(),c=(0,o.useState)(["shopName","ownerName","city","state","phone","monthlySales","intentLevel","fieldOfficer","clientType","totalVisits","lastVisitDate","email"]),v=c[0],w=c[1],b=(0,o.useState)({storeName:"",primaryContact:"",ownerName:"",city:"",state:"",clientType:"",employeeName:""}),V=b[0],A=b[1],R=(0,o.useState)({storeName:"",primaryContact:"",ownerName:"",city:"",state:"",clientType:"",employeeName:""}),I=R[0],_=R[1],B=(0,o.useState)(!1),W=B[0],M=B[1],U=(0,o.useState)(!1),$=U[0],q=U[1],H=(0,o.useState)([]),Q=H[0],G=H[1],X=(0,o.useState)(1),Y=X[0],K=X[1],J=(0,o.useState)(!1),ee=J[0],et=J[1],en=(0,o.useState)(!1),es=en[0],er=en[1],ea=(0,o.useState)(null),ei=ea[0],ec=ea[1],el=(0,o.useState)(!1),eo=el[0],eu=el[1],ed=(0,o.useState)("storeName"),em=ed[0],ef=ed[1],eh=(0,o.useState)("asc"),ep=eh[0],ex=eh[1],ej=(0,o.useState)(!1),eN=ej[0],ey=ej[1],ev=(0,o.useState)("Please wait, downloading..."),ew=ev[0],eb=ev[1],eg=(0,P.v9)(function(e){return e.auth.token}),eC=(0,P.v9)(function(e){return e.auth.employeeId}),ek=(0,P.v9)(function(e){return e.auth.role});(0,P.v9)(function(e){return e.auth.teamId});var eO=function(e){"ownerName"===e?ef("ownerFirstName"):"totalVisits"===e?ef("visitCount"):ef(e),ex(function(e){return"asc"===e?"desc":"asc"})},eS=(e=(0,i.Z)(l().mark(function e(t){var n,s,r,i,c,o,u,d,m,f,h,p;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.queryKey,(s=(0,a.Z)(n,2))[0],i=(r=s[1]).page,c=r.filters,o=r.sortColumn,u=r.sortDirection,d="https://api.gajkesaristeels.in/store/filteredValues",m=new URLSearchParams,f={storeName:"storeName",primaryContact:"primaryContact",ownerName:"clientName",city:"city",state:"state",clientType:"clientType",employeeName:"employeeName"},Object.entries(c).forEach(function(e){var t=(0,a.Z)(e,2),n=t[0],s=t[1];if(s&&f[n]){if("primaryContact"===n){var r=s.toString().replace(/\D/g,"");r&&m.append(f[n],r)}else m.append(f[n],s.toString())}}),m.append("page",(i-1).toString()),m.append("size","10"),"lastVisitDate"===o||"visitCount"===o?(m.append("sortBy",o),m.append("sortOrder",u)):(h=({ownerFirstName:"clientFirstName",storeName:"storeName",city:"city",state:"state",primaryContact:"primaryContact",monthlySale:"monthlySale",intent:"intent",employeeName:"employeeName",clientType:"clientType",email:"email"})[o]||o,m.append("sort","".concat(h,",").concat(u))),c.employeeName&&eC&&(d="https://api.gajkesaristeels.in/store/getByEmployeeWithSort",m.append("id",eC.toString()),m.append("sortBy",o),m.append("sortOrder",u)),e.next=12,fetch("".concat(d,"?").concat(m.toString()),{headers:{Authorization:"Bearer ".concat(eg)}});case 12:if((p=e.sent).ok){e.next=15;break}throw Error("Network response was not ok");case 15:return e.abrupt("return",p.json());case 16:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),eP=(0,m.useQuery)(["customers",{page:Y,filters:V,sortColumn:em,sortDirection:ep}],eS),eD=eP.data,eZ=(eP.isLoading,eP.isError,eP.error,eP.refetch),eT=(null==eD?void 0:eD.content)||[];null==eD||eD.totalElements;var ez=(null==eD?void 0:eD.totalPages)||1;(0,o.useEffect)(function(){eZ()},[V,Y,em,ep]);var eE=function(e){ec(e),er(!0)},eF=function(){ec(null),er(!1)},eV=function(e,t){"ownerName"===e?A(function(n){return L(L({},n),{},(0,r.Z)({},e,t.toLowerCase()))}):A(function(n){return L(L({},n),{},(0,r.Z)({},e,t))}),K(1)},eL=function(e,t){"ownerName"===e?_(function(n){return L(L({},n),{},(0,r.Z)({},e,t.toLowerCase()))}):_(function(n){return L(L({},n),{},(0,r.Z)({},e,t))})},eA=function(e){A(function(t){return L(L({},t),{},(0,r.Z)({},e,""))}),K(1)},eR=function(e){G(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):[].concat((0,s.Z)(t),[e])})},eI=(t=(0,i.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!ei){e.next=11;break}return e.prev=1,e.next=4,fetch("https://api.gajkesaristeels.in/store/deleteById?id=".concat(ei),{method:"DELETE",headers:{Authorization:"Bearer ".concat(eg)}});case 4:e.sent.ok?(eZ(),eF()):console.error("Failed to delete customer"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error deleting customer:",e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])})),function(){return t.apply(this,arguments)}),e_=function(e){K(e)},eB=function(e){w(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):[].concat((0,s.Z)(t),[e])})},eW=(0,o.useCallback)((0,i.Z)(l().mark(function e(){var t,n,s,r;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ey(!0),eb("Please wait, downloading..."),e.prev=2,e.next=5,fetch("https://api.gajkesaristeels.in/store/export",{headers:{Authorization:"Bearer ".concat(eg)}});case 5:if((t=e.sent).ok){e.next=10;break}return console.error("Failed to fetch export data"),eb("Failed to download. Please try again."),e.abrupt("return");case 10:return e.next=12,t.text();case 12:n=new Blob([e.sent],{type:"text/csv;charset=utf-8;"}),void 0!==(s=document.createElement("a")).download&&(r=URL.createObjectURL(n),s.setAttribute("href",r),s.setAttribute("download","customers_export.csv"),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),eb("Download complete!")),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),console.error("Error exporting data:",e.t0),eb("Failed to download. Please try again.");case 22:return e.prev=22,setTimeout(function(){ey(!1),eb("Please wait, downloading...")},2e3),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[2,18,22,25]])})),[eg]),eM=function(e,t,n,s){return(0,F.jsxs)("div",{className:"space-y-1",children:[(0,F.jsx)(z._,{htmlFor:e,className:"sr-only",children:t}),(0,F.jsxs)("div",{className:"relative",children:[(0,F.jsx)(T.I,{id:e,placeholder:t,value:s?I[e]:V[e],onChange:function(t){return s?eL(e,t.target.value):eV(e,t.target.value)},className:"pl-8 pr-8 h-9"}),(0,F.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-2 pointer-events-none text-gray-400",children:n}),!s&&V[e]&&(0,F.jsx)("button",{onClick:function(){return eA(e)},className:"absolute inset-y-0 right-0 flex items-center pr-2 text-gray-400 hover:text-gray-600",children:(0,F.jsx)(y.q5L,{className:"h-4 w-4"})})]})]})};return(0,F.jsx)("div",{className:"container-customer mx-auto py-8 px-4 sm:px-6 lg:px-8",children:(0,F.jsxs)("div",{children:[(0,F.jsx)("h1",{className:"text-4xl font-bold mb-6",children:"Customer List"}),(0,F.jsx)("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:(0,F.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,F.jsx)(N.z,{variant:"outline",size:"sm",onClick:function(){eu(!0)},children:"Add Customer"}),(0,F.jsxs)(N.z,{variant:"outline",size:"sm",onClick:function(){return M(!W)},className:"hidden md:inline-flex",children:[(0,F.jsx)(y.Ihx,{className:"mr-2 h-4 w-4"}),W?"Hide Filters":"Show Filters"]}),(0,F.jsxs)(k.h_,{children:[(0,F.jsx)(k.$F,{asChild:!0,children:(0,F.jsxs)(N.z,{variant:"outline",size:"sm",children:[(0,F.jsx)(y.Dd2,{className:"mr-2 h-4 w-4"}),"Columns"]})}),(0,F.jsxs)(k.AW,{align:"end",className:"w-56",children:[(0,F.jsx)(k.Ju,{children:"Toggle columns"}),(0,F.jsx)(k.VD,{}),[{value:"shopName",label:"Shop Name"},{value:"ownerName",label:"Owner Name"},{value:"city",label:"City"},{value:"state",label:"State"},{value:"phone",label:"Phone"},{value:"monthlySales",label:"Monthly Sales"},{value:"intentLevel",label:"Intent Level"},{value:"fieldOfficer",label:"Field Officer"},{value:"clientType",label:"Client Type"},{value:"totalVisits",label:"Total Visits"},{value:"lastVisitDate",label:"Last Visit Date"},{value:"email",label:"Email"}].map(function(e){return(0,F.jsx)(k.bO,{checked:v.includes(e.value),onCheckedChange:function(){return eB(e.value)},children:(0,F.jsxs)("div",{className:"flex items-center justify-between w-full",children:[e.label,v.includes(e.value)&&(0,F.jsx)(E.Z,{className:"h-4 w-4"})]})},e.value)})]})]}),(0,F.jsx)(N.z,{variant:"outline",size:"sm",onClick:eW,disabled:eN,children:eN?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("svg",{className:"animate-spin h-4 w-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,F.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,F.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),ew]}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(y._hL,{className:"mr-2 h-4 w-4"}),"Export"]})}),(0,F.jsx)(N.z,{variant:"outline",size:"icon",onClick:function(){return q(!0)},className:"md:hidden",children:(0,F.jsx)(y.Ihx,{className:"h-4 w-4"})})]})}),W&&(0,F.jsx)(u.Zb,{className:"mb-6 hidden md:block",children:(0,F.jsx)(u.aY,{className:"p-4",children:(0,F.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[eM("storeName","Shop Name",(0,F.jsx)(y.fzv,{className:"h-4 w-4"}),!1),eM("ownerName","Owner Name",(0,F.jsx)(y.fzv,{className:"h-4 w-4"}),!1),eM("city","City",(0,F.jsx)(g,{className:"h-4 w-4"}),!1),eM("state","State",(0,F.jsx)(g,{className:"h-4 w-4"}),!1),eM("primaryContact","Phone",(0,F.jsx)(y.tUt,{className:"h-4 w-4"}),!1),eM("clientType","Client Type",(0,F.jsx)(y.xUG,{className:"h-4 w-4"}),!1),eM("employeeName","Field Officer",(0,F.jsx)(y.ggF,{className:"h-4 w-4"}),!1)]})})}),(0,F.jsx)(O.default,{isOpen:eo,onClose:function(){eu(!1)},token:eg||"",employeeId:eC?Number(eC):null}),"MANAGER"===ek&&(0,F.jsx)("div",{className:"mb-4",children:(0,F.jsx)("h2",{className:"text-xl font-semibold",children:"Team Customers"})}),(0,F.jsx)(Z.yo,{open:$,onOpenChange:q,children:(0,F.jsxs)(Z.ue,{children:[(0,F.jsx)(Z.Tu,{children:(0,F.jsx)(Z.bC,{children:"Customer Filters"})}),(0,F.jsxs)("div",{className:"py-4 space-y-4",children:[eM("storeName","Shop Name",(0,F.jsx)(y.fzv,{className:"h-4 w-4"}),!0),eM("ownerName","Owner Name",(0,F.jsx)(y.fzv,{className:"h-4 w-4"}),!0),eM("city","City",(0,F.jsx)(g,{className:"h-4 w-4"}),!0),eM("state","State",(0,F.jsx)(g,{className:"h-4 w-4"}),!0),eM("primaryContact","Phone",(0,F.jsx)(y.tUt,{className:"h-4 w-4"}),!0),eM("clientType","Client Type",(0,F.jsx)(y.xUG,{className:"h-4 w-4"}),!0),eM("employeeName","Field Officer",(0,F.jsx)(y.ggF,{className:"h-4 w-4"}),!0)]}),(0,F.jsxs)(Z.FF,{className:"flex gap-2",children:[(0,F.jsx)(N.z,{variant:"outline",onClick:function(){var e={storeName:"",primaryContact:"",ownerName:"",city:"",state:"",clientType:"",employeeName:""};A(e),_(e),K(1),eZ()},children:"Clear All"}),(0,F.jsx)(N.z,{onClick:function(){A(I),q(!1),K(1),eZ()},children:"Apply Filters"})]})]})}),(0,F.jsx)("div",{className:"md:hidden space-y-4",children:eT.map(function(e){var t,s,r;return(0,F.jsxs)(u.Zb,{className:"overflow-hidden",children:[(0,F.jsx)(u.Ol,{className:"pb-2",children:(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,F.jsxs)(x.qE,{children:[(0,F.jsx)(x.F$,{src:"https://source.boringavatars.com/beam/120/".concat(e.clientFirstName).concat(e.clientLastName,"?colors=264653,2a9d8f,e9c46a,f4a261,e76f51")}),(0,F.jsx)(x.Q5,{children:(s=e.clientFirstName,r=e.clientLastName,"".concat(s.charAt(0)).concat(r.charAt(0)).toUpperCase())})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)(u.ll,{className:"text-lg",children:e.storeName}),(0,F.jsxs)("p",{className:"text-sm text-gray-500",children:[e.city,", ",e.state]})]})]}),(0,F.jsx)(d.C,{variant:e.clientType?"outline":"secondary",children:e.clientType||"N/A"})]})}),(0,F.jsxs)(u.aY,{className:"pt-2",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,F.jsx)(y.fzv,{className:"text-blue-500"}),(0,F.jsx)("span",{className:"font-medium",children:"Owner:"}),(0,F.jsxs)("span",{children:[e.clientFirstName," ",e.clientLastName]})]}),(0,F.jsx)(N.z,{variant:"ghost",size:"sm",onClick:function(){return eR(e.storeId)},children:Q.includes(e.storeId)?(0,F.jsx)(f.g8U,{className:"h-4 w-4"}):(0,F.jsx)(f.v4q,{className:"h-4 w-4"})})]}),Q.includes(e.storeId)&&(0,F.jsxs)("div",{className:"mt-4 space-y-3 text-sm",children:[(0,F.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,F.jsx)(y.tUt,{className:"text-green-500"}),(0,F.jsx)("span",{className:"font-medium",children:"Phone:"}),(0,F.jsx)("span",{children:e.primaryContact})]}),(0,F.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,F.jsx)(y.oQC,{className:"text-yellow-500"}),(0,F.jsx)("span",{className:"font-medium",children:"Monthly Sales:"}),(0,F.jsx)("span",{children:e.monthlySale?"".concat(e.monthlySale.toLocaleString()," tonnes"):"N/A"})]}),(0,F.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,F.jsx)(y.xUG,{className:"text-red-500"}),(0,F.jsx)("span",{className:"font-medium",children:"Intent:"}),(0,F.jsx)("span",{children:null!==(t=e.intent)&&void 0!==t?t:"N/A"})]}),(0,F.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,F.jsx)(y.ggF,{className:"text-purple-500"}),(0,F.jsx)("span",{className:"font-medium",children:"Field Officer:"}),(0,F.jsx)("span",{children:e.employeeName||"N/A"})]}),(0,F.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,F.jsx)(y.fzv,{className:"text-indigo-500"}),(0,F.jsx)("span",{className:"font-medium",children:"Total Visits:"}),(0,F.jsx)("span",{children:e.totalVisitCount})]})]}),(0,F.jsx)("div",{className:"mt-4 flex justify-end items-center",children:(0,F.jsxs)(k.h_,{children:[(0,F.jsx)(k.$F,{asChild:!0,children:(0,F.jsx)(N.z,{variant:"ghost",size:"sm",children:(0,F.jsx)(S.i0B,{className:"h-4 w-4"})})}),(0,F.jsxs)(k.AW,{align:"end",children:[(0,F.jsx)(k.Xi,{onSelect:function(){return n.push("/CustomerDetailPage/".concat(e.storeId))},children:"View"}),(0,F.jsx)(k.VD,{}),(0,F.jsx)(k.Xi,{onSelect:function(){return eE(e.storeId.toString())},children:"Delete"})]})]})})]})]},e.storeId)})}),(0,F.jsx)("div",{className:"hidden md:block",children:(0,F.jsxs)(C.iA,{className:"text-sm font-poppins",children:[(0,F.jsx)(C.xD,{children:(0,F.jsxs)(C.SC,{children:[v.includes("shopName")&&(0,F.jsxs)(C.ss,{className:"cursor-pointer",onClick:function(){return eO("storeName")},children:["Shop Name","storeName"===em&&(0,F.jsx)("span",{className:"text-black text-sm",children:"asc"===ep?" ▲":" ▼"})]}),v.includes("ownerName")&&(0,F.jsxs)(C.ss,{className:"cursor-pointer",onClick:function(){return eO("ownerName")},children:["Owner Name","ownerFirstName"===em&&(0,F.jsx)("span",{className:"text-black text-sm",children:"asc"===ep?" ▲":" ▼"})]}),v.includes("city")&&(0,F.jsxs)(C.ss,{className:"cursor-pointer",onClick:function(){return eO("city")},children:["City","city"===em&&(0,F.jsx)("span",{className:"text-black text-sm",children:"asc"===ep?" ▲":" ▼"})]}),v.includes("state")&&(0,F.jsxs)(C.ss,{className:"cursor-pointer",onClick:function(){return eO("state")},children:["State","state"===em&&(0,F.jsx)("span",{className:"text-black text-sm",children:"asc"===ep?" ▲":" ▼"})]}),v.includes("phone")&&(0,F.jsxs)(C.ss,{className:"cursor-pointer",onClick:function(){return eO("primaryContact")},children:["Phone","primaryContact"===em&&(0,F.jsx)("span",{className:"text-black text-sm",children:"asc"===ep?" ▲":" ▼"})]}),v.includes("monthlySales")&&(0,F.jsxs)(C.ss,{className:"cursor-pointer",onClick:function(){return eO("monthlySale")},children:["Monthly Sales","monthlySale"===em&&(0,F.jsx)("span",{className:"text-black text-sm",children:"asc"===ep?" ▲":" ▼"})]}),v.includes("intentLevel")&&(0,F.jsxs)(C.ss,{className:"cursor-pointer",onClick:function(){return eO("intent")},children:["Intent Level","intent"===em&&(0,F.jsx)("span",{className:"text-black text-sm",children:"asc"===ep?" ▲":" ▼"})]}),v.includes("fieldOfficer")&&(0,F.jsxs)(C.ss,{className:"cursor-pointer",onClick:function(){return eO("employeeName")},children:["Field Officer","employeeName"===em&&(0,F.jsx)("span",{className:"text-black text-sm",children:"asc"===ep?" ▲":" ▼"})]}),v.includes("clientType")&&(0,F.jsxs)(C.ss,{className:"cursor-pointer",onClick:function(){return eO("clientType")},children:["Client Type","clientType"===em&&(0,F.jsx)("span",{className:"text-black text-sm",children:"asc"===ep?" ▲":" ▼"})]}),v.includes("totalVisits")&&(0,F.jsxs)(C.ss,{className:"cursor-pointer",onClick:function(){return eO("totalVisits")},children:["Total Visits","visitCount"===em&&(0,F.jsx)("span",{className:"text-black text-sm",children:"asc"===ep?" ▲":" ▼"})]}),v.includes("lastVisitDate")&&(0,F.jsxs)(C.ss,{className:"cursor-pointer",onClick:function(){return eO("lastVisitDate")},children:["Last Visit Date","lastVisitDate"===em&&(0,F.jsx)("span",{className:"text-black text-sm",children:"asc"===ep?" ▲":" ▼"})]}),v.includes("email")&&(0,F.jsxs)(C.ss,{className:"cursor-pointer",onClick:function(){return eO("email")},children:["Email","email"===em&&(0,F.jsx)("span",{className:"text-black text-sm",children:"asc"===ep?" ▲":" ▼"})]}),(0,F.jsx)(C.ss,{className:"w-20",children:"Actions"})]})}),(0,F.jsx)(C.RM,{children:eT.map(function(e){return(0,F.jsxs)(C.SC,{children:[v.includes("shopName")&&(0,F.jsx)(C.pj,{children:e.storeName||""}),v.includes("ownerName")&&(0,F.jsx)(C.pj,{children:e.clientFirstName||e.clientLastName?"".concat(e.clientFirstName||""," ").concat(e.clientLastName||"").trim():""}),v.includes("city")&&(0,F.jsx)(C.pj,{children:e.city||""}),v.includes("state")&&(0,F.jsx)(C.pj,{children:e.state||""}),v.includes("phone")&&(0,F.jsx)(C.pj,{children:e.primaryContact||""}),v.includes("monthlySales")&&(0,F.jsx)(C.pj,{children:null!==e.monthlySale&&void 0!==e.monthlySale?"".concat(e.monthlySale.toLocaleString()," tonnes"):""}),v.includes("intentLevel")&&(0,F.jsx)(C.pj,{children:null!==e.intent&&void 0!==e.intent?e.intent:""}),v.includes("fieldOfficer")&&(0,F.jsx)(C.pj,{children:e.employeeName||""}),v.includes("clientType")&&(0,F.jsx)(C.pj,{children:(0,F.jsx)(d.C,{variant:"outline",children:e.clientType||""})}),v.includes("totalVisits")&&(0,F.jsx)(C.pj,{children:e.totalVisitCount}),v.includes("lastVisitDate")&&(0,F.jsx)(C.pj,{children:e.lastVisitDate?new Date(e.lastVisitDate).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}):""}),v.includes("email")&&(0,F.jsx)(C.pj,{children:e.email||""}),(0,F.jsx)(C.pj,{className:"w-20",children:(0,F.jsxs)(k.h_,{children:[(0,F.jsx)(k.$F,{asChild:!0,children:(0,F.jsx)(N.z,{variant:"ghost",size:"sm",children:(0,F.jsx)(S.i0B,{className:"h-4 w-4"})})}),(0,F.jsxs)(k.AW,{align:"end",children:[(0,F.jsx)(k.Xi,{onSelect:function(){return n.push("/CustomerDetailPage/".concat(e.storeId))},children:"View"}),(0,F.jsx)(k.VD,{}),(0,F.jsx)(k.Xi,{onSelect:function(){return eE(e.storeId.toString())},children:"Delete"})]})]})})]},e.storeId)})})]})}),function(){var e=[],t=Math.max(Y-Math.floor(2.5),1),n=t+5-1;n>ez&&(t=Math.max((n=ez)-5+1,1));for(var s=t;s<=n;s++)e.push(s);return(0,F.jsx)(j.tl,{children:(0,F.jsxs)(j.ng,{children:[1!==Y&&(0,F.jsx)(j.dN,{onClick:function(){return e_(Y-1)}}),t>1&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(j.nt,{children:(0,F.jsx)(j.kN,{onClick:function(){return e_(1)},children:"1"})}),t>2&&(0,F.jsx)(j.nt,{children:(0,F.jsx)(j.kN,{children:"..."})})]}),e.map(function(e){return(0,F.jsx)(j.nt,{children:(0,F.jsx)(j.kN,{isActive:e===Y,onClick:function(){return e_(e)},children:e})},e)}),n<ez&&(0,F.jsxs)(F.Fragment,{children:[n<ez-1&&(0,F.jsx)(j.nt,{children:(0,F.jsx)(j.kN,{children:"..."})}),(0,F.jsx)(j.nt,{children:(0,F.jsx)(j.kN,{onClick:function(){return e_(ez)},children:ez})})]}),Y!==ez&&(0,F.jsx)(j.$0,{onClick:function(){return e_(Y+1)}})]})})}(),(0,F.jsx)(h.default,{isOpen:es,onClose:eF,onConfirm:eI}),(0,F.jsx)(p.default,{isOpen:ee,onClose:function(){return et(!1)},onConfirm:function(e){console.log("Changing field officer to:",e),et(!1)}})]})})}},33352:function(e,t,n){"use strict";n.r(t);var s=n(29222),r=n(47321),a=n(85893);t.default=function(e){var t=e.isOpen,n=e.onClose,i=e.onConfirm;return(0,a.jsx)(r.Vq,{open:t,onOpenChange:n,children:(0,a.jsxs)(r.cZ,{children:[(0,a.jsxs)(r.fK,{children:[(0,a.jsx)(r.$N,{children:"Confirm Delete"}),(0,a.jsx)(r.Be,{children:"Are you sure you want to delete this customer?"})]}),(0,a.jsxs)(r.cN,{children:[(0,a.jsx)(s.z,{variant:"outline",onClick:n,children:"Cancel"}),(0,a.jsx)(s.z,{variant:"destructive",onClick:i,children:"Delete"})]})]})})}},21664:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/CustomerListPage",function(){return n(52255)}])},13571:function(){},10952:function(e,t,n){"use strict";n.d(t,{Ee:function(){return v},NY:function(){return w},fC:function(){return y}});var s=n(67294),r=n(25360),a=n(79698),i=n(9981),c=n(75320),l=n(85893),o="Avatar",[u,d]=(0,r.b)(o),[m,f]=u(o),h=s.forwardRef((e,t)=>{let{__scopeAvatar:n,...r}=e,[a,i]=s.useState("idle");return(0,l.jsx)(m,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:(0,l.jsx)(c.WV.span,{...r,ref:t})})});h.displayName=o;var p="AvatarImage",x=s.forwardRef((e,t)=>{let{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...u}=e,d=f(p,n),m=function(e,t){let[n,r]=s.useState("idle");return(0,i.b)(()=>{if(!e){r("error");return}let n=!0,s=new window.Image,a=e=>()=>{n&&r(e)};return r("loading"),s.onload=a("loaded"),s.onerror=a("error"),s.src=e,t&&(s.referrerPolicy=t),()=>{n=!1}},[e,t]),n}(r,u.referrerPolicy),h=(0,a.W)(e=>{o(e),d.onImageLoadingStatusChange(e)});return(0,i.b)(()=>{"idle"!==m&&h(m)},[m,h]),"loaded"===m?(0,l.jsx)(c.WV.img,{...u,ref:t,src:r}):null});x.displayName=p;var j="AvatarFallback",N=s.forwardRef((e,t)=>{let{__scopeAvatar:n,delayMs:r,...a}=e,i=f(j,n),[o,u]=s.useState(void 0===r);return s.useEffect(()=>{if(void 0!==r){let e=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(e)}},[r]),o&&"loaded"!==i.imageLoadingStatus?(0,l.jsx)(c.WV.span,{...a,ref:t}):null});N.displayName=j;var y=h,v=x,w=N}},function(e){e.O(0,[594,9545,6066,5059,3133,8767,2981,6615,2888,9774,179],function(){return e(e.s=21664)}),_N_E=e.O()}]);