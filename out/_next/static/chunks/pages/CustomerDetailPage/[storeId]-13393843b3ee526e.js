(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8147],{72257:function(e,t,s){"use strict";s.r(t);var n=s(59499),r=s(50029),a=s(64687),i=s.n(a),c=s(67294),l=s(47321),o=s(85781),d=s(62546),u=s(61711),h=s(29222),p=s(89899),m=s(20072),x=s(56853),j=s(35376),f=s(83800),v=s(87066),g=s(3328),y=s(85893);function N(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function k(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?N(Object(s),!0).forEach(function(t){(0,n.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):N(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}t.default=function(e){var t,s=e.isOpen,n=e.onClose,a=e.storeId,N=e.createTask,b=(0,c.useState)({taskTitle:"",taskDesciption:"",dueDate:"",assignedToId:0,assignedToName:"",assignedById:86,status:"Assigned",priority:"low",taskType:"requirement",storeId:a,category:"",storeName:""}),w=b[0],C=b[1],S=(0,c.useState)("general"),Z=S[0],P=S[1];(0,c.useEffect)(function(){var e;(e=(0,r.Z)(i().mark(function e(){var t,s;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.get("https://api.gajkesaristeels.in/task/getByStoreAndDate?storeId=".concat(a,"&start=2024-06-01&end=2024-06-30"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 3:Array.isArray((t=e.sent).data)&&t.data.length>0&&(s=t.data[0],C(function(e){return k(k({},e),{},{assignedToId:s.assignedToId,assignedToName:s.assignedToName,storeName:s.storeName})})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching task details:",e.t0),g.ZP.error("Error fetching task details.");case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(){return e.apply(this,arguments)})()},[a]);var D=(t=(0,r.Z)(i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.post("https://api.gajkesaristeels.in/task/create",k(k({},w),{},{dueDate:w.dueDate.split("T")[0],storeId:w.storeId,taskType:"requirement"}),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 3:e.sent,g.ZP.success("Requirement created successfully!"),N(),n(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error creating requirement:",e.t0),g.ZP.error("Error creating requirement.");case 13:case"end":return e.stop()}},e,null,[[0,9]])})),function(){return t.apply(this,arguments)});return(0,y.jsx)(l.Vq,{open:s,onOpenChange:n,children:(0,y.jsxs)(l.cZ,{className:"sm:max-w-[600px]",children:[(0,y.jsxs)(l.fK,{children:[(0,y.jsx)(l.$N,{children:"Create Requirement"}),(0,y.jsx)(l.Be,{children:"Fill in the requirement details."})]}),(0,y.jsxs)(o.mQ,{value:Z,children:[(0,y.jsxs)(o.dr,{className:"mb-4",children:[(0,y.jsx)(o.SP,{value:"general",onClick:function(){return P("general")},children:"General"}),(0,y.jsx)(o.SP,{value:"details",onClick:function(){return P("details")},children:"Details"})]}),(0,y.jsx)(o.nU,{value:"general",children:(0,y.jsxs)("div",{className:"grid gap-4",children:[(0,y.jsxs)("div",{className:"grid gap-2",children:[(0,y.jsx)(u._,{htmlFor:"taskTitle",children:"Requirement Title"}),(0,y.jsx)(d.I,{id:"taskTitle",placeholder:"Enter requirement title",value:w.taskTitle,onChange:function(e){return C(k(k({},w),{},{taskTitle:e.target.value}))}})]}),(0,y.jsxs)("div",{className:"grid gap-2",children:[(0,y.jsx)(u._,{htmlFor:"taskDescription",children:"Requirement Description"}),(0,y.jsx)(d.I,{id:"taskDescription",placeholder:"Enter requirement description",value:w.taskDesciption,onChange:function(e){return C(k(k({},w),{},{taskDesciption:e.target.value}))}})]}),(0,y.jsxs)("div",{className:"grid gap-2",children:[(0,y.jsx)(u._,{htmlFor:"category",children:"Category"}),(0,y.jsxs)(p.Ph,{value:w.category,onValueChange:function(e){return C(k(k({},w),{},{category:e}))},children:[(0,y.jsx)(p.i4,{className:"w-[280px]",children:(0,y.jsx)(p.ki,{placeholder:"Select a category"})}),(0,y.jsx)(p.Bw,{children:(0,y.jsx)(p.Ql,{value:"Requirement",children:"Requirement"})})]})]}),(0,y.jsxs)("div",{className:"grid gap-2",children:[(0,y.jsx)(u._,{htmlFor:"storeName",children:"Store"}),(0,y.jsx)(d.I,{id:"storeName",value:w.storeName,disabled:!0,className:"w-[280px] bg-gray-100"})]}),(0,y.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,y.jsx)(h.z,{variant:"outline",onClick:n,children:"Cancel"}),(0,y.jsx)(h.z,{onClick:function(){P("details")},children:"Next"})]})]})}),(0,y.jsx)(o.nU,{value:"details",children:(0,y.jsxs)("div",{className:"grid gap-4",children:[(0,y.jsxs)("div",{className:"grid gap-2",children:[(0,y.jsx)(u._,{htmlFor:"dueDate",children:"Due Date"}),(0,y.jsxs)(m.J2,{children:[(0,y.jsx)(m.xo,{asChild:!0,children:(0,y.jsxs)(h.z,{variant:"outline",className:"w-[280px] justify-start text-left font-normal ".concat(!w.dueDate&&"text-muted-foreground"),children:[(0,y.jsx)(j.Z,{className:"mr-2 h-4 w-4"}),w.dueDate?(0,f.WU)(new Date(w.dueDate),"PPP"):(0,y.jsx)("span",{children:"Pick a date"})]})}),(0,y.jsx)(m.yk,{className:"w-auto p-0",children:(0,y.jsx)(x.f,{mode:"single",selected:w.dueDate?new Date(w.dueDate):void 0,onSelect:function(e){return C(k(k({},w),{},{dueDate:e?e.toISOString().split("T")[0]:""}))},initialFocus:!0})})]})]}),(0,y.jsxs)("div",{className:"grid gap-2",children:[(0,y.jsx)(u._,{htmlFor:"assignedTo",children:"Assigned To"}),(0,y.jsx)(d.I,{id:"assignedTo",value:w.assignedToName,disabled:!0,className:"w-[280px] bg-gray-100"})]}),(0,y.jsxs)("div",{className:"grid gap-2",children:[(0,y.jsx)(u._,{htmlFor:"priority",children:"Priority"}),(0,y.jsxs)(p.Ph,{value:w.priority,onValueChange:function(e){return C(k(k({},w),{},{priority:e}))},children:[(0,y.jsx)(p.i4,{className:"w-[280px]",children:(0,y.jsx)(p.ki,{placeholder:"Select a priority"})}),(0,y.jsxs)(p.Bw,{children:[(0,y.jsx)(p.Ql,{value:"low",children:"Low"}),(0,y.jsx)(p.Ql,{value:"medium",children:"Medium"}),(0,y.jsx)(p.Ql,{value:"high",children:"High"})]})]})]}),(0,y.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,y.jsx)(h.z,{variant:"outline",onClick:function(){P("general")},children:"Back"}),(0,y.jsx)(h.z,{onClick:D,children:"Create Requirement"})]})]})})]})]})})}},31562:function(e,t,s){"use strict";s.r(t);var n=s(59499),r=s(67294),a=s(29222),i=s(62546),c=s(61711),l=s(89899),o=s(85781),d=s(47321),u=s(85893);function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach(function(t){(0,n.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var m={storeName:"",clientFirstName:"",clientLastName:"",email:"",primaryContact:"",gstNumber:"",clientType:"",otherClientType:"",addressLine1:"",addressLine2:"",village:"",taluka:"",city:"",state:"",pincode:""},x=["shop","site visit","architect","engineer"];t.default=function(e){var t=e.isOpen,s=e.onClose,h=e.customerData,j=e.onSubmit,f=(0,r.useState)("basic-info"),v=f[0],g=f[1],y=(0,r.useState)(m),N=y[0],k=y[1],b=(0,r.useState)(!1),w=b[0],C=b[1],S="bg-gray-100 text-gray-800 font-medium cursor-not-allowed";(0,r.useEffect)(function(){if(h){var e,t=(null===(e=h.clientType)||void 0===e?void 0:e.toLowerCase())||"",s=x.includes(t);k(p(p(p({},m),h),{},{village:h.district||"",taluka:h.subDistrict||"",clientType:s?t:"others",otherClientType:s?"":h.clientType||""})),C(!s)}},[h]);var Z=function(e){var t=e.target,s=t.name,r=t.value;k(function(e){return p(p({},e),{},(0,n.Z)({},s,r))})};return(0,u.jsx)(d.Vq,{open:t,onOpenChange:s,children:(0,u.jsxs)(d.cZ,{className:"sm:max-w-[625px]",children:[(0,u.jsx)(d.fK,{children:(0,u.jsx)(d.$N,{children:"Edit Customer"})}),(0,u.jsxs)(o.mQ,{value:v,onValueChange:g,className:"w-full",children:[(0,u.jsxs)(o.dr,{className:"grid w-full grid-cols-2",children:[(0,u.jsx)(o.SP,{value:"basic-info",children:"Basic Info"}),(0,u.jsx)(o.SP,{value:"address-info",children:"Address Info"})]}),(0,u.jsx)(o.nU,{value:"basic-info",children:(0,u.jsxs)("div",{className:"space-y-4 py-4",children:[(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"storeName",children:"Store Name"}),(0,u.jsx)(i.I,{id:"storeName",name:"storeName",value:N.storeName,disabled:!0,className:S})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"gstNumber",children:"GST Number"}),(0,u.jsx)(i.I,{id:"gstNumber",name:"gstNumber",value:N.gstNumber,onChange:Z})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"clientFirstName",children:"First Name"}),(0,u.jsx)(i.I,{id:"clientFirstName",name:"clientFirstName",value:N.clientFirstName,onChange:Z})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"clientLastName",children:"Last Name"}),(0,u.jsx)(i.I,{id:"clientLastName",name:"clientLastName",value:N.clientLastName,onChange:Z})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"email",children:"Email"}),(0,u.jsx)(i.I,{id:"email",name:"email",type:"email",value:N.email,onChange:Z})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"primaryContact",children:"Phone"}),(0,u.jsx)(i.I,{id:"primaryContact",name:"primaryContact",value:N.primaryContact,disabled:!0,className:S})]})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"clientType",children:"Client Type"}),(0,u.jsxs)(l.Ph,{onValueChange:function(e){var t=e.toLowerCase();C("others"===t),k(function(e){return p(p({},e),{},{clientType:t,otherClientType:"others"===t?e.otherClientType:""})})},value:N.clientType,children:[(0,u.jsx)(l.i4,{children:(0,u.jsx)(l.ki,{placeholder:"Select Client Type"})}),(0,u.jsxs)(l.Bw,{children:[(0,u.jsx)(l.Ql,{value:"shop",children:"Shop"}),(0,u.jsx)(l.Ql,{value:"site visit",children:"Site Visit"}),(0,u.jsx)(l.Ql,{value:"architect",children:"Architect"}),(0,u.jsx)(l.Ql,{value:"engineer",children:"Engineer"}),(0,u.jsx)(l.Ql,{value:"others",children:"Others"})]})]})]}),w&&(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"otherClientType",children:"Please specify"}),(0,u.jsx)(i.I,{id:"otherClientType",name:"otherClientType",value:N.otherClientType,onChange:Z})]}),(0,u.jsx)(a.z,{className:"w-full",onClick:function(){return g("address-info")},children:"Next"})]})}),(0,u.jsx)(o.nU,{value:"address-info",children:(0,u.jsxs)("div",{className:"space-y-4 py-4",children:[(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"addressLine1",children:"Address Line 1"}),(0,u.jsx)(i.I,{id:"addressLine1",name:"addressLine1",value:N.addressLine1,onChange:Z})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"addressLine2",children:"Address Line 2"}),(0,u.jsx)(i.I,{id:"addressLine2",name:"addressLine2",value:N.addressLine2,onChange:Z})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"village",children:"Village (District)"}),(0,u.jsx)(i.I,{id:"village",name:"village",value:N.village,onChange:Z})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"taluka",children:"Taluka (Sub District)"}),(0,u.jsx)(i.I,{id:"taluka",name:"taluka",value:N.taluka,onChange:Z})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"city",children:"City"}),(0,u.jsx)(i.I,{id:"city",name:"city",value:N.city,onChange:Z})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"state",children:"State"}),(0,u.jsx)(i.I,{id:"state",name:"state",value:N.state,onChange:Z})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"pincode",children:"Pincode"}),(0,u.jsx)(i.I,{id:"pincode",name:"pincode",value:N.pincode,onChange:Z})]})]}),(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)(a.z,{variant:"outline",onClick:function(){return g("basic-info")},children:"Back"}),(0,u.jsx)(a.z,{onClick:function(){var e=p({},N);w&&(e.clientType=N.otherClientType||"Others"),j(e)},children:"Update Customer"})]})]})})]})]})})}},20539:function(e,t,s){"use strict";s.r(t);var n=s(27812),r=s(59499),a=s(50029),i=s(16835),c=s(64687),l=s.n(c),o=s(67294),d=s(11163),u=s(9008),h=s.n(u),p=s(4298),m=s.n(p),x=s(87066),j=s(61996),f=s(45007),v=s(31562),g=s(72257),y=s(27320),N=s(79269),k=s(21161),b=s(19398),w=s(3328),C=s(68014),S=s(99474),Z=s(33278),P=s(19059),D=s(30522),O=s(20072),I=s(35376),T=s(16642),A=s(83800),E=s(56853);s(16522);var L=s(41079),q=s(23148),F=s(85893);function B(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?B(Object(s),!0).forEach(function(t){(0,r.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):B(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}q.kL.register(q.uw,q.f$,q.od,q.jn,q.Dx,q.u,q.De);var M=N.Z.TextArea,z=k.Z.Option;t.default=function(){var e,t,s,c,u,p,q,B,V,U,Q,W,R,G,J=(0,d.useRouter)(),$=J.query.storeId,K=(0,o.useState)(null),X=K[0],H=K[1],Y=(0,o.useState)([]),ee=Y[0],et=Y[1],es=(0,o.useState)([]),en=es[0],er=es[1],ea=(0,o.useState)([]),ei=ea[0],ec=ea[1],el=(0,o.useState)([]),eo=el[0],ed=el[1],eu=(0,o.useState)([]),eh=eu[0],ep=eu[1],em=(0,o.useState)([]),ex=em[0],ej=em[1],ef=(0,o.useState)(null);ef[0],ef[1];var ev=(0,o.useState)("leads-info"),eg=ev[0],ey=ev[1],eN=(0,o.useState)(!1),ek=eN[0],eb=eN[1],ew=(0,o.useState)(""),eC=ew[0],eS=ew[1],eZ=(0,o.useState)("visits"),eP=eZ[0],eD=eZ[1],eO=(0,o.useState)(null),eI=eO[0],eT=eO[1],eA=(0,o.useState)(!1),eE=eA[0],eL=eA[1],eq=(0,o.useState)(!1),eF=eq[0],eB=eq[1],e_=(0,o.useState)(!1),eM=e_[0],ez=e_[1],eV=(0,o.useState)(!1),eU=eV[0],eQ=eV[1],eW=(0,o.useState)(!1),eR=eW[0],eG=eW[1],eJ=(0,o.useState)(new Date),e$=eJ[0],eK=eJ[1],eX=(0,o.useState)((0,T.E)(new Date,5)),eH=eX[0],eY=eX[1],e0=b.Z.useForm(),e1=(0,i.Z)(e0,1)[0],e2=(0,f.v9)(function(e){return e.auth.token}),e3=(0,f.v9)(function(e){return e.auth.employeeId}),e7=(0,o.useState)(!1),e4=e7[0],e8=e7[1],e9=(0,o.useState)({visits:!1,notes:!1,complaints:!1,requirements:!1}),e6=e9[0],e5=e9[1],te=(0,o.useState)({visits:1,notes:1,complaints:1,requirements:1}),tt=te[0],ts=te[1],tn=(0,o.useState)([]),tr=tn[0],ta=tn[1],ti=(0,o.useState)([]),tc=ti[0],tl=ti[1],to=(0,o.useState)([]),td=to[0],tu=to[1],th=(0,o.useCallback)((e=(0,a.Z)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/intent-audit/getByStore?id=".concat(t),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:tl(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching intent data:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(t){return e.apply(this,arguments)}),[e2]),tp=(0,o.useCallback)((t=(0,a.Z)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/monthly-sale/getByStore?storeId=".concat(t),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:tu(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching sales data:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return t.apply(this,arguments)}),[e2]),tm=(s=(0,a.Z)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.put("https://api.gajkesaristeels.in/store/edit?id=".concat($),_(_({},t),{},{storeId:parseInt($)}),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:H(t),eb(!1),w.ZP.success("Customer updated successfully!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error updating customer:",e.t0),w.ZP.error("Error updating customer.");case 12:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return s.apply(this,arguments)}),tx=(0,o.useCallback)((c=(0,a.Z)(l().mark(function e(t){var s;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/store/getById?id=".concat(t),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:H((s=e.sent).data),e8(["builder","site visit","architect","engineer"].includes(s.data.clientType.toLowerCase())),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching customer data:",e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])})),function(e){return c.apply(this,arguments)}),[e2]),tj=(0,o.useCallback)((u=(0,a.Z)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/notes/getByStore?id=".concat(t),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:et(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching notes data:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return u.apply(this,arguments)}),[e2]),tf=(0,o.useCallback)((p=(0,a.Z)(l().mark(function e(t){var s;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/visit/getByStore?id=".concat(t),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:er((s=e.sent).data),ta(s.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching visits data:",e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return p.apply(this,arguments)}),[e2]),tv=(0,o.useCallback)((q=(0,a.Z)(l().mark(function e(t,s,n){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/task/getByStoreAndDate?storeId=".concat(t,"&start=").concat(s.toISOString().split("T")[0],"&end=").concat(n.toISOString().split("T")[0]),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:ec(e.sent.data.filter(function(e){return"requirement"===e.taskType})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching requirements data:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,s){return q.apply(this,arguments)}),[e2]),tg=(0,o.useCallback)((B=(0,a.Z)(l().mark(function e(t,s,n){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/task/getByStoreAndDate?storeId=".concat(t,"&start=").concat(s.toISOString().split("T")[0],"&end=").concat(n.toISOString().split("T")[0]),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:ed(e.sent.data.filter(function(e){return"complaint"===e.taskType})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching complaints data:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,s){return B.apply(this,arguments)}),[e2]),ty=(0,o.useCallback)((0,a.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/employee/getAll",{headers:{Authorization:"Bearer ".concat(e2)}});case 3:ep(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching employees:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),[e2]),tN=(0,o.useCallback)((0,a.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/store/names",{headers:{Authorization:"Bearer ".concat(e2)}});case 3:ej(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching stores:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),[e2]),tk=(V=(0,a.Z)(l().mark(function e(){var t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.post("https://api.gajkesaristeels.in/notes/create",{content:eC,employeeId:e3,storeId:parseInt($)},{headers:{Authorization:"Bearer ".concat(e2)}});case 3:t=e.sent,et([].concat((0,n.Z)(ee),[t.data])),eS(""),eL(!1),w.ZP.success("Note added successfully!"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error creating note:",e.t0),w.ZP.error("Error creating note.");case 14:case"end":return e.stop()}},e,null,[[0,10]])})),function(){return V.apply(this,arguments)}),tb=function(e){eT(e.id),eS(e.content),eB(!0),eL(!0)},tw=(U=(0,a.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.put("https://api.gajkesaristeels.in/notes/edit?id=".concat(eI),{content:eC,employeeId:e3,storeId:parseInt($)},{headers:{Authorization:"Bearer ".concat(e2)}});case 3:et(ee.map(function(e){return e.id===eI?_(_({},e),{},{content:eC}):e})),eT(null),eS(""),eB(!1),eL(!1),w.ZP.success("Note updated successfully!"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error updating note:",e.t0),w.ZP.error("Error updating note.");case 16:case"end":return e.stop()}},e,null,[[0,12]])})),function(){return U.apply(this,arguments)}),tC=(Q=(0,a.Z)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.delete("https://api.gajkesaristeels.in/notes/delete?id=".concat(t),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:et(ee.filter(function(e){return e.id!==t})),w.ZP.success("Note deleted successfully!"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error deleting note:",e.t0),w.ZP.error("Error deleting note.");case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return Q.apply(this,arguments)}),tS=(W=(0,a.Z)(l().mark(function e(t){var s;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.post("https://api.gajkesaristeels.in/visit/create",_(_({},t),{},{employeeId:e3,storeId:parseInt($)}),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:s=e.sent,er([].concat((0,n.Z)(en),[s.data])),ez(!1),e1.resetFields(),w.ZP.success("Visit created successfully!"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error creating visit:",e.t0),w.ZP.error("Error creating visit.");case 14:case"end":return e.stop()}},e,null,[[0,10]])})),function(e){return W.apply(this,arguments)}),tZ=function(e,t){ts(function(s){return _(_({},s),{},(0,r.Z)({},e,t))})},tP=function(e){var t,s=[];switch(e){case"visits":t=en.length;break;case"notes":t=ee.length;break;case"complaints":t=eo.length;break;case"requirements":t=ei.length;break;default:t=0}for(var n=Math.ceil(t/3),r=function(t){1===t||t===n||t>=tt[e]-1&&t<=tt[e]+1?s.push((0,F.jsx)(L.nt,{children:(0,F.jsx)(L.kN,{isActive:tt[e]===t,onClick:function(){return tZ(e,t)},children:t})},t)):(t===tt[e]-2&&t>2||t===tt[e]+2&&t<n-1)&&s.push((0,F.jsx)(L.nt,{children:(0,F.jsx)(L.Dj,{})},t))},a=1;a<=n;a++)r(a);return s},tD=(R=(0,a.Z)(l().mark(function e(){var t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/task/getByStoreAndDate?storeId=".concat($,"&start=").concat((0,A.WU)(e$,"yyyy-MM-dd"),"&end=").concat((0,A.WU)(eH,"yyyy-MM-dd")),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:ec((t=e.sent).data.filter(function(e){return"requirement"===e.taskType})),ed(t.data.filter(function(e){return"complaint"===e.taskType})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching updated tasks:",e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(){return R.apply(this,arguments)}),tO=function(e){return e?e.split(" ").map(function(e){return e[0]}).join(""):""},tI=function(e){return e.visit_date?{emoji:"âœ…",status:"Complete",color:"bg-purple-100 text-purple-800"}:{emoji:"\uD83D\uDCC5",status:"Assigned",color:"bg-blue-100 text-blue-800"}},tT=function(e,t){var s=(t-1)*3;return e.slice(s,s+3)},tA=(G=(0,a.Z)(l().mark(function e(t,s){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.put("https://api.gajkesaristeels.in/task/updateTask?taskId=".concat(t),{status:s,priority:"Medium"},{headers:{Authorization:"Bearer ".concat(e2)}});case 3:w.ZP.success("Status updated successfully!"),tD(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error updating status:",e.t0),w.ZP.error("Error updating status.");case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t){return G.apply(this,arguments)}),tE=function(e){return(0,F.jsxs)(C.Z,{onClick:function(t){return tA(e,t.key)},children:[(0,F.jsx)(C.Z.Item,{children:"Assigned"},"Assigned"),(0,F.jsx)(C.Z.Item,{children:"On Going"},"On Going"),(0,F.jsx)(C.Z.Item,{children:"Complete"},"Complete")]})},tL={dates:tc.map(function(e){return e.changeDate}),intentLevels:tc.map(function(e){return e.newIntentLevel})};tL.dates,tL.intentLevels;var tq={dates:td.map(function(e){return e.visitDate}),salesAmounts:td.map(function(e){return e.newMonthlySale})};return tq.dates,tq.salesAmounts,(0,o.useEffect)(function(){e2&&$&&(tx($),tj($),tf($),tv($,e$,eH),tg($,e$,eH),ty(),tN(),th($),tp($))},[e2,$,e$,eH,tx,tj,tf,tv,tg,ty,tN,th,tp]),(0,F.jsxs)("div",{className:"container main-content",children:[(0,F.jsxs)(h(),{children:[(0,F.jsx)("title",{children:"Customer Detail Page"}),(0,F.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"})]}),(0,F.jsx)(m(),{src:"https://cdn.jsdelivr.net/npm/chart.js",strategy:"afterInteractive"}),(0,F.jsxs)("div",{className:"contact-details",children:[(0,F.jsxs)("aside",{className:"left-panel",children:[(0,F.jsxs)("div",{className:"back-button",onClick:function(){J.push("/CustomerListPage")},children:[(0,F.jsx)("i",{className:"fas fa-arrow-left"})," Back to customers"]}),(0,F.jsxs)("div",{className:"profile",children:[(0,F.jsx)("div",{className:"avatar",children:(0,F.jsx)("span",{children:X?tO("".concat(X.clientFirstName," ").concat(X.clientLastName)):"JB"})}),(0,F.jsx)("h2",{children:X?"".concat(X.clientFirstName," ").concat(X.clientLastName):"Jerome Bell"}),(0,F.jsx)("p",{className:"company",children:X?X.storeName:"Google"})]}),(0,F.jsxs)("div",{className:"action-buttons",children:[(0,F.jsxs)(S.ZP,{className:"action-button",onClick:function(){return eb(!0)},children:[(0,F.jsx)("i",{className:"fas fa-edit"})," Edit Customer"]}),(0,F.jsxs)(S.ZP,{className:"action-button",onClick:function(){return eG(!0)},children:[(0,F.jsx)("i",{className:"fas fa-envelope"})," Log Complaint"]}),(0,F.jsxs)(S.ZP,{className:"action-button",onClick:function(){return eQ(!0)},children:[(0,F.jsx)("i",{className:"fas fa-phone"})," Add Requirement"]})]}),(0,F.jsxs)("div",{className:"info-tabs",children:[(0,F.jsx)("div",{className:"info-tab ".concat("leads-info"===eg?"active":""),onClick:function(){return ey("leads-info")},children:"Leads info"}),(0,F.jsx)("div",{className:"info-tab ".concat("address-info"===eg?"active":""),onClick:function(){return ey("address-info")},children:"Address info"})]}),(0,F.jsx)("div",{className:"info-content ".concat("leads-info"===eg?"active":""),children:X&&(0,F.jsxs)("div",{className:"info-content-inner",children:[(0,F.jsxs)("p",{children:[(0,F.jsx)("i",{className:"fas fa-user",style:{color:"purple"}})," ",(0,F.jsx)("strong",{children:"Customer Name"}),(0,F.jsx)("br",{}),X.clientFirstName," ",X.clientLastName]}),(0,F.jsxs)("p",{children:[(0,F.jsx)("i",{className:"fas fa-envelope",style:{color:"purple"}})," ",(0,F.jsx)("strong",{children:"Email"}),(0,F.jsx)("br",{}),X.email||"N/A"]}),(0,F.jsxs)("p",{children:[(0,F.jsx)("i",{className:"fas fa-phone",style:{color:"purple"}})," ",(0,F.jsx)("strong",{children:"Phone"}),(0,F.jsx)("br",{}),X.primaryContact]}),(0,F.jsxs)("p",{children:[(0,F.jsx)("i",{className:"fas fa-store",style:{color:"purple"}})," ",(0,F.jsx)("strong",{children:"Store Name"}),(0,F.jsx)("br",{}),X.storeName]}),(0,F.jsxs)("p",{children:[(0,F.jsx)("i",{className:"fas fa-user-tag",style:{color:"purple"}})," ",(0,F.jsx)("strong",{children:"Client Type"}),(0,F.jsx)("br",{}),X.clientType||"N/A"]})]})}),(0,F.jsx)("div",{className:"info-content ".concat("address-info"===eg?"active":""),children:X&&(0,F.jsxs)("div",{className:"info-content-inner",children:[(0,F.jsxs)("p",{children:[(0,F.jsx)("i",{className:"fas fa-map-marker-alt",style:{color:"purple"}})," ",(0,F.jsx)("strong",{children:"Address"}),(0,F.jsx)("br",{}),X.addressLine1||"N/A",", ",X.addressLine2||"",", ",X.city,", ",X.state,", ",X.country||"N/A",", ",X.pincode||"N/A"]}),(0,F.jsxs)("p",{children:[(0,F.jsx)("i",{className:"fas fa-city",style:{color:"purple"}})," ",(0,F.jsx)("strong",{children:"City"}),(0,F.jsx)("br",{}),X.city]}),(0,F.jsxs)("p",{children:[(0,F.jsx)("i",{className:"fas fa-flag",style:{color:"purple"}})," ",(0,F.jsx)("strong",{children:"State"}),(0,F.jsx)("br",{}),X.state]})]})})]}),(0,F.jsxs)("section",{className:"activity-details",children:[(0,F.jsxs)("div",{className:"tabs",children:[(0,F.jsxs)("button",{className:"tab ".concat("visits"===eP?"active":""),onClick:function(){return eD("visits")},children:[(0,F.jsx)("i",{className:"fas fa-calendar-check"})," Visits"]}),(0,F.jsxs)("button",{className:"tab ".concat("notes"===eP?"active":""),onClick:function(){return eD("notes")},children:[(0,F.jsx)("i",{className:"fas fa-sticky-note"})," Notes"]}),(0,F.jsxs)("button",{className:"tab ".concat("complaints"===eP?"active":""),onClick:function(){return eD("complaints")},children:[(0,F.jsx)("i",{className:"fas fa-exclamation-circle"})," Complaints"]}),(0,F.jsxs)("button",{className:"tab ".concat("requirements"===eP?"active":""),onClick:function(){return eD("requirements")},children:[(0,F.jsx)("i",{className:"fas fa-tasks"})," Requirements"]}),e4&&(0,F.jsxs)("button",{className:"tab ".concat("sites"===eP?"active":""),onClick:function(){return eD("sites")},children:[(0,F.jsx)("i",{className:"fas fa-map-marker-alt"})," Sites"]})]}),e4&&e2&&(0,F.jsx)("div",{className:"tab-content ".concat("sites"===eP?"active":""),children:(0,F.jsx)(j.default,{storeId:"string"==typeof $?$:Array.isArray($)?$[0]:"",token:e2||""})}),(0,F.jsxs)("div",{className:"tab-content ".concat("visits"===eP?"active":""),children:[(0,F.jsx)("div",{className:"filter-bar",children:(0,F.jsxs)(k.Z,{placeholder:"Status Filter",onChange:function(e){"All Statuses"===e?ta(en):ta(en.filter(function(t){return tI(t).status===e}))},style:{width:200},children:[(0,F.jsx)(z,{value:"All Statuses",children:"All Statuses"}),(0,F.jsx)(z,{value:"Assigned",children:"Assigned"}),(0,F.jsx)(z,{value:"On Going",children:"On Going"}),(0,F.jsx)(z,{value:"Complete",children:"Complete"})]})}),tT(tr,tt.visits).map(function(e,t){var s=tI(e),n=s.emoji,r=s.status,a=s.color;return(0,F.jsxs)("div",{className:"card task-item",children:[(0,F.jsxs)("div",{className:"task-header",children:[(0,F.jsx)("i",{className:"fas fa-calendar-alt"}),(0,F.jsxs)("span",{children:["Visit scheduled by ",e.employeeName]}),(0,F.jsxs)("span",{className:"due-date",children:["Date: ",new Date(e.visit_date).toLocaleDateString()]})]}),(0,F.jsx)("p",{className:"visit-purpose",children:e.purpose}),(0,F.jsxs)("div",{className:"task-footer",children:[(0,F.jsxs)("div",{className:"task-detail",children:[(0,F.jsx)("span",{children:"Status"}),(0,F.jsxs)("span",{className:"status-tag ".concat(a),children:[n," ",r]})]}),(0,F.jsxs)("div",{className:"task-detail",children:[(0,F.jsx)("span",{children:"Purpose"}),(0,F.jsx)("span",{style:{color:"purple"},children:e.purpose})]}),(0,F.jsxs)("div",{className:"assigned-user",children:[(0,F.jsx)("div",{className:"avatar small",children:tO(e.employeeName)}),(0,F.jsx)("span",{children:e.employeeName})]})]})]},t)}),e6.visits&&en.length>3&&(0,F.jsxs)(L.tl,{children:[(0,F.jsx)(L.dN,{onClick:1===tt.visits?void 0:function(){return ts(function(e){return _(_({},e),{},{visits:Math.max(e.visits-1,1)})})}}),(0,F.jsx)(L.ng,{children:tP("visits")}),(0,F.jsx)(L.$0,{onClick:tt.visits===Math.ceil(en.length/3)?void 0:function(){return ts(function(e){return _(_({},e),{},{visits:Math.min(e.visits+1,Math.ceil(en.length/3))})})}})]}),en.length>3&&(0,F.jsx)(S.ZP,{onClick:function(){return e5(function(e){return _(_({},e),{},{visits:!e.visits})})},children:e6.visits?"Show Less":"Show More"})]}),(0,F.jsxs)("div",{className:"tab-content ".concat("notes"===eP?"active":""),children:[(0,F.jsx)("div",{className:"filter-bar",children:(0,F.jsxs)(S.ZP,{className:"add-note-btn",onClick:function(){eB(!1),eS(""),eL(!0)},children:[(0,F.jsx)("i",{className:"fas fa-plus"})," Add Note"]})}),tT(ee,tt.notes).map(function(e){return(0,F.jsxs)("div",{className:"note-item",children:[(0,F.jsxs)("div",{className:"note-header",children:[(0,F.jsx)("span",{className:"note-date",children:new Date(e.createdDate).toLocaleDateString()}),(0,F.jsxs)("div",{className:"note-actions",children:[(0,F.jsx)("a",{href:"#",onClick:function(){return tb(e)},children:"Edit"}),(0,F.jsx)("a",{href:"#",className:"note-delete",onClick:function(){return tC(e.id)},children:"Delete"})]})]}),(0,F.jsx)("div",{className:"note-content",children:e.content})]},e.id)}),e6.notes&&ee.length>3&&(0,F.jsxs)(L.tl,{children:[(0,F.jsx)(L.dN,{onClick:1===tt.notes?void 0:function(){return ts(function(e){return _(_({},e),{},{notes:Math.max(e.notes-1,1)})})}}),(0,F.jsx)(L.ng,{children:tP("notes")}),(0,F.jsx)(L.$0,{onClick:tt.notes===Math.ceil(ee.length/3)?void 0:function(){return ts(function(e){return _(_({},e),{},{notes:Math.min(e.notes+1,Math.ceil(ee.length/3))})})}})]}),ee.length>3&&(0,F.jsx)(S.ZP,{onClick:function(){return e5(function(e){return _(_({},e),{},{notes:!e.notes})})},children:e6.notes?"Show Less":"Show More"})]}),(0,F.jsxs)("div",{className:"tab-content ".concat("complaints"===eP?"active":""),children:[(0,F.jsxs)("div",{className:"filter-bar",style:{display:"flex",gap:"10px"},children:[(0,F.jsxs)(O.J2,{children:[(0,F.jsx)(O.xo,{asChild:!0,children:(0,F.jsxs)(S.ZP,{style:{borderColor:"black",borderWidth:"1px"},className:"border w-[280px] justify-start text-left font-normal ".concat(!e$&&"text-muted-foreground"),children:[(0,F.jsx)(I.Z,{className:"mr-2 h-4 w-4"}),e$?(0,A.WU)(new Date(e$),"PPP"):(0,F.jsx)("span",{children:"Start Date"})]})}),(0,F.jsx)(O.yk,{className:"w-auto p-0",children:(0,F.jsx)(E.f,{mode:"single",selected:e$,onSelect:function(e){eK(e||new Date),eY((0,T.E)(e||new Date,5))},initialFocus:!0})})]}),(0,F.jsxs)(O.J2,{children:[(0,F.jsx)(O.xo,{asChild:!0,children:(0,F.jsxs)(S.ZP,{style:{borderColor:"black",borderWidth:"1px"},className:"border w-[280px] justify-start text-left font-normal ".concat(!eH&&"text-muted-foreground"),children:[(0,F.jsx)(I.Z,{className:"mr-2 h-4 w-4"}),eH?(0,A.WU)(new Date(eH),"PPP"):(0,F.jsx)("span",{children:"End Date"})]})}),(0,F.jsx)(O.yk,{className:"w-auto p-0",children:(0,F.jsx)(E.f,{mode:"single",selected:eH,onSelect:function(e){return eY(e||new Date)},initialFocus:!0})})]})]}),tT(eo,tt.complaints).map(function(e){return(0,F.jsxs)("div",{className:"card task-item",children:[(0,F.jsxs)("div",{className:"task-header",children:[(0,F.jsx)("i",{className:"fas fa-exclamation-circle"}),(0,F.jsx)("span",{children:e.taskTitle}),(0,F.jsxs)("span",{className:"due-date",children:["Due: ",new Date(e.dueDate).toLocaleDateString()]})]}),(0,F.jsx)("p",{className:"task-desc",children:e.taskDescription}),(0,F.jsxs)("div",{className:"task-footer",children:[(0,F.jsxs)("div",{className:"task-detail",children:[(0,F.jsx)("span",{children:"Status"}),(0,F.jsx)(Z.Z,{overlay:tE(e.id),children:(0,F.jsx)(S.ZP,{className:"status-button ".concat(e.status.replace(/ /g,"-").toLowerCase()),children:e.status||"Assigned"})})]}),(0,F.jsxs)("div",{className:"task-detail",children:[(0,F.jsx)("span",{children:"Priority"}),(0,F.jsx)("span",{style:{color:"purple"},children:e.priority})]}),(0,F.jsxs)("div",{className:"assigned-user",children:[(0,F.jsx)("div",{className:"avatar small",children:tO(e.assignedToName)}),(0,F.jsx)("span",{children:e.assignedToName})]})]})]},e.id)}),e6.complaints&&eo.length>3&&(0,F.jsxs)(L.tl,{children:[(0,F.jsx)(L.dN,{onClick:1===tt.complaints?void 0:function(){return ts(function(e){return _(_({},e),{},{complaints:Math.max(e.complaints-1,1)})})}}),(0,F.jsx)(L.ng,{children:tP("complaints")}),(0,F.jsx)(L.$0,{onClick:tt.complaints===Math.ceil(eo.length/3)?void 0:function(){return ts(function(e){return _(_({},e),{},{complaints:Math.min(e.complaints+1,Math.ceil(eo.length/3))})})}})]}),eo.length>3&&(0,F.jsx)(S.ZP,{onClick:function(){return e5(function(e){return _(_({},e),{},{complaints:!e.complaints})})},children:e6.complaints?"Show Less":"Show More"})]}),(0,F.jsxs)("div",{className:"tab-content ".concat("requirements"===eP?"active":""),children:[(0,F.jsxs)("div",{className:"filter-bar",style:{display:"flex",gap:"10px"},children:[(0,F.jsxs)(O.J2,{children:[(0,F.jsx)(O.xo,{asChild:!0,children:(0,F.jsxs)(S.ZP,{style:{borderColor:"black",borderWidth:"1px",borderStyle:"solid"},className:"w-[280px] justify-start text-left font-normal ".concat(!e$&&"text-muted-foreground"),children:[(0,F.jsx)(I.Z,{className:"mr-2 h-4 w-4"}),e$?(0,A.WU)(new Date(e$),"PPP"):(0,F.jsx)("span",{children:"Start Date"})]})}),(0,F.jsx)(O.yk,{className:"w-auto p-0",children:(0,F.jsx)(E.f,{mode:"single",selected:e$,onSelect:function(e){eK(e||new Date),eY((0,T.E)(e||new Date,5))},initialFocus:!0})})]}),(0,F.jsxs)(O.J2,{children:[(0,F.jsx)(O.xo,{asChild:!0,children:(0,F.jsxs)(S.ZP,{style:{borderColor:"black",borderWidth:"1px",borderStyle:"solid"},className:"w-[280px] justify-start text-left font-normal ".concat(!eH&&"text-muted-foreground"),children:[(0,F.jsx)(I.Z,{className:"mr-2 h-4 w-4"}),eH?(0,A.WU)(new Date(eH),"PPP"):(0,F.jsx)("span",{children:"End Date"})]})}),(0,F.jsx)(O.yk,{className:"w-auto p-0",children:(0,F.jsx)(E.f,{mode:"single",selected:eH,onSelect:function(e){return eY(e||new Date)},initialFocus:!0})})]})]}),tT(ei,tt.requirements).map(function(e){return(0,F.jsxs)("div",{className:"card task-item",children:[(0,F.jsxs)("div",{className:"task-header",children:[(0,F.jsx)("i",{className:"fas fa-tasks"}),(0,F.jsx)("span",{children:e.taskTitle}),(0,F.jsxs)("span",{className:"due-date",children:["Due: ",new Date(e.dueDate).toLocaleDateString()]})]}),(0,F.jsx)("p",{className:"task-desc",children:e.taskDescription}),(0,F.jsxs)("div",{className:"task-footer",children:[(0,F.jsxs)("div",{className:"task-detail",children:[(0,F.jsx)("span",{children:"Status"}),(0,F.jsx)(Z.Z,{overlay:tE(e.id),children:(0,F.jsx)(S.ZP,{className:"status-button ".concat(e.status.replace(/ /g,"-").toLowerCase()),children:e.status||"Assigned"})})]}),(0,F.jsxs)("div",{className:"task-detail",children:[(0,F.jsx)("span",{children:"Priority"}),(0,F.jsx)("span",{style:{color:"purple"},children:e.priority})]}),(0,F.jsxs)("div",{className:"assigned-user",children:[(0,F.jsx)("div",{className:"avatar small",children:tO(e.assignedToName)}),(0,F.jsx)("span",{children:e.assignedToName})]})]})]},e.id)}),e6.requirements&&ei.length>3&&(0,F.jsxs)(L.tl,{children:[(0,F.jsx)(L.dN,{onClick:1===tt.requirements?void 0:function(){return ts(function(e){return _(_({},e),{},{requirements:Math.max(e.requirements-1,1)})})}}),(0,F.jsx)(L.ng,{children:tP("requirements")}),(0,F.jsx)(L.$0,{onClick:tt.requirements===Math.ceil(ei.length/3)?void 0:function(){return ts(function(e){return _(_({},e),{},{requirements:Math.min(e.requirements+1,Math.ceil(ei.length/3))})})}})]}),ei.length>3&&(0,F.jsx)(S.ZP,{onClick:function(){return e5(function(e){return _(_({},e),{},{requirements:!e.requirements})})},children:e6.requirements?"Show Less":"Show More"})]})]}),(0,F.jsx)("aside",{className:"charts"})]}),(0,F.jsx)(P.Z,{title:eF?"Edit Note":"Add Note",visible:eE,onOk:eF?tw:tk,onCancel:function(){return eL(!1)},okText:eF?"Update":"Add",children:(0,F.jsx)(M,{placeholder:"Enter note content",value:eC,onChange:function(e){return eS(e.target.value)},rows:4})}),(0,F.jsx)(P.Z,{title:"Create Visit",visible:eM,onCancel:function(){return ez(!1)},footer:null,children:(0,F.jsxs)(b.Z,{form:e1,onFinish:tS,layout:"vertical",children:[(0,F.jsx)(b.Z.Item,{name:"purpose",label:"Purpose",rules:[{required:!0,message:"Please enter the purpose of the visit"}],children:(0,F.jsx)(N.Z,{})}),(0,F.jsx)(b.Z.Item,{name:"visit_date",label:"Visit Date",rules:[{required:!0,message:"Please select the visit date"}],children:(0,F.jsx)(D.Z,{})}),(0,F.jsx)(b.Z.Item,{name:"employeeId",label:"Assigned Employee",rules:[{required:!0,message:"Please select an employee"}],children:(0,F.jsx)(k.Z,{placeholder:"Select an employee",children:eh.map(function(e){return(0,F.jsx)(z,{value:e.id,children:e.name},e.id)})})}),(0,F.jsx)(b.Z.Item,{children:(0,F.jsx)(S.ZP,{type:"primary",htmlType:"submit",children:"Create Visit"})})]})}),(0,F.jsx)(g.default,{isOpen:eU,onClose:function(){return eQ(!1)},employees:eh,stores:ex,storeId:parseInt($),createTask:tD}),(0,F.jsx)(v.default,{isOpen:ek,onClose:function(){return eb(!1)},customerData:X,onSubmit:tm}),(0,F.jsx)(y.default,{isOpen:eR,onClose:function(){return eG(!1)},employees:eh,stores:ex,storeId:parseInt($),createTask:tD})]})}},36194:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/CustomerDetailPage/[storeId]",function(){return s(20539)}])},16522:function(){},4298:function(e,t,s){e.exports=s(5645)}},function(e){e.O(0,[2196,9545,6066,3800,5059,3192,3089,5096,4376,5411,6075,975,1996,7320,2888,9774,179],function(){return e(e.s=36194)}),_N_E=e.O()}]);