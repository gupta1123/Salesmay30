(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4269],{92765:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var n=r(16835),a=r(27812),s=r(59499),c=r(4730),i=r(67294),o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},u=["color","size","strokeWidth","absoluteStrokeWidth","className","children"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var p=function(e,t){var r=(0,i.forwardRef)(function(r,s){var l=r.color,p=r.size,f=void 0===p?24:p,h=r.strokeWidth,v=void 0===h?2:h,j=r.absoluteStrokeWidth,y=r.className,m=r.children,g=(0,c.Z)(r,u);return(0,i.createElement)("svg",d(d({ref:s},o),{},{width:f,height:f,stroke:void 0===l?"currentColor":l,strokeWidth:j?24*Number(v)/Number(f):v,className:["lucide","lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),void 0===y?"":y].join(" ")},g),[].concat((0,a.Z)(t.map(function(e){var t=(0,n.Z)(e,2),r=t[0],a=t[1];return(0,i.createElement)(r,a)})),(0,a.Z)(Array.isArray(m)?m:[m])))});return r.displayName="".concat(e),r}},23857:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var n=(0,r(92765).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},96191:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var n=(0,r(92765).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},28701:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(59499),a=r(50029),s=r(64687),c=r.n(s),i=r(67294),o=r(23857),u=r(96191),l=r(87066);r(14792);var d=r(85893);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function h(e){var t,r,s=e.authToken,p=(0,i.useState)([]),h=p[0],v=p[1],j=(0,i.useState)(!0),y=j[0],m=j[1],g=(0,i.useState)(null),b=g[0],x=g[1],O=(0,i.useState)({}),k=O[0],N=O[1];(0,i.useEffect)(function(){w()},[s]);var w=(t=(0,a.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.get("https://api.gajkesaristeels.in/request/getByStatus?status=pending",{headers:{Authorization:"Bearer ".concat(s)}});case 3:v(e.sent.data),m(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),x("Failed to fetch pending requests. Please try again later."),m(!1);case 12:case"end":return e.stop()}},e,null,[[0,8]])})),function(){return t.apply(this,arguments)}),q=(r=(0,a.Z)(c().mark(function e(t,r){var a,i;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=k[t]||(null===(a=h.find(function(e){return e.id===t}))||void 0===a?void 0:a.requestedStatus)||"full day",e.prev=1,e.next=4,l.Z.put("https://api.gajkesaristeels.in/request/updateStatus?id=".concat(t,"&status=").concat(r,"&attendance=").concat(encodeURIComponent(i)),null,{headers:{Authorization:"Bearer ".concat(s),requestId:t.toString()}});case 4:return e.next=6,w();case 6:N(function(e){return f(f({},e),{},(0,n.Z)({},t,null))}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),x("Failed to update request status. Please try again.");case 12:case"end":return e.stop()}},e,null,[[1,9]])})),function(e,t){return r.apply(this,arguments)}),P=function(e,t){N(function(r){return f(f({},r),{},(0,n.Z)({},e,t))})};return y?(0,d.jsx)("div",{className:"loadingMessage",children:"Loading pending requests..."}):b?(0,d.jsx)("div",{className:"errorMessage",children:b}):(0,d.jsxs)("div",{className:"approvalContainer",children:[(0,d.jsx)("h2",{className:"approvalTitle",children:"Approval Requests"}),0===h.length?(0,d.jsx)("div",{className:"noRequests",children:"No pending requests at the moment."}):h.map(function(e){return(0,d.jsxs)("div",{className:"approvalCard",children:[(0,d.jsxs)("div",{className:"approvalCardHeader",children:[(0,d.jsx)("span",{className:"employeeName",children:e.employeeName}),(0,d.jsx)("span",{className:"statusBadge status".concat(e.status),children:e.status})]}),(0,d.jsxs)("div",{className:"approvalCardContent",children:[(0,d.jsxs)("div",{className:"requestDetails",children:[(0,d.jsxs)("p",{className:"requestDetail",children:["Requested Date: ",e.requestDate]}),(0,d.jsxs)("p",{className:"requestDetail",children:["Log Date: ",e.logDate]}),(0,d.jsxs)("p",{className:"requestDetail",children:["Requested Type: ",e.requestedStatus]})]}),"pending"===e.status&&(0,d.jsxs)("div",{className:"approvalActions",children:[(0,d.jsxs)("div",{className:"approvalTypeSelection",children:[(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"radio",name:"approvalType_".concat(e.id),value:"full day",checked:"full day"===k[e.id],onChange:function(){return P(e.id,"full day")}})," Full Day"]}),(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"radio",name:"approvalType_".concat(e.id),value:"half day",checked:"half day"===k[e.id],onChange:function(){return P(e.id,"half day")}})," Half Day"]})]}),(0,d.jsxs)("div",{className:"approvalButtons",children:[(0,d.jsxs)("button",{className:"approveButton",onClick:function(){return q(e.id,"approved")},children:[(0,d.jsx)(o.Z,{size:16}),(0,d.jsx)("span",{children:"Approve"})]}),(0,d.jsxs)("button",{className:"rejectButton",onClick:function(){return q(e.id,"rejected")},children:[(0,d.jsx)(u.Z,{size:16}),(0,d.jsx)("span",{children:"Reject"})]})]})]})]})]},e.id)})]})}},89430:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Approval",function(){return r(28701)}])},14792:function(){}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=89430)}),_N_E=e.O()}]);