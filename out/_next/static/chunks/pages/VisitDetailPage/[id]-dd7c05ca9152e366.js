(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5062],{56853:function(e,t,a){"use strict";a.d(t,{f:function(){return f}});var s=a(77191),n=a(36864),r=a(59499),i=a(4730);a(67294);var c=a(62469),l=a(65905),o=a(20439),d=a(29222),u=a(85893),m=["className","classNames","showOutsideDays"];function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach(function(t){(0,r.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function f(e){var t=e.className,a=e.classNames,r=e.showOutsideDays,h=(0,i.Z)(e,m);return(0,u.jsx)(l._W,p({showOutsideDays:void 0===r||r,className:(0,o.cn)("p-3",t),classNames:p({months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,o.cn)((0,d.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,o.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===h.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,o.cn)((0,d.d)({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible"},a),components:{IconLeft:function(e){return(0,n.Z)({},((0,s.Z)(e),e)),(0,u.jsx)(c.wyc,{className:"h-4 w-4"})},IconRight:function(e){return(0,n.Z)({},((0,s.Z)(e),e)),(0,u.jsx)(c.XCv,{className:"h-4 w-4"})}}},h))}f.displayName="Calendar"},41079:function(e,t,a){"use strict";a.d(t,{$0:function(){return w},Dj:function(){return O},dN:function(){return k},kN:function(){return b},ng:function(){return N},nt:function(){return y},tl:function(){return g}});var s=a(59499),n=a(4730),r=a(67294),i=a(62469),c=a(20439),l=a(29222),o=a(85893),d=["className"],u=["className"],m=["className"],h=["className","isActive","size"],p=["className"],f=["className"],x=["className"];function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach(function(t){(0,s.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var g=function(e){var t=e.className,a=(0,n.Z)(e,d);return(0,o.jsx)("nav",j({role:"navigation","aria-label":"pagination",className:(0,c.cn)("mx-auto flex w-full justify-center",t)},a))};g.displayName="Pagination";var N=r.forwardRef(function(e,t){var a=e.className,s=(0,n.Z)(e,u);return(0,o.jsx)("ul",j({ref:t,className:(0,c.cn)("flex flex-row items-center gap-1",a)},s))});N.displayName="PaginationContent";var y=r.forwardRef(function(e,t){var a=e.className,s=(0,n.Z)(e,m);return(0,o.jsx)("li",j({ref:t,className:(0,c.cn)("",a)},s))});y.displayName="PaginationItem";var b=function(e){var t=e.className,a=e.isActive,s=e.size,r=(0,n.Z)(e,h);return(0,o.jsx)("a",j({"aria-current":a?"page":void 0,className:(0,c.cn)((0,l.d)({variant:a?"outline":"ghost",size:void 0===s?"icon":s}),t)},r))};b.displayName="PaginationLink";var k=function(e){var t=e.className,a=(0,n.Z)(e,p);return(0,o.jsxs)(b,j(j({"aria-label":"Go to previous page",size:"default",className:(0,c.cn)("gap-1 pl-2.5",t)},a),{},{children:[(0,o.jsx)(i.wyc,{className:"h-4 w-4"}),(0,o.jsx)("span",{children:"Previous"})]}))};k.displayName="PaginationPrevious";var w=function(e){var t=e.className,a=(0,n.Z)(e,f);return(0,o.jsxs)(b,j(j({"aria-label":"Go to next page",size:"default",className:(0,c.cn)("gap-1 pr-2.5",t)},a),{},{children:[(0,o.jsx)("span",{children:"Next"}),(0,o.jsx)(i.XCv,{className:"h-4 w-4"})]}))};w.displayName="PaginationNext";var O=function(e){var t=e.className,a=(0,n.Z)(e,x);return(0,o.jsxs)("span",j(j({"aria-hidden":!0,className:(0,c.cn)("flex h-9 w-9 items-center justify-center",t)},a),{},{children:[(0,o.jsx)(i.nWS,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"sr-only",children:"More pages"})]}))};O.displayName="PaginationEllipsis"},20072:function(e,t,a){"use strict";a.d(t,{J2:function(){return u},xo:function(){return m},yk:function(){return h}});var s=a(59499),n=a(4730),r=a(67294),i=a(86419),c=a(20439),l=a(85893),o=["className","align","sideOffset"];function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}var u=i.fC,m=i.xz;i.ee;var h=r.forwardRef(function(e,t){var a=e.className,r=e.align,u=e.sideOffset,m=(0,n.Z)(e,o);return(0,l.jsx)(i.h_,{children:(0,l.jsx)(i.VY,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach(function(t){(0,s.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({ref:t,align:void 0===r?"center":r,sideOffset:void 0===u?4:u,className:(0,c.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a)},m))})});h.displayName=i.VY.displayName},89899:function(e,t,a){"use strict";a.d(t,{Bw:function(){return w},Ph:function(){return g},Ql:function(){return O},i4:function(){return y},ki:function(){return N}});var s=a(59499),n=a(4730),r=a(67294),i=a(62469),c=a(95059),l=a(20439),o=a(85893),d=["className","children"],u=["className"],m=["className"],h=["className","children","position"],p=["className"],f=["className","children"],x=["className"];function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach(function(t){(0,s.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var g=c.fC;c.ZA;var N=c.B4,y=r.forwardRef(function(e,t){var a=e.className,s=e.children,r=(0,n.Z)(e,d);return(0,o.jsxs)(c.xz,j(j({ref:t,className:(0,l.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a)},r),{},{children:[s,(0,o.jsx)(c.JO,{asChild:!0,children:(0,o.jsx)(i.jnn,{className:"h-4 w-4 opacity-50"})})]}))});y.displayName=c.xz.displayName;var b=r.forwardRef(function(e,t){var a=e.className,s=(0,n.Z)(e,u);return(0,o.jsx)(c.u_,j(j({ref:t,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",a)},s),{},{children:(0,o.jsx)(i.g8U,{})}))});b.displayName=c.u_.displayName;var k=r.forwardRef(function(e,t){var a=e.className,s=(0,n.Z)(e,m);return(0,o.jsx)(c.$G,j(j({ref:t,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",a)},s),{},{children:(0,o.jsx)(i.v4q,{})}))});k.displayName=c.$G.displayName;var w=r.forwardRef(function(e,t){var a=e.className,s=e.children,r=e.position,i=void 0===r?"popper":r,d=(0,n.Z)(e,h);return(0,o.jsx)(c.h_,{children:(0,o.jsxs)(c.VY,j(j({ref:t,className:(0,l.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i},d),{},{children:[(0,o.jsx)(b,{}),(0,o.jsx)(c.l_,{className:(0,l.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,o.jsx)(k,{})]}))})});w.displayName=c.VY.displayName,r.forwardRef(function(e,t){var a=e.className,s=(0,n.Z)(e,p);return(0,o.jsx)(c.__,j({ref:t,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",a)},s))}).displayName=c.__.displayName;var O=r.forwardRef(function(e,t){var a=e.className,s=e.children,r=(0,n.Z)(e,f);return(0,o.jsxs)(c.ck,j(j({ref:t,className:(0,l.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a)},r),{},{children:[(0,o.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(c.wU,{children:(0,o.jsx)(i.nQG,{className:"h-4 w-4"})})}),(0,o.jsx)(c.eT,{children:s})]}))});O.displayName=c.ck.displayName,r.forwardRef(function(e,t){var a=e.className,s=(0,n.Z)(e,x);return(0,o.jsx)(c.Z0,j({ref:t,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",a)},s))}).displayName=c.Z0.displayName},85781:function(e,t,a){"use strict";a.d(t,{SP:function(){return x},dr:function(){return f},mQ:function(){return p},nU:function(){return v}});var s=a(59499),n=a(4730),r=a(67294),i=a(60434),c=a(20439),l=a(85893),o=["className"],d=["className"],u=["className"];function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach(function(t){(0,s.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var p=i.fC,f=r.forwardRef(function(e,t){var a=e.className,s=(0,n.Z)(e,o);return(0,l.jsx)(i.aV,h({ref:t,className:(0,c.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a)},s))});f.displayName=i.aV.displayName;var x=r.forwardRef(function(e,t){var a=e.className,s=(0,n.Z)(e,d);return(0,l.jsx)(i.xz,h({ref:t,className:(0,c.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a)},s))});x.displayName=i.xz.displayName;var v=r.forwardRef(function(e,t){var a=e.className,s=(0,n.Z)(e,u);return(0,l.jsx)(i.VY,h({ref:t,className:(0,c.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a)},s))});v.displayName=i.VY.displayName},8290:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return W}});var s=a(59499),n=a(27812),r=a(50029),i=a(64687),c=a.n(i),l=a(67294),o=a(11163),d=a(9008),u=a.n(d),m=a(87066),h=a(3328),p=a(79269),f=a(99474),x=a(33278),v=a(68014),j=a(19059),g=a(66103),N=a(87462),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},b=a(26492),k=l.forwardRef(function(e,t){return l.createElement(b.Z,(0,N.Z)({},e,{ref:t,icon:y}))}),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},O=l.forwardRef(function(e,t){return l.createElement(b.Z,(0,N.Z)({},e,{ref:t,icon:w}))}),D=a(45007),Z=a(20072),P=a(41664),C=a.n(P),T=a(83800),S=a(50571),I=a(25675),A=a.n(I),E=a(47321),_=a(85781),z=a(61711),B=a(89899),q=a(56853),V=a(35376),U=a(41079);a(33620);var R=a(44903),M=a(40870),L=a(85893);function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach(function(t){(0,s.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var W=function(){var e,t,a,s,i,d,N,y,b,w,P,I,F,W,$,H,Y=(0,o.useRouter)(),G=(0,l.useState)(null),J=G[0],X=G[1],K=(0,l.useState)("metrics"),ee=K[0],et=K[1],ea=(0,l.useState)("visit-info"),es=ea[0],en=ea[1],er=(0,l.useState)([]),ei=er[0],ec=er[1],el=(0,l.useState)([]),eo=el[0],ed=el[1],eu=(0,l.useState)([]),em=eu[0],eh=eu[1],ep=(0,l.useState)([]),ef=ep[0],ex=ep[1],ev=(0,D.v9)(function(e){return e.auth.token}),ej=(0,l.useState)([]),eg=ej[0],eN=ej[1],ey=(0,l.useState)([]),eb=ey[0],ek=ey[1],ew=(0,l.useState)("");ew[0],ew[1];var eO=(0,l.useState)("");eO[0],eO[1];var eD=(0,l.useState)(!0),eZ=(eD[0],eD[1]),eP=(0,l.useState)(null),eC=(eP[0],eP[1]),eT=(0,l.useState)(1),eS=eT[0],eI=eT[1],eA=(0,l.useState)(""),eE=eA[0],e_=eA[1],ez=(0,l.useState)(!1),eB=ez[0],eq=ez[1],eV=(0,l.useState)({});eV[0],eV[1];var eU=(0,l.useState)({});eU[0],eU[1];var eR=(0,l.useState)([]),eM=eR[0],eL=eR[1],eF=(0,l.useState)(!1),eQ=eF[0],eW=eF[1],e$=(0,l.useState)(!1),eH=e$[0],eY=e$[1],eG=(0,l.useState)(""),eJ=eG[0],eX=eG[1],eK=(0,l.useState)(null),e0=eK[0],e1=eK[1],e2=Y.query,e4=e2.id;e2.returnTo,e2.employeeId,e2.startDate,e2.endDate;var e3=(0,l.useState)(null),e9=e3[0],e8=e3[1],e7=(0,l.useState)("All");e7[0],e7[1];var e6=(0,l.useState)("All");e6[0],e6[1];var e5=(0,l.useState)("all"),te=e5[0],tt=e5[1],ta=(0,l.useState)([]),ts=ta[0],tn=ta[1],tr=(0,l.useState)([]),ti=tr[0],tc=tr[1],tl=(0,l.useState)(!1),to=tl[0],td=tl[1],tu=(0,l.useState)("general"),tm=tu[0],th=tu[1],tp=(0,l.useState)([]),tf=tp[0],tx=tp[1],tv=(0,l.useState)([]),tj=tv[0],tg=tv[1],tN=(0,l.useState)({id:0,taskTitle:"",taskDesciption:"",dueDate:"",assignedToId:0,assignedToName:"",assignedById:97,assignedByName:"",storeId:0,storeName:"",storeCity:"",visitId:Number(e4),visitDate:"",status:"Assigned",priority:"low",taskType:"requirement",attachment:[],attachmentResponse:[],createdAt:"",updatedAt:"",createdTime:"",updatedTime:""}),ty=tN[0],tb=tN[1],tk=(0,l.useState)(0);tk[0],tk[1];var tw=(0,l.useState)(null),tO=tw[0],tD=tw[1],tZ=3*eS,tP=ef.slice(tZ-3,tZ),tC=Math.ceil(ef.length/3),tT=function(e){eI(e)},tS=(e=(0,r.Z)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.gajkesaristeels.in/employee/getAll",{headers:{Authorization:"Bearer ".concat(ev)}});case 3:return t=e.sent,e.next=6,t.json();case 6:tx(e.sent),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching employees:",e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])})),function(){return e.apply(this,arguments)}),tI=(t=(0,r.Z)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.gajkesaristeels.in/store/names",{headers:{Authorization:"Bearer ".concat(ev)}});case 3:return t=e.sent,e.next=6,t.json();case 6:tg(e.sent),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching stores:",e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])})),function(){return t.apply(this,arguments)}),tA=function(e){tt(e)},tE=(0,l.useCallback)((a=(0,r.Z)(c().mark(function e(t){var a,s,n,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.gajkesaristeels.in/visit/getByStore?id=".concat(t),{headers:{Authorization:"Bearer ".concat(ev)}});case 3:return a=e.sent,e.next=6,a.json();case 6:ex((s=e.sent).sort(function(e,t){return new Date(t.checkinDate).getTime()-new Date(e.checkinDate).getTime()})),s.length>0&&tD({contactNumber:(null===(n=(r=s[0]).storePrimaryContact)||void 0===n?void 0:n.toString())||"Not available",city:r.city||"Not available",address:"".concat(r.subDistrict||"",", ").concat(r.district||"",", ").concat(r.state||"").replace(/^[, ]+|[, ]+$/g,"")||"Not available"}),eZ(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),eC("Failed to fetch visits."),eZ(!1);case 17:case"end":return e.stop()}},e,null,[[0,13]])})),function(e){return a.apply(this,arguments)}),[ev]),t_=(0,l.useCallback)((s=(0,r.Z)(c().mark(function e(t){var a;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.get("https://api.gajkesaristeels.in/visit/getById?id=".concat(t),{headers:{Authorization:"Bearer ".concat(ev)}});case 3:X(a=e.sent.data),ek(a.brandProCons),tq(a.checkinTime,a.checkoutTime),tV(t),tU(t),tR(t,"requirement",ed),tR(t,"complaint",eh),a.storeId&&tE(a.storeId),tz(t,a.attachmentResponse),tM(t),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.error("Error fetching visit detail:",e.t0);case 20:case"end":return e.stop()}},e,null,[[0,17]])})),function(e){return s.apply(this,arguments)}),[ev,tE]),tz=(i=(0,r.Z)(c().mark(function e(t,a){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(a.filter(function(e){return"check-in"===e.tag}).map(function(){var e=(0,r.Z)(c().mark(function e(a){var s;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Z.get("https://api.gajkesaristeels.in/visit/downloadFile/".concat(t,"/check-in/").concat(a.fileName),{headers:{Authorization:"Bearer ".concat(ev)},responseType:"blob"});case 2:return s=e.sent,e.abrupt("return",URL.createObjectURL(s.data));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 3:eL(e.sent),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching check-in images:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t){return i.apply(this,arguments)}),tB=(0,l.useCallback)(function(){var e=function(e){return"all"===te?e:e.filter(function(e){return e.priority===te})};tn(e(eo)),tc(e(em))},[te,eo,em]),tq=function(e,t){var a=new Date("1970-01-01T".concat(e,"Z")),s=new Date(new Date("1970-01-01T".concat(t,"Z")).getTime()-a.getTime()),r=s.getUTCHours(),i=s.getUTCMinutes(),c="0";(r>0||i>0)&&(c="".concat(r>0?"".concat(r," hour").concat(r>1?"s":""," "):"").concat(i>0?"".concat(i," minute").concat(i>1?"s":""):"").trim()),ec(function(e){var t=e.filter(function(e){return"Visit Duration"!==e.title});return[].concat((0,n.Z)(t),[{title:"Visit Duration",value:c}])})},tV=(d=(0,r.Z)(c().mark(function e(t){var a,s,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.get("https://api.gajkesaristeels.in/intent-audit/getByVisit?id=".concat(t),{headers:{Authorization:"Bearer ".concat(ev)}});case 3:r=(null===(a=(s=e.sent.data)[s.length-1])||void 0===a?void 0:a.newIntentLevel)||"N/A",ec(function(e){var t=e.filter(function(e){return"Intent Level"!==e.title});return[].concat((0,n.Z)(t),[{title:"Intent Level",value:r}])}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching intent level:",e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])})),function(e){return d.apply(this,arguments)}),tU=(N=(0,r.Z)(c().mark(function e(t){var a,s;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.get("https://api.gajkesaristeels.in/monthly-sale/getByVisit?visitId=".concat(t),{headers:{Authorization:"Bearer ".concat(ev)}});case 3:a=e.sent.data,s="".concat(a[0].newMonthlySale.toLocaleString()," tons"),ec(function(e){var t=e.filter(function(e){return"Monthly Sales"!==e.title});return[].concat((0,n.Z)(t),[{title:"Monthly Sales",value:s}])}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching monthly sales:",e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])})),function(e){return N.apply(this,arguments)}),tR=(y=(0,r.Z)(c().mark(function e(t,a,s){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.get("https://api.gajkesaristeels.in/task/getByVisit?type=".concat(a,"&visitId=").concat(t),{headers:{Authorization:"Bearer ".concat(ev)}});case 3:s(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching ".concat(a,"s:"),e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,a){return y.apply(this,arguments)}),tM=(b=(0,r.Z)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.get("https://api.gajkesaristeels.in/notes/getByVisit?id=".concat(t),{headers:{Authorization:"Bearer ".concat(ev)}});case 3:eN(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching notes:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return b.apply(this,arguments)}),tL=function(e){eX(e.content),eY(!0),e1(e.id),e8({employeeId:e.employeeId,storeId:e.storeId}),eW(!0)},tF=(w=(0,r.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(eJ.trim()){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,!(eH&&null!==e0)){e.next=12;break}if(!e9){e.next=10;break}return e.next=7,m.Z.put("https://api.gajkesaristeels.in/notes/edit?id=".concat(e0),{content:eJ,employeeId:e9.employeeId,storeId:e9.storeId},{headers:{Authorization:"Bearer ".concat(ev)}});case 7:eN(eg.map(function(e){return e.id===e0?Q(Q({},e),{},{content:eJ}):e})),h.ZP.success("Note updated successfully!");case 10:e.next=19;break;case 12:if(!J){e.next=19;break}return e.next=15,m.Z.post("https://api.gajkesaristeels.in/notes/create",{content:eJ,employeeId:J.employeeId,storeId:J.storeId,visitId:J.id},{headers:{Authorization:"Bearer ".concat(ev)}});case 15:eN([{id:e.sent.data.id,content:eJ,createdDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0],createdTime:new Date().toISOString(),updatedTime:new Date().toISOString(),employeeId:J.employeeId,employeeName:J.employeeName,storeId:J.storeId,storeName:J.storeName,visitId:J.id}].concat((0,n.Z)(eg))),h.ZP.success("Note added successfully!");case 19:eW(!1),eX(""),eY(!1),e1(null),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(2),console.error("Error saving note:",e.t0),h.ZP.error("Error saving note.");case 29:case"end":return e.stop()}},e,null,[[2,25]])})),function(){return w.apply(this,arguments)}),tQ=(P=(0,r.Z)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.delete("https://api.gajkesaristeels.in/notes/delete?id=".concat(t),{headers:{Authorization:"Bearer ".concat(ev)}});case 3:eN(eg.filter(function(e){return e.id!==t})),h.ZP.success("Note deleted successfully!"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error deleting note:",e.t0),h.ZP.error("Error deleting note.");case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return P.apply(this,arguments)}),tW=function(e){return e.split(" ").map(function(e){return e[0]}).join("").toUpperCase().slice(0,2)},t$=function(){"employeeDetails"===Y.query.returnTo&&Y.query.employee?Y.push({pathname:"/EmployeeDetailsPage/".concat(Y.query.employee),query:{state:Y.query.state,startDate:Y.query.startDate,endDate:Y.query.endDate,selectedOption:Y.query.selectedOption||"Today",currentPage:Y.query.currentPage||"1"}}):Y.back()},tH=(I=(0,r.Z)(c().mark(function e(t){var a,s,r,i,l,o,d,u,m,h;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d=Q(Q({},ty),{},{taskType:t,storeId:null!==(a=null==J?void 0:J.storeId)&&void 0!==a?a:0}),e.next=4,fetch("https://api.gajkesaristeels.in/task/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(ev)},body:JSON.stringify(d)});case 4:return u=e.sent,e.next=7,u.json();case 7:m=e.sent,h=Q(Q({},ty),{},{id:m.id,assignedToName:(null===(s=tf.find(function(e){return e.id===ty.assignedToId}))||void 0===s?void 0:s.firstName)+" "+(null===(r=tf.find(function(e){return e.id===ty.assignedToId}))||void 0===r?void 0:r.lastName)||"Unknown",storeName:(null===(i=tj.find(function(e){return e.id===ty.storeId}))||void 0===i?void 0:i.storeName)||"",storeId:null!==(l=null==J?void 0:J.storeId)&&void 0!==l?l:0}),"requirement"===t?ed(function(e){var t;return[Q(Q({},h),{},{storeId:null!==(t=h.storeId)&&void 0!==t?t:0})].concat((0,n.Z)(e))}):eh(function(e){var t;return[Q(Q({},h),{},{storeId:null!==(t=h.storeId)&&void 0!==t?t:0})].concat((0,n.Z)(e))}),tb({id:0,taskTitle:"",taskDesciption:"",dueDate:"",assignedToId:0,assignedToName:"",assignedById:97,assignedByName:"",storeId:null!==(o=null==J?void 0:J.storeId)&&void 0!==o?o:0,storeName:"",storeCity:"",visitId:Number(e4),visitDate:"",status:"Assigned",priority:"low",taskType:"requirement",attachment:[],attachmentResponse:[],createdAt:"",updatedAt:"",createdTime:"",updatedTime:""}),td(!1),tR(e4,t,"requirement"===t?ed:eh),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("Error creating task:",e.t0);case 18:case"end":return e.stop()}},e,null,[[0,15]])})),function(e){return I.apply(this,arguments)}),tY=function(){return"string"==typeof e4?e4:Array.isArray(e4)?e4[0]:""},tG=function(e){var t={low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800";return(0,L.jsx)("span",{className:"status-badge ".concat(t),children:e})},tJ=(F=(0,r.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.put("https://api.gajkesaristeels.in/visit/checkout?id=".concat(null==J?void 0:J.id),{checkoutLatitude:25,checkoutLongitude:-25,outcome:"done"},{headers:{Authorization:"Bearer ".concat(ev)}});case 3:e.sent,h.ZP.success("Checked out Successfully!"),t_(e4),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response?e.t0.response.data.includes("Cant check out without Checking in")?h.ZP.error("Error Checking out: Cant check out without Checking in!"):e.t0.response.data.includes("Already Checked Out")?h.ZP.error("Error Checking out: Already Checked Out!"):h.ZP.error("Error Checking out!"):h.ZP.error("Error Checking out!");case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(){return F.apply(this,arguments)});(0,l.useEffect)(function(){var e=tY();e&&ev&&t_(e)},[e4,ev]),(0,l.useEffect)(function(){tB()},[eo,em,te,tB]);var tX=(W=(0,r.Z)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.delete("https://api.gajkesaristeels.in/task/deleteById?taskId=".concat(t),{headers:{Authorization:"Bearer ".concat(ev)}});case 3:ed(function(e){return e.filter(function(e){return e.id!==t})}),eh(function(e){return e.filter(function(e){return e.id!==t})}),h.ZP.success("Task deleted!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error deleting task:",e.t0),h.ZP.error("Error Deleting Task: Task Not Found!");case 12:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return W.apply(this,arguments)});(0,l.useEffect)(function(){to&&(tS(),tI())},[to]);var tK=($=(0,r.Z)(c().mark(function e(t,a,s){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.put("https://api.gajkesaristeels.in/task/updateTask?taskId=".concat(t),{status:a,priority:s},{headers:{Authorization:"Bearer ".concat(ev)}});case 3:ed(function(e){return e.map(function(e){return e.id===t?Q(Q({},e),{},{status:a}):e})}),eh(function(e){return e.map(function(e){return e.id===t?Q(Q({},e),{},{status:a}):e})}),h.ZP.success("Status updated successfully!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error updating status:",e.t0),h.ZP.error("Error updating status.");case 12:case"end":return e.stop()}},e,null,[[0,8]])})),function(e,t,a){return $.apply(this,arguments)}),t0=function(e){var t={Assigned:"bg-blue-100 text-blue-800","Work in Progress":"bg-orange-100 text-orange-800",Complete:"bg-green-100 text-green-800"},a=e in t?t[e]:"bg-gray-100 text-gray-800";return(0,L.jsx)("span",{className:"status-badge ".concat(a),children:e})},t1=null!=J&&J.checkinTime&&null!=J&&J.checkoutTime?{emoji:"✅",status:"Completed",color:"bg-purple-100 text-purple-800",isOngoing:!1}:null!=J&&J.checkoutTime?{emoji:"⏱️",status:"Checked Out",color:"bg-orange-100 text-orange-800",isOngoing:!1}:null!=J&&J.checkinTime?{emoji:"\uD83D\uDD70️",status:"On Going",color:"bg-green-100 text-green-800",isOngoing:!0}:{emoji:"\uD83D\uDCC5",status:"Assigned",color:"bg-blue-100 text-blue-800",isOngoing:!1},t2=(0,l.useState)(!1),t4=t2[0],t3=t2[1],t9=(0,l.useState)(null),t8=t9[0],t7=t9[1],t6=function(e){t7(e),t3(!0)};return(0,L.jsxs)("div",{className:"container main-content",children:[(0,L.jsxs)(u(),{children:[(0,L.jsx)("title",{children:"Visit Detail Page"}),(0,L.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap",rel:"stylesheet"}),(0,L.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"})]}),(0,L.jsxs)("div",{className:"visit-details",children:[(0,L.jsxs)("aside",{className:"left-panel",children:[(0,L.jsxs)("div",{className:"back-button-container",children:[(0,L.jsxs)("div",{className:"back-button",onClick:t$,children:[(0,L.jsx)("i",{className:"fas fa-arrow-left"})," Back"]}),(0,L.jsx)("div",{className:"status-badge-wrapper",children:(0,L.jsxs)("div",{className:"status-badge ".concat(t1.color),children:[function(e){switch(e){case"Assigned":return(0,L.jsx)(g.Z,{className:"w-4 h-4 mr-2"});case"On Going":return(0,L.jsx)(k,{className:"w-4 h-4 mr-2"});case"Checked Out":case"Completed":return(0,L.jsx)(O,{className:"w-4 h-4 mr-2"});default:return null}}(t1.status),t1.status]})})]}),(0,L.jsxs)("div",{className:"profile",children:[(0,L.jsx)("div",{className:"avatar",children:(0,L.jsx)("span",{children:tW((null==J?void 0:J.employeeName)||"")})}),(0,L.jsx)("h2",{children:null==J?void 0:J.employeeName}),(0,L.jsx)("p",{className:"store-name",children:null==J?void 0:J.storeName})]}),(0,L.jsxs)("div",{className:"action-buttons",children:[(0,L.jsxs)("button",{className:"action-button",onClick:function(){J&&J.storeId?Y.push("/CustomerDetailPage/".concat(J.storeId)):h.ZP.error("Store information is not available")},children:[(0,L.jsx)("i",{className:"fas fa-store"})," View Store"]}),(0,L.jsxs)("button",{className:"action-button",onClick:function(){return td(!0)},children:[(0,L.jsx)("i",{className:"fas fa-plus"})," Add Requirement"]}),(0,L.jsxs)("button",{className:"action-button",onClick:function(){tb(Q(Q({},ty),{},{taskType:"complaint"})),td(!0)},children:[(0,L.jsx)("i",{className:"fas fa-plus"})," Add Complaint"]})]}),(0,L.jsx)("button",{className:"complete-visit-btn ".concat(t1.isOngoing?"":"disabled"),onClick:tJ,disabled:!t1.isOngoing,children:"Complete Visit"}),(0,L.jsxs)("div",{className:"last-activity",children:[(0,L.jsx)("i",{className:"fas fa-clock"})," Visit Duration:"," ",null===(H=ei.find(function(e){return"Visit Duration"===e.title}))||void 0===H?void 0:H.value]}),(0,L.jsxs)("div",{className:"info-tabs",children:[(0,L.jsx)("div",{className:"info-tab ".concat("visit-info"===es?"active":""),onClick:function(){return en("visit-info")},children:"Visit Info"}),(0,L.jsx)("div",{className:"info-tab ".concat("store-info"===es?"active":""),onClick:function(){return en("store-info")},children:"Store Info"})]}),(0,L.jsx)("div",{className:"info-content ".concat("visit-info"===es?"active":""),id:"visit-info",children:(0,L.jsxs)("div",{className:"store-info-card",children:[(0,L.jsxs)("div",{className:"store-header",children:[(0,L.jsx)("div",{className:"store-avatar",children:(0,L.jsx)("i",{className:"fas fa-clipboard-list text-2xl text-purple-600"})}),(0,L.jsxs)("div",{className:"store-title",children:[(0,L.jsx)("h3",{className:"text-lg font-semibold",children:"Visit Details"}),(0,L.jsx)("span",{className:"text-sm text-gray-500",children:null!=J&&J.visit_date?(0,T.WU)(new Date(J.visit_date),"dd MMM yyyy"):"Date not available"})]})]}),(0,L.jsxs)("div",{className:"store-details",children:[(0,L.jsxs)("div",{className:"detail-item",children:[(0,L.jsx)("div",{className:"detail-icon",children:(0,L.jsx)("div",{className:"icon-circle bg-purple-100",children:(0,L.jsx)("i",{className:"fas fa-tasks text-purple-600"})})}),(0,L.jsxs)("div",{className:"detail-content",children:[(0,L.jsx)("label",{className:"detail-label",children:"Purpose"}),(0,L.jsx)("div",{className:"detail-value",children:null==J?void 0:J.purpose})]})]}),(0,L.jsxs)("div",{className:"detail-item",children:[(0,L.jsx)("div",{className:"detail-icon",children:(0,L.jsx)("div",{className:"icon-circle bg-yellow-100",children:(0,L.jsx)("i",{className:"fas fa-map-marker-alt text-yellow-600"})})}),(0,L.jsxs)("div",{className:"detail-content",children:[(0,L.jsx)("label",{className:"detail-label",children:"Location"}),(0,L.jsx)("div",{className:"detail-value",children:null!=J&&J.checkinLatitude&&null!=J&&J.checkinLongitude?(0,L.jsxs)("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(J.checkinLatitude,",").concat(J.checkinLongitude),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 transition-colors",children:[(0,L.jsx)("i",{className:"fas fa-external-link-alt mr-1"}),"View Location"]}):(0,L.jsx)("span",{className:"text-gray-500",children:"Location not available"})})]})]}),(0,L.jsxs)("div",{className:"detail-item",children:[(0,L.jsx)("div",{className:"detail-icon",children:(0,L.jsx)("div",{className:"icon-circle bg-green-100",children:(0,L.jsx)("i",{className:"fas fa-sign-in-alt text-green-600"})})}),(0,L.jsxs)("div",{className:"detail-content",children:[(0,L.jsx)("label",{className:"detail-label",children:"Check-in"}),(0,L.jsx)("div",{className:"detail-value",children:null!=J&&J.checkinDate&&null!=J&&J.checkinTime?(0,L.jsxs)("div",{className:"flex flex-col",children:[(0,L.jsx)("span",{children:(0,T.WU)(new Date(J.checkinDate),"dd MMM yyyy")}),(0,L.jsx)("span",{className:"text-sm text-gray-500",children:(0,T.WU)((0,S.D)("1970-01-01T".concat(J.checkinTime)),"h:mm a")})]}):(0,L.jsx)("span",{className:"text-gray-500",children:"Check-in not available"})})]})]}),(0,L.jsxs)("div",{className:"detail-item",children:[(0,L.jsx)("div",{className:"detail-icon",children:(0,L.jsx)("div",{className:"icon-circle bg-red-100",children:(0,L.jsx)("i",{className:"fas fa-sign-out-alt text-red-600"})})}),(0,L.jsxs)("div",{className:"detail-content",children:[(0,L.jsx)("label",{className:"detail-label",children:"Check-out"}),(0,L.jsx)("div",{className:"detail-value",children:null!=J&&J.checkoutDate&&null!=J&&J.checkoutTime?(0,L.jsxs)("div",{className:"flex flex-col",children:[(0,L.jsx)("span",{children:(0,T.WU)(new Date(J.checkoutDate),"dd MMM yyyy")}),(0,L.jsx)("span",{className:"text-sm text-gray-500",children:(0,T.WU)((0,S.D)("1970-01-01T".concat(J.checkoutTime)),"h:mm a")})]}):(0,L.jsx)("span",{className:"text-gray-500",children:"Check-out not available"})})]})]})]})]})}),(0,L.jsx)("div",{className:"info-content ".concat("store-info"===es?"active":""),id:"store-info",children:(0,L.jsxs)("div",{className:"store-info-card",children:[(0,L.jsxs)("div",{className:"store-header",children:[(0,L.jsx)("div",{className:"store-avatar",children:(0,L.jsx)("i",{className:"fas fa-store text-2xl text-blue-600"})}),(0,L.jsxs)("div",{className:"store-title",children:[(0,L.jsx)("h3",{className:"text-lg font-semibold",children:null==J?void 0:J.storeName}),(0,L.jsx)("span",{className:"text-sm text-gray-500",children:null==tO?void 0:tO.city})]})]}),(0,L.jsxs)("div",{className:"store-details",children:[(0,L.jsxs)("div",{className:"detail-item",children:[(0,L.jsx)("div",{className:"detail-icon",children:(0,L.jsx)("div",{className:"icon-circle bg-blue-100",children:(0,L.jsx)("i",{className:"fas fa-phone text-blue-600"})})}),(0,L.jsxs)("div",{className:"detail-content",children:[(0,L.jsx)("label",{className:"detail-label",children:"Contact"}),(0,L.jsx)("a",{href:"tel:".concat(null==tO?void 0:tO.contactNumber),className:"detail-value text-blue-600 hover:text-blue-800 transition-colors",children:null==tO?void 0:tO.contactNumber})]})]}),(0,L.jsxs)("div",{className:"detail-item",children:[(0,L.jsx)("div",{className:"detail-icon",children:(0,L.jsx)("div",{className:"icon-circle bg-green-100",children:(0,L.jsx)("i",{className:"fas fa-map-marker-alt text-green-600"})})}),(0,L.jsxs)("div",{className:"detail-content",children:[(0,L.jsx)("label",{className:"detail-label",children:"Location"}),(0,L.jsxs)("div",{className:"detail-value",children:[(0,L.jsx)("p",{className:"text-sm",children:null==tO?void 0:tO.address}),(null==tO?void 0:tO.city)&&(0,L.jsxs)("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent("".concat(null==J?void 0:J.storeName," ").concat(null==tO?void 0:tO.address))),target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-800 transition-colors mt-1 inline-block",children:[(0,L.jsx)("i",{className:"fas fa-external-link-alt mr-1"}),"View on Maps"]})]})]})]})]})]})})]}),(0,L.jsxs)("section",{className:"activity-details",children:[(0,L.jsxs)("div",{className:"tabs",children:[(0,L.jsxs)("button",{className:"tab ".concat("metrics"===ee?"active":""),onClick:function(){return et("metrics")},children:[(0,L.jsx)("i",{className:"fas fa-chart-line"})," Metrics"]}),(0,L.jsxs)("button",{className:"tab ".concat("visits"===ee?"active":""),onClick:function(){return et("visits")},children:[(0,L.jsx)("i",{className:"fas fa-calendar-check"})," Visits"]}),(0,L.jsxs)("button",{className:"tab ".concat("brands"===ee?"active":""),onClick:function(){return et("brands")},children:[(0,L.jsx)("i",{className:"fas fa-tags"})," Brands"]}),(0,L.jsxs)("button",{className:"tab ".concat("requirements"===ee?"active":""),onClick:function(){return et("requirements")},children:[(0,L.jsx)("i",{className:"fas fa-clipboard-list"})," Requirements"]}),(0,L.jsxs)("button",{className:"tab ".concat("complaints"===ee?"active":""),onClick:function(){return et("complaints")},children:[(0,L.jsx)("i",{className:"fas fa-exclamation-circle"})," Complaints"]})]}),(0,L.jsxs)("div",{className:"tab-content ".concat("visits"===ee?"active":""),id:"visits",children:[(0,L.jsx)("div",{className:"filter-bar",children:(0,L.jsx)(p.Z,{placeholder:"Search by Visit Purpose",value:eE,onChange:function(e){return e_(e.target.value)},style:{width:200}})}),(0,L.jsx)("div",{className:"visits-list",children:tP.map(function(e){return(0,L.jsxs)("div",{className:"visit-item",children:[(0,L.jsxs)("div",{className:"item-header",children:[(0,L.jsx)("span",{className:"item-title",children:e.purpose}),(0,L.jsx)("span",{className:"item-status",children:e.checkinDate&&e.checkinTime?"".concat((0,T.WU)(new Date(e.checkinDate),"dd MMM ''yy")," ").concat((0,T.WU)((0,S.D)("1970-01-01T".concat(e.checkinTime)),"h:mm a")):"Check-in time not available"})]}),(0,L.jsxs)("div",{className:"item-content",children:[(0,L.jsxs)("p",{children:["Employee: ",e.employeeName]}),(0,L.jsxs)("p",{children:["Store: ",e.storeName]}),(0,L.jsx)(C(),{href:"/VisitDetailPage/[id]",as:"/VisitDetailPage/".concat(e.id),passHref:!0,children:(0,L.jsxs)("div",{className:"timeline-visit-id",children:["Visit ID: ",e.id]})})]})]},e.id)})}),ef.length>3&&(0,L.jsxs)("div",{className:"mt-4",children:[(0,L.jsx)(f.ZP,{onClick:function(){return eq(!eB)},children:eB?"Show Less":"Show More"}),eB&&(0,L.jsxs)(U.tl,{children:[(0,L.jsx)(U.dN,{onClick:function(){return eS>1&&tT(eS-1)},className:1===eS?"pointer-events-none opacity-50":"",children:"Previous"}),(0,L.jsx)(U.ng,{children:function(){for(var e=[],t=function(t){1===t||t===tC||t>=eS-1&&t<=eS+1?e.push((0,L.jsx)(U.nt,{children:(0,L.jsx)(U.kN,{isActive:eS===t,onClick:function(){return tT(t)},children:t})},t)):(t===eS-2&&t>2||t===eS+2&&t<tC-1)&&e.push((0,L.jsx)(U.nt,{children:(0,L.jsx)(U.Dj,{})},t))},a=1;a<=tC;a++)t(a);return e}()}),(0,L.jsx)(U.$0,{onClick:function(){return eS<tC&&tT(eS+1)},className:eS===tC?"pointer-events-none opacity-50":"",children:"Next"})]})]})]}),(0,L.jsx)("div",{className:"tab-content ".concat("metrics"===ee?"active":""),id:"metrics",children:(0,L.jsx)("div",{className:"metrics-grid",children:ei.map(function(e,t){return(0,L.jsxs)("div",{className:"metric-card",children:[(0,L.jsx)("h3",{children:e.title}),(0,L.jsx)("div",{className:"value",children:e.value})]},t)})})}),(0,L.jsx)("div",{className:"tab-content ".concat("brands"===ee?"active":""),id:"brands",children:(0,L.jsx)(R.default,{brands:eb,setBrands:ek,visitId:tY(),token:ev,fetchVisitDetail:t_})}),(0,L.jsxs)("div",{className:"tab-content ".concat("requirements"===ee?"active":""),id:"requirements",children:[(0,L.jsx)("div",{className:"filter-bar",children:(0,L.jsxs)(B.Ph,{value:te,onValueChange:tA,children:[(0,L.jsx)(B.i4,{className:"w-[180px]",children:(0,L.jsx)(B.ki,{placeholder:"Filter by Priority"})}),(0,L.jsxs)(B.Bw,{children:[(0,L.jsx)(B.Ql,{value:"all",children:"All Priorities"}),(0,L.jsx)(B.Ql,{value:"low",children:"Low"}),(0,L.jsx)(B.Ql,{value:"medium",children:"Medium"}),(0,L.jsx)(B.Ql,{value:"high",children:"High"})]})]})}),(0,L.jsx)("div",{className:"requirements-list",children:ts.map(function(e,t){return(0,L.jsxs)("div",{className:"requirement-item",children:[(0,L.jsxs)("div",{className:"item-header",children:[(0,L.jsx)("span",{className:"item-title primary-blue",children:e.taskTitle}),(0,L.jsxs)("div",{className:"item-status-wrapper",style:{display:"flex",gap:"8px"},children:[tG(e.priority),t0(e.status)]})]}),(0,L.jsxs)("div",{className:"item-footer",children:[(0,L.jsxs)("span",{children:["Due: ",e.dueDate]}),(0,L.jsxs)("div",{className:"assigned-to",children:[(0,L.jsx)("div",{className:"avatar",children:tW(e.assignedToName)}),(0,L.jsxs)("span",{children:["Assigned to ",e.assignedToName]})]}),(0,L.jsx)(x.Z,{overlay:(0,L.jsxs)(v.Z,{onClick:function(t){return tK(e.id,t.key,e.priority)},children:[(0,L.jsx)(v.Z.Item,{children:"Assigned"},"Assigned"),(0,L.jsx)(v.Z.Item,{children:"Work in Progress"},"Work in Progress"),(0,L.jsx)(v.Z.Item,{children:"Complete"},"Complete")]}),children:(0,L.jsx)(f.ZP,{children:e.status})}),(0,L.jsx)(f.ZP,{type:"link",className:"red-delete-icon",icon:(0,L.jsx)("i",{className:"fas fa-trash-alt"}),onClick:function(){return tX(e.id)}})]})]},t)})})]}),(0,L.jsxs)("div",{className:"tab-content ".concat("complaints"===ee?"active":""),id:"complaints",children:[(0,L.jsx)("div",{className:"filter-bar",children:(0,L.jsxs)(B.Ph,{value:te,onValueChange:tA,children:[(0,L.jsx)(B.i4,{className:"w-[180px]",children:(0,L.jsx)(B.ki,{placeholder:"Filter by Priority"})}),(0,L.jsxs)(B.Bw,{children:[(0,L.jsx)(B.Ql,{value:"all",children:"All Priorities"}),(0,L.jsx)(B.Ql,{value:"low",children:"Low"}),(0,L.jsx)(B.Ql,{value:"medium",children:"Medium"}),(0,L.jsx)(B.Ql,{value:"high",children:"High"})]})]})}),(0,L.jsx)("div",{className:"complaints-list",children:ti.map(function(e,t){return(0,L.jsxs)("div",{className:"complaint-item",children:[(0,L.jsxs)("div",{className:"item-header",children:[(0,L.jsx)("span",{className:"item-title primary-blue",children:e.taskTitle}),(0,L.jsxs)("div",{className:"item-status-wrapper",style:{display:"flex",gap:"8px"},children:[tG(e.priority),t0(e.status)]})]}),(0,L.jsxs)("div",{className:"item-footer",children:[(0,L.jsxs)("span",{children:["Reported: ",e.dueDate]}),(0,L.jsxs)("div",{className:"assigned-to",children:[(0,L.jsx)("div",{className:"avatar",children:tW(e.assignedToName)}),(0,L.jsxs)("span",{children:["Handled by ",e.assignedToName]})]}),(0,L.jsx)(x.Z,{overlay:(0,L.jsxs)(v.Z,{onClick:function(t){return tK(e.id,t.key,e.priority)},children:[(0,L.jsx)(v.Z.Item,{children:"Assigned"},"Assigned"),(0,L.jsx)(v.Z.Item,{children:"Work in Progress"},"Work in Progress"),(0,L.jsx)(v.Z.Item,{children:"Complete"},"Complete")]}),children:(0,L.jsx)(f.ZP,{children:e.status})}),(0,L.jsx)(f.ZP,{type:"link",className:"red-delete-icon",icon:(0,L.jsx)("i",{className:"fas fa-trash-alt"}),onClick:function(){return tX(e.id)}})]})]},t)})})]})]}),(0,L.jsxs)("aside",{className:"right-panel",children:[(0,L.jsx)("div",{className:"section-title",children:"Check-in Images"}),(0,L.jsx)("div",{className:"image-gallery",children:eM.length>0?eM.map(function(e,t){return(0,L.jsx)("div",{className:"image-container",children:(0,L.jsx)(A(),{src:e,alt:"Check-in image ".concat(t+1),className:"rounded-lg shadow-md",width:300,height:200,onClick:function(){return t6(e)}})},t)}):(0,L.jsx)("p",{children:"No images available"})}),(null==J?void 0:J.checkinLatitude)&&(null==J?void 0:J.checkinLongitude)&&(0,L.jsx)("div",{className:"mt-4",children:(0,L.jsx)(M.default,{latitude:J.checkinLatitude,longitude:J.checkinLongitude})}),(0,L.jsx)("div",{className:"section-title",children:"Notes"}),(0,L.jsxs)("div",{className:"notes-section",children:[(0,L.jsxs)(f.ZP,{className:"add-note-btn",onClick:function(){eY(!1),eX(""),eW(!0)},children:[(0,L.jsx)("i",{className:"fas fa-plus"})," Add Note"]}),(0,L.jsx)("div",{className:"notes-list",children:eg.map(function(e){return(0,L.jsxs)("div",{className:"note-item",children:[(0,L.jsxs)("div",{className:"note-header",children:[(0,L.jsx)("span",{className:"note-date",children:e.createdDate}),(0,L.jsxs)("div",{className:"note-actions",children:[(0,L.jsx)("a",{href:"#",onClick:function(){return tL(e)},children:"Edit"}),(0,L.jsx)("a",{href:"#",className:"note-delete",onClick:function(){return tQ(e.id)},children:"Delete"})]})]}),(0,L.jsx)("div",{className:"note-content",children:e.content})]},e.id)})})]})]})]}),(0,L.jsx)(j.Z,{title:eH?"Edit Note":"Add Note",visible:eQ,onOk:tF,onCancel:function(){return eW(!1)},okText:eH?"Update":"Add",children:(0,L.jsx)(p.Z.TextArea,{placeholder:"Enter note content",value:eJ,onChange:function(e){return eX(e.target.value)},rows:4})}),(0,L.jsx)(E.Vq,{open:to,onOpenChange:td,children:(0,L.jsxs)(E.cZ,{className:"sm:max-w-[600px]",children:[(0,L.jsxs)(E.fK,{children:[(0,L.jsxs)(E.$N,{children:["Create ","requirement"===ty.taskType?"Requirement":"Complaint"]}),(0,L.jsx)(E.Be,{children:"Fill in the details."})]}),(0,L.jsxs)(_.mQ,{value:tm,children:[(0,L.jsxs)(_.dr,{className:"mb-4",children:[(0,L.jsx)(_.SP,{value:"general",onClick:function(){return th("general")},children:"General"}),(0,L.jsx)(_.SP,{value:"details",onClick:function(){return th("details")},children:"Details"})]}),(0,L.jsx)(_.nU,{value:"general",children:(0,L.jsxs)("div",{className:"grid gap-4",children:[(0,L.jsxs)("div",{className:"grid gap-2",children:[(0,L.jsxs)(z._,{htmlFor:"taskTitle",children:["requirement"===ty.taskType?"Requirement":"Complaint"," Title"]}),(0,L.jsx)(p.Z,{id:"taskTitle",placeholder:"Enter ".concat(ty.taskType," title"),value:ty.taskTitle,onChange:function(e){return tb(Q(Q({},ty),{},{taskTitle:e.target.value}))}})]}),(0,L.jsxs)("div",{className:"grid gap-2",children:[(0,L.jsxs)(z._,{htmlFor:"taskDesciption",children:["requirement"===ty.taskType?"Requirement":"Complaint"," Description"]}),(0,L.jsx)(p.Z,{id:"taskDesciption",placeholder:"Enter ".concat(ty.taskType," description"),value:ty.taskDesciption,onChange:function(e){return tb(Q(Q({},ty),{},{taskDesciption:e.target.value}))}})]}),(0,L.jsxs)("div",{className:"grid gap-2",children:[(0,L.jsx)(z._,{htmlFor:"category",children:"Category"}),(0,L.jsxs)(B.Ph,{value:ty.taskType,onValueChange:function(e){return tb(Q(Q({},ty),{},{taskType:e}))},children:[(0,L.jsx)(B.i4,{className:"w-[280px]",children:(0,L.jsx)(B.ki,{placeholder:"Select a category"})}),(0,L.jsxs)(B.Bw,{children:[(0,L.jsx)(B.Ql,{value:"requirement",children:"Requirement"}),(0,L.jsx)(B.Ql,{value:"complaint",children:"Complaint"})]})]})]}),(0,L.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,L.jsx)(f.ZP,{onClick:function(){return td(!1)},className:"bg-gray-200 text-gray-800",children:"Cancel"}),(0,L.jsx)(f.ZP,{onClick:function(){th("details")},children:"Next"})]})]})}),(0,L.jsx)(_.nU,{value:"details",children:(0,L.jsxs)("div",{className:"grid gap-4",children:[(0,L.jsxs)("div",{className:"grid gap-2",children:[(0,L.jsx)(z._,{htmlFor:"dueDate",children:"Due Date"}),(0,L.jsxs)(Z.J2,{children:[(0,L.jsx)(Z.xo,{asChild:!0,children:(0,L.jsxs)(f.ZP,{className:"w-[280px] justify-start text-left font-normal ".concat(!ty.dueDate&&"text-muted-foreground"),children:[(0,L.jsx)(V.Z,{className:"mr-2 h-4 w-4"}),ty.dueDate?(0,T.WU)(new Date(ty.dueDate),"PPP"):(0,L.jsx)("span",{children:"Pick a date"})]})}),(0,L.jsx)(Z.yk,{className:"w-auto p-0",children:(0,L.jsx)(q.f,{mode:"single",selected:ty.dueDate?new Date(ty.dueDate):void 0,onSelect:function(e){return tb(Q(Q({},ty),{},{dueDate:(null==e?void 0:e.toISOString())||""}))},initialFocus:!0})})]})]}),(0,L.jsxs)("div",{className:"grid gap-2",children:[(0,L.jsx)(z._,{htmlFor:"assignedToId",children:"Assigned To"}),(0,L.jsx)(p.Z,{id:"assignedToId",value:J?"".concat(J.employeeName):"",disabled:!0})]}),(0,L.jsxs)("div",{className:"grid gap-2",children:[(0,L.jsx)(z._,{htmlFor:"priority",children:"Priority"}),(0,L.jsxs)(B.Ph,{value:ty.priority,onValueChange:function(e){return tb(Q(Q({},ty),{},{priority:e}))},children:[(0,L.jsx)(B.i4,{className:"w-[280px]",children:(0,L.jsx)(B.ki,{placeholder:"Select a priority"})}),(0,L.jsxs)(B.Bw,{children:[(0,L.jsx)(B.Ql,{value:"low",children:"Low"}),(0,L.jsx)(B.Ql,{value:"medium",children:"Medium"}),(0,L.jsx)(B.Ql,{value:"high",children:"High"})]})]})]}),(0,L.jsxs)("div",{className:"grid gap-2",children:[(0,L.jsx)(z._,{htmlFor:"storeId",children:"Store"}),(0,L.jsx)(p.Z,{id:"storeId",value:J?"".concat(J.storeName):"",disabled:!0})]}),(0,L.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,L.jsx)(f.ZP,{onClick:t$,className:"bg-gray-200 text-gray-800",children:"Back"}),(0,L.jsxs)(f.ZP,{onClick:function(){return tH(ty.taskType)},children:["Create ","requirement"===ty.taskType?"Requirement":"Complaint"]})]})]})})]})]})}),(0,L.jsx)(j.Z,{title:null,visible:t4,onCancel:function(){return t3(!1)},footer:null,centered:!0,bodyStyle:{padding:0,textAlign:"center"},children:(0,L.jsx)("img",{src:t8||"",alt:"Preview Image",style:{maxWidth:"100%",maxHeight:"80vh"}})})]})}},65296:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/VisitDetailPage/[id]",function(){return a(8290)}])},33620:function(){},50571:function(e,t,a){"use strict";a.d(t,{D:function(){return n}});var s=a(5907);function n(e,t){var a,n,h,p=null!==(a=null==t?void 0:t.additionalDigits)&&void 0!==a?a:2,f=function(e){var t,a={},s=e.split(r.dateTimeDelimiter);if(s.length>2)return a;if(/:/.test(s[0])?t=s[0]:(a.date=s[0],t=s[1],r.timeZoneDelimiter.test(a.date)&&(a.date=e.split(r.timeZoneDelimiter)[0],t=e.substr(a.date.length,e.length))),t){var n=r.timezone.exec(t);n?(a.time=t.replace(n[1],""),a.timezone=n[1]):a.time=t}return a}(e);if(f.date){var x=function(e,t){var a=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(a);if(!s)return{year:NaN,restDateString:""};var n=s[1]?parseInt(s[1]):null,r=s[2]?parseInt(s[2]):null;return{year:null===r?n:100*r,restDateString:e.slice((s[1]||s[2]).length)}}(f.date,p);n=function(e,t){if(null===t)return new Date(NaN);var a,s,n=e.match(i);if(!n)return new Date(NaN);var r=!!n[4],c=o(n[1]),l=o(n[2])-1,d=o(n[3]),h=o(n[4]),p=o(n[5])-1;if(r)return h>=1&&h<=53&&p>=0&&p<=6?((a=new Date(0)).setUTCFullYear(t,0,4),s=a.getUTCDay()||7,a.setUTCDate(a.getUTCDate()+((h-1)*7+p+1-s)),a):new Date(NaN);var f=new Date(0);return l>=0&&l<=11&&d>=1&&d<=(u[l]||(m(t)?29:28))&&c>=1&&c<=(m(t)?366:365)?(f.setUTCFullYear(t,l,Math.max(c,d)),f):new Date(NaN)}(x.restDateString,x.year)}if(!n||isNaN(n.getTime()))return new Date(NaN);var v=n.getTime(),j=0;if(f.time&&isNaN(j=function(e){var t=e.match(c);if(!t)return NaN;var a=d(t[1]),n=d(t[2]),r=d(t[3]);return(24===a?0===n&&0===r:r>=0&&r<60&&n>=0&&n<60&&a>=0&&a<25)?a*s.vh+n*s.yJ+1e3*r:NaN}(f.time)))return new Date(NaN);if(f.timezone){if(isNaN(h=function(e){if("Z"===e)return 0;var t=e.match(l);if(!t)return 0;var a="+"===t[1]?-1:1,n=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return r>=0&&r<=59?a*(n*s.vh+r*s.yJ):NaN}(f.timezone)))return new Date(NaN)}else{var g=new Date(v+j),N=new Date(0);return N.setFullYear(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()),N.setHours(g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds()),N}return new Date(v+j+h)}var r={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},i=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,c=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,l=/^([+-])(\d{2})(?::?(\d{2}))?$/;function o(e){return e?parseInt(e):1}function d(e){return e&&parseFloat(e.replace(",","."))||0}var u=[31,null,31,30,31,30,31,31,30,31,30,31];function m(e){return e%400==0||e%4==0&&e%100!=0}}},function(e){e.O(0,[9545,6066,3800,5059,3192,3089,5096,4376,975,5675,4903,870,2888,9774,179],function(){return e(e.s=65296)}),_N_E=e.O()}]);