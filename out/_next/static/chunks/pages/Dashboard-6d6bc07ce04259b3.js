(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4156],{29222:function(e,t,a){"use strict";a.d(t,{d:function(){return p},z:function(){return m}});var n=a(59499),s=a(4730),r=a(67294),i=a(88426),o=a(12003),c=a(20439),l=a(85893),d=["className","variant","size","asChild"];function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var p=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),m=r.forwardRef(function(e,t){var a=e.className,r=e.variant,o=e.size,m=e.asChild,f=(0,s.Z)(e,d),h=void 0!==m&&m?i.g7:"button";return(0,l.jsx)(h,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach(function(t){(0,n.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({className:(0,c.cn)(p({variant:r,size:o,className:a})),ref:t},f))});m.displayName="Button"},65474:function(e,t,a){"use strict";a.d(t,{Ol:function(){return v},SZ:function(){return g},Zb:function(){return x},aY:function(){return b},eW:function(){return j},ll:function(){return y}});var n=a(59499),s=a(4730),r=a(67294),i=a(20439),o=a(85893),c=["className"],l=["className"],d=["className"],u=["className"],p=["className"],m=["className"];function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach(function(t){(0,n.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var x=r.forwardRef(function(e,t){var a=e.className,n=(0,s.Z)(e,c);return(0,o.jsx)("div",h({ref:t,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",a)},n))});x.displayName="Card";var v=r.forwardRef(function(e,t){var a=e.className,n=(0,s.Z)(e,l);return(0,o.jsx)("div",h({ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a)},n))});v.displayName="CardHeader";var y=r.forwardRef(function(e,t){var a=e.className,n=(0,s.Z)(e,d);return(0,o.jsx)("h3",h({ref:t,className:(0,i.cn)("font-semibold leading-none tracking-tight",a)},n))});y.displayName="CardTitle";var g=r.forwardRef(function(e,t){var a=e.className,n=(0,s.Z)(e,u);return(0,o.jsx)("p",h({ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a)},n))});g.displayName="CardDescription";var b=r.forwardRef(function(e,t){var a=e.className,n=(0,s.Z)(e,p);return(0,o.jsx)("div",h({ref:t,className:(0,i.cn)("p-6 pt-0",a)},n))});b.displayName="CardContent";var j=r.forwardRef(function(e,t){var a=e.className,n=(0,s.Z)(e,m);return(0,o.jsx)("div",h({ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a)},n))});j.displayName="CardFooter"},41848:function(e,t,a){"use strict";a.d(t,{O:function(){return l}});var n=a(59499),s=a(4730),r=a(20439),i=a(85893),o=["className"];function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function l(e){var t=e.className,a=(0,s.Z)(e,o);return(0,i.jsx)("div",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach(function(t){(0,n.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({className:(0,r.cn)("animate-pulse rounded-md bg-primary/10",t)},a))}},53204:function(e,t,a){"use strict";a.r(t);var n=a(27812),s=a(59499),r=a(16835),i=a(50029),o=a(64687),c=a.n(o),l=a(67294),d=a(83800),u=a(50571),p=a(59792),m=a(11163),f=a(45007),h=a(71839),x=a(17804),v=a(21122),y=a(94425),g=a(49516),b=a(65474),j=a(29222),w=a(20373),N=a(41848),k=a(28577),E=a(7731),O=a(24613),L=a.n(O),C=a(87066);a(38588);var D=a(92195);a(21080);var M=a(34221),S=a(85893);function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(a),!0).forEach(function(t){(0,s.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var T="https://api.gajkesaristeels.in",A=function(e){var t=e.state,a=e.totalEmployees,n=e.onClick;return(0,S.jsxs)(M.E.div,{whileHover:{scale:1.02,y:-5},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:300,damping:30},onClick:n,className:"relative overflow-hidden rounded-xl sm:rounded-2xl bg-gradient-to-br from-[#1c1c28] to-[#1c1c28]/90 p-3 sm:p-4 hover:shadow-xl transition-all duration-300 cursor-pointer border border-gray-800",children:[(0,S.jsx)(M.E.div,{className:"absolute top-0 right-0 w-24 sm:w-32 h-24 sm:h-32",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,S.jsxs)("svg",{viewBox:"0 0 200 200",className:"w-full h-full",style:{opacity:.1},children:[(0,S.jsx)("defs",{children:(0,S.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,S.jsx)("stop",{offset:"0%",style:{stopColor:"#4f46e5",stopOpacity:.3}}),(0,S.jsx)("stop",{offset:"100%",style:{stopColor:"#4f46e5",stopOpacity:.1}})]})}),(0,S.jsx)(M.E.path,{d:"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0",fill:"none",stroke:"url(#gradient)",strokeWidth:"20",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:2,ease:"easeInOut"}})]})}),(0,S.jsxs)("div",{className:"relative z-10",children:[(0,S.jsx)("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:(0,S.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,S.jsx)(M.E.div,{className:"p-1.5 sm:p-2 bg-blue-500/10 rounded-lg sm:rounded-xl backdrop-blur-sm",animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:(0,S.jsx)(x.Z,{className:"h-3 w-3 sm:h-4 sm:w-4 text-blue-500"})}),(0,S.jsxs)("div",{children:[(0,S.jsx)(M.E.div,{className:"text-sm sm:text-base font-semibold text-white capitalize mb-0.5",animate:{opacity:[.9,1,.9]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:t||"Unknown State"}),(0,S.jsxs)("div",{className:"flex items-center space-x-1.5 sm:space-x-2",children:[(0,S.jsx)(M.E.div,{className:"w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full bg-blue-500",animate:{scale:[1,1.2,1],opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),(0,S.jsx)("span",{className:"text-blue-400 text-[10px] sm:text-xs",children:"Active Region"})]})]})]})}),(0,S.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"flex items-center justify-between mb-1 sm:mb-1.5",children:[(0,S.jsx)("span",{className:"text-gray-400 text-[10px] sm:text-xs",children:"Total Employees"}),(0,S.jsx)(M.E.span,{className:"text-xl sm:text-2xl font-bold text-white",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:400,damping:10},children:a})]}),(0,S.jsxs)("div",{className:"relative h-1 sm:h-1.5 bg-blue-900/30 rounded-full overflow-hidden",children:[(0,S.jsx)(M.E.div,{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-blue-400 rounded-full",initial:{width:0},animate:{width:"100%"},transition:{duration:1,ease:"easeOut"}}),(0,S.jsx)(M.E.div,{className:"absolute inset-0 w-full h-full",style:{background:"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.15) 50%, transparent 100%)"},animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear"}})]})]}),(0,S.jsxs)(M.E.div,{className:"mt-2 sm:mt-3 flex items-center justify-between",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[(0,S.jsxs)("div",{className:"flex items-center space-x-1.5 sm:space-x-2",children:[(0,S.jsx)(M.E.div,{className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-blue-500/10 flex items-center justify-center",whileHover:{scale:1.1},children:(0,S.jsx)(v.Z,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 text-blue-500"})}),(0,S.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-400",children:"View Details"})]}),(0,S.jsx)(M.E.div,{className:"w-5 h-5 sm:w-6 sm:w-6 rounded-full bg-blue-500/10 flex items-center justify-center",whileHover:{scale:1.1},children:(0,S.jsx)(y.Z,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 text-blue-500 rotate-180"})})]})]})]})]})};t.default=function(){var e,t,a,s,o,Z=(0,l.useState)([]),I=Z[0],z=Z[1],B=(0,l.useState)(null),U=B[0],R=B[1],W=(0,l.useState)(null),F=W[0],q=W[1],_=(0,l.useState)((0,d.WU)(new Date,"yyyy-MM-dd")),V=_[0],G=_[1],H=(0,l.useState)((0,d.WU)(new Date,"yyyy-MM-dd")),Y=H[0],X=H[1],J=(0,l.useState)("Today"),K=J[0],Q=J[1],$=(0,l.useState)(1),ee=$[0],et=$[1],ea=(0,l.useState)(!1),en=ea[0],es=ea[1],er=(0,l.useState)(null),ei=(er[0],er[1]),eo=(0,l.useState)(!0),ec=eo[0],el=eo[1],ed=(0,l.useState)(null),eu=(ed[0],ed[1]),ep=(0,l.useState)([]),em=ep[0],ef=ep[1],eh=(0,l.useState)([]),ex=eh[0],ev=eh[1],ey=(0,l.useState)([]),eg=ey[0],eb=ey[1],ej=(0,l.useState)(!0),ew=ej[0],eN=ej[1],ek=(0,l.useState)(null),eE=ek[0],eO=ek[1],eL=(0,l.useState)(!1),eC=eL[0],eD=eL[1],eM=(0,f.I0)(),eS=(0,f.v9)(function(e){return e.auth.token}),eZ=(0,f.v9)(function(e){return e.auth.role});(0,f.v9)(function(e){return e.auth.teamId});var eP=(0,f.v9)(function(e){return e.auth.username}),eT=(0,m.useRouter)(),eA=eT.query;eA.view,eA.state,eA.employee,eA.startDate,eA.endDate;var eI=(0,l.useRef)(null),ez=(0,l.useRef)(null);(0,l.useEffect)(function(){eS&&eP&&!eZ&&eM((0,h.CS)(eP))},[eM,eS,eP,eZ]),(0,l.useEffect)(function(){eS&&(e_(),eB())},[eS]),(0,l.useEffect)(function(){eS&&"MANAGER"===eZ&&eM((0,h.mR)()).then(function(e){h.mR.fulfilled.match(e)&&e.payload&&ev(e.payload.fieldOfficers.map(function(e){return e.id}))})},[eS,eZ,eM]);var eB=(0,l.useCallback)((0,i.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.Z.get("".concat(T,"/employee/getAll"),{headers:{Authorization:"Bearer ".concat(eS)}});case 3:ef(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching employee info:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),[eS]),eU=(0,l.useCallback)((e=(0,i.Z)(c().mark(function e(t,a){var n,s;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return es(!0),e.prev=1,e.next=4,fetch("".concat(T,"/report/getCounts?startDate=").concat(t,"&endDate=").concat(a),{headers:{Authorization:"Bearer ".concat(eS)}});case 4:if((n=e.sent).ok){e.next=7;break}throw Error("Failed to fetch visits: ".concat(n.statusText));case 7:return e.next=9,n.json();case 9:s=e.sent,"MANAGER"===eZ?z(s.filter(function(e){return ex.includes(e.employeeId)})):z(s),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.error("Error fetching visits:",e.t0),z([]);case 17:return e.prev=17,es(!1),e.finish(17);case 20:case"end":return e.stop()}},e,null,[[1,13,17,20]])})),function(t,a){return e.apply(this,arguments)}),[eS,eZ,ex]),eR=(0,l.useCallback)((t=(0,i.Z)(c().mark(function e(t,a,n){var s,r,i,o,l,d;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("fetchEmployeeDetails called with:",{employeeName:t,start:a,end:n}),es(!0),e.prev=2,console.log("Employee from employeeInfo:",s=em.find(function(e){return"".concat(e.firstName," ").concat(e.lastName).toLowerCase()===t.toLowerCase()})),console.log("Employee from visits:",r=I.find(function(e){return"".concat(e.employeeFirstName," ").concat(e.employeeLastName).toLowerCase()===t.toLowerCase()})),console.log("Resolved employeeId:",i=(null==s?void 0:s.id)||(null==r?void 0:r.employeeId)),i){e.next=14;break}throw console.error("Employee not found:",t),console.log("Available employees in employeeInfo:",em.map(function(e){return"".concat(e.firstName," ").concat(e.lastName)})),console.log("Available employees in visits:",I.map(function(e){return"".concat(e.employeeFirstName," ").concat(e.employeeLastName)})),Error("Employee not found");case 14:return console.log("Fetching details for employee:",t,"with ID:",i),console.log("Fetching from URL:",o="".concat(T,"/visit/getByDateRangeAndEmployeeStats?id=").concat(i,"&start=").concat(a,"&end=").concat(n)),e.next=19,fetch(o,{headers:{Authorization:"Bearer ".concat(eS)}});case 19:if((l=e.sent).ok){e.next=23;break}throw console.error("Failed to fetch employee details: ".concat(l.statusText)),Error("Failed to fetch employee details: ".concat(l.statusText));case 23:return e.next=25,l.json();case 25:console.log("Employee details data:",d=e.sent),ei(d),e.next=34;break;case 30:e.prev=30,e.t0=e.catch(2),console.error("Error fetching employee details:",e.t0),ei(null);case 34:return e.prev=34,es(!1),e.finish(34);case 37:case"end":return e.stop()}},e,null,[[2,30,34,37]])})),function(e,a,n){return t.apply(this,arguments)}),[eS,I,em]);(0,l.useEffect)(function(){if(eT.isReady){var e=eT.query,t=e.view,a=e.employee,n=e.state,s=e.startDate,r=e.endDate;if("employeeDetails"===t&&a&&n){R(n),q(a),el(!1);var i=s||(0,d.WU)(new Date,"yyyy-MM-dd"),o=r||(0,d.WU)(new Date,"yyyy-MM-dd");G(i),X(o),eT.query.selectedOption?Q(eT.query.selectedOption):Q("".concat(i,",").concat(o)),eT.query.currentPage&&et(parseInt(eT.query.currentPage,10)),eR(a,i,o)}else n&&(R(n),el(!1))}},[eT.isReady,eT.query,eR]),(0,l.useEffect)(function(){eS&&eZ&&eU(V,Y)},[eS,eZ,V,Y,eU]),(0,l.useEffect)(function(){"true"===eT.query.reset&&(R(null),q(null),et(1),eT.replace("/Dashboard",void 0,{shallow:!0}))},[eT.query,eT]);var eW=(0,l.useCallback)(function(e){ez.current&&(eD(!0),ez.current.getCanvasContainer().querySelectorAll(".maplibregl-marker").forEach(function(e){e.remove()}),Promise.all([C.Z.get("".concat(T,"/employee/getById?id=").concat(e.empId),{headers:{Authorization:"Bearer ".concat(eS)}}),C.Z.get("".concat(T,"/visit/getByDateRangeAndEmployeeStats"),{headers:{Authorization:"Bearer ".concat(eS)},params:{id:e.empId,start:V,end:Y}})]).then(function(t){var a=(0,r.Z)(t,2),n=a[0],s=a[1],i=n.data,o="".concat(i.firstName," ").concat(i.lastName),c=s.data.visitDto,l=new(L()).LngLatBounds;l.extend([e.longitude,e.latitude]),i.houseLatitude&&i.houseLongitude&&l.extend([i.houseLongitude,i.houseLatitude]),c.forEach(function(e){e.checkinLatitude&&e.checkinLongitude&&l.extend([e.checkinLongitude,e.checkinLatitude])}),l.isEmpty()||ez.current.fitBounds(l,{padding:{top:100,bottom:100,left:100,right:100},duration:0}),c.forEach(function(e,t){if(e.checkinLatitude&&e.checkinLongitude){var a=new O.Marker({color:"#3B82F6"}).setLngLat([e.checkinLongitude,e.checkinLatitude]).addTo(ez.current),n=new O.Popup({closeButton:!1,closeOnClick:!1,className:"map-popup",offset:[0,-10]});a.getElement().addEventListener("click",function(){ez.current.getCanvasContainer().querySelectorAll(".maplibregl-popup").forEach(function(e){e.remove()}),n.setLngLat([e.checkinLongitude,e.checkinLatitude]).setHTML('\n                  <div class="popup-card">\n                    <div class="popup-header">\n                      <div class="popup-title-wrapper">\n                        <div class="popup-title">\n                          '.concat(o,'\n                          <div class="popup-badge visit">Visit #').concat(t+1,'</div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class="popup-body">\n                      <div class="popup-info">\n                        <div class="info-group">\n                          <div class="store-name">').concat(e.storeName,'</div>\n                        </div>\n                        <div class="time-info">\n                          <div>Check-in Date: ').concat((0,d.WU)((0,u.D)(e.visit_date),"MMM dd, yyyy"),"</div>\n                          <div>Check-in Time: ").concat((0,d.WU)((0,u.D)("".concat(e.visit_date,"T").concat(e.checkinTime)),"h:mm a"),"</div>\n                          ").concat(e.checkoutTime?"<div>Check-out: ".concat((0,d.WU)((0,u.D)("".concat(e.visit_date,"T").concat(e.checkoutTime)),"h:mm a"),"</div>"):"<div>Not checked out yet</div>","\n                        </div>\n                        ").concat(e.purpose?'<div class="visit-purpose">'.concat(e.purpose,"</div>"):"",'\n                        <div class="visit-location">').concat(e.city,", ").concat(e.state,"</div>\n                      </div>\n                    </div>\n                  </div>\n                ")).addTo(ez.current)})}});var p=new O.Marker({color:"#22C55E"}).setLngLat([e.longitude,e.latitude]).addTo(ez.current),m=new O.Popup({closeButton:!1,closeOnClick:!1,className:"map-popup",offset:[0,-10]});if(p.getElement().addEventListener("click",function(){ez.current.getCanvasContainer().querySelectorAll(".maplibregl-popup").forEach(function(e){e.remove()}),m.setLngLat([e.longitude,e.latitude]).setHTML('\n              <div class="popup-card">\n                <div class="popup-header">\n                  <div class="popup-title-wrapper">\n                    <div class="popup-title">\n                      '.concat(o,'\n                      <div class="popup-badge current">Current Location</div>\n                    </div>\n                  </div>\n                </div>\n                <div class="popup-body">\n                  <div class="popup-info">\n                    <div class="time-info">\n                      <div>Last seen at ').concat((0,d.WU)((0,u.D)("".concat(e.updatedAt,"T").concat(e.updatedTime)),"h:mm a"),"</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ")).addTo(ez.current)}),i.houseLatitude&&i.houseLongitude){var f=new O.Marker({color:"#EF4444"}).setLngLat([i.houseLongitude,i.houseLatitude]).addTo(ez.current),h=new O.Popup({closeButton:!1,closeOnClick:!1,className:"map-popup",offset:[0,-10]});f.getElement().addEventListener("click",function(){ez.current.getCanvasContainer().querySelectorAll(".maplibregl-popup").forEach(function(e){e.remove()}),h.setLngLat([i.houseLongitude,i.houseLatitude]).setHTML('\n                <div class="popup-card">\n                  <div class="popup-header">\n                    <div class="popup-title-wrapper">\n                      <div class="popup-title">\n                        '.concat(o,'\n                        <div class="popup-badge home">Home Location</div>\n                      </div>\n                    </div>\n                  </div>\n                  <div class="popup-body">\n                    <div class="popup-info">\n                      <div class="address">').concat(i.addressLine1||"Address not available",'</div>\n                      <div class="location">').concat(i.city,", ").concat(i.state,"</div>\n                    </div>\n                  </div>\n                </div>\n              ")).addTo(ez.current)})}}))},[eS,V,Y]),eF=(0,l.useCallback)((a=(0,i.Z)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:eT.push({pathname:"/EmployeeDetailsPage/".concat(encodeURIComponent(t.trim().toLowerCase())),query:{state:U}});case 1:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),[eT,U]),eq=(0,l.useCallback)(function(e,t,a){if(G(e),X(t),Q(a),F){eR(F,e,t);var n=eg.find(function(e){return e.empName.toLowerCase()===F.toLowerCase()});n&&eW(n)}else eU(e,t)},[eR,eU,F,eg,eW]);(0,l.useCallback)(function(e){var t={returnTo:"employeeDetails",state:U,employee:F,startDate:V,endDate:Y,selectedOption:K,currentPage:ee};localStorage.setItem("dashboardState",JSON.stringify(t)),eT.push({pathname:"/VisitDetailPage/".concat(e),query:t})},[eT,U,F,V,Y,K,ee]),(0,l.useEffect)(function(){if(eT.isReady&&"employeeDetails"===eT.query.returnTo){var e=localStorage.getItem("dashboardState");if(e){var t=JSON.parse(e);R(t.state),q(t.employee),G(t.startDate),X(t.endDate),Q(t.selectedOption),et(t.currentPage),t.employee&&eR(t.employee,t.startDate,t.endDate),localStorage.removeItem("dashboardState")}}},[eT.isReady,eT.query,eR]);var e_=(0,l.useCallback)((0,i.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.Z.post("https://account.olamaps.io/realms/olamaps/protocol/openid-connect/token",new URLSearchParams({grant_type:"client_credentials",scope:"openid",client_id:"7ba2810b-f481-4e31-a0c6-d436b0c7c1eb",client_secret:"klymi04gaquWCnpa57hBEpMXR7YPhkLD"}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 3:eO(e.sent.data.access_token),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error getting access token:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),[]),eV=(0,l.useCallback)(function(e){R(e.trim().toLowerCase()||"unknown"),q(null),el(!1),eT.push({pathname:"/Dashboard",query:{state:e.trim().toLowerCase()||"unknown"}},void 0,{shallow:!0})},[eT]),eG=(0,l.useCallback)(function(){R(null),q(null),el(!0),eu(null),eD(!1),eY(),eT.push("/Dashboard",void 0,{shallow:!0})},[eT]),eH=(0,l.useCallback)((s=(0,i.Z)(c().mark(function e(t){var a,n;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!eI.current||!eE)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,ez.current&&(ez.current.remove(),ez.current=null),e.next=6,C.Z.get("https://api.olamaps.io/tiles/vector/v1/styles/default-light-standard/style.json",{headers:{Authorization:"Bearer ".concat(eE)}});case 6:return(a=e.sent.data).layers=a.layers.filter(function(e){return!["poi-vectordata","poi"].includes(e.id)}),ez.current=new O.Map({container:eI.current,style:a,center:[78.9629,20.5937],zoom:4,transformRequest:function(e,t){if(e.startsWith("https://api.olamaps.io"))return{url:e,headers:{Authorization:"Bearer ".concat(eE)}}}}),e.next=12,new Promise(function(e){ez.current.on("load",function(){e()})});case 12:ez.current.addControl(new O.NavigationControl,"top-left"),t.forEach(function(){var e=(0,i.Z)(c().mark(function e(t,a){var n,s,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="hsl(".concat(137.508*a%360,", 70%, 50%)"),s=new O.Marker({color:n}).setLngLat([t.longitude,t.latitude]).addTo(ez.current),r=new O.Popup({closeButton:!1,closeOnClick:!1,className:"map-popup"}),s.getElement().addEventListener("click",(0,i.Z)(c().mark(function e(){var a,n,s,i,o;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.Z.get("".concat(T,"/employee/getById?id=").concat(t.empId),{headers:{Authorization:"Bearer ".concat(eS)}});case 3:a=e.sent.data,n="".concat(a.firstName," ").concat(a.lastName),s=(0,d.WU)((0,u.D)("".concat(t.updatedAt,"T").concat(t.updatedTime)),"MMM dd, yyyy"),i=(0,d.WU)((0,u.D)("".concat(t.updatedAt,"T").concat(t.updatedTime)),"h:mm a"),r.setLngLat([t.longitude,t.latitude]).setHTML('\n                <div class="popup-card">\n                  <div class="popup-header">\n                    <div class="popup-title-wrapper">\n                      <div class="popup-title">\n                        '.concat(n,'\n                        <div class="popup-badge current">Live Location</div>\n                      </div>\n                    </div>\n                    <button class="popup-close" aria-label="Close popup">\xd7</button>\n                  </div>\n                  <div class="popup-body">\n                    <div class="popup-info">\n                      <div class="info-section">\n                        <div class="info-icon">\n                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/>\n                            <circle cx="12" cy="9" r="2.5"/>\n                          </svg>\n                        </div>\n                        <div class="info-content">\n                          <div class="info-label">Location Updated</div>\n                          <div class="info-value">').concat(s," at ").concat(i,"</div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ")).addTo(ez.current),(o=r.getElement().querySelector(".popup-close"))&&o.addEventListener("click",function(){return r.remove()}),r.getElement().addEventListener("mouseout",function(e){r.getElement().contains(e.relatedTarget)||r.remove()}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error fetching employee details:",e.t0);case 17:case"end":return e.stop()}},e,null,[[0,14]])})));case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()),t.length>0&&(n=new(L()).LngLatBounds,t.forEach(function(e){n.extend([e.longitude,e.latitude])}),ez.current.fitBounds(n,{padding:50,maxZoom:15})),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),console.error("Error initializing map:",e.t0),eu("Failed to initialize map");case 21:case"end":return e.stop()}},e,null,[[2,17]])})),function(e){return s.apply(this,arguments)}),[eE,eS]),eY=(0,l.useCallback)((0,i.Z)(c().mark(function e(){var t,a,n;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(eN(!0),eu(null),eD(!1),e.prev=3,ez.current&&(ez.current.remove(),ez.current=null),t=[],"MANAGER"!==eZ){e.next=17;break}if(ex.length){e.next=10;break}return eb([]),e.abrupt("return");case 10:return a=ex.map(function(e){return C.Z.get("".concat(T,"/employee/getLiveLocation?id=").concat(e),{headers:{Authorization:"Bearer ".concat(eS)}}).catch(function(t){return console.log("No live location for employee ".concat(e)),null})}),e.next=13,Promise.all(a);case 13:t=e.sent.filter(function(e){return null!==e&&e.data}).map(function(e){return e.data}).filter(function(e){return e.latitude&&e.longitude}),e.next=25;break;case 17:return e.next=19,C.Z.get("".concat(T,"/employee/getAll"),{headers:{Authorization:"Bearer ".concat(eS)}});case 19:return n=e.sent.data.map(function(e){return C.Z.get("".concat(T,"/employee/getLiveLocation?id=").concat(e.id),{headers:{Authorization:"Bearer ".concat(eS)}}).catch(function(t){return console.log("No live location for employee ".concat(e.id)),null})}),e.next=23,Promise.all(n);case 23:t=e.sent.filter(function(e){return null!==e&&e.data}).map(function(e){return e.data}).filter(function(e){return e.latitude&&e.longitude});case 25:if(t.sort(function(e,t){return e.empName.localeCompare(t.empName)}),eb(t),!(t.length>0&&eE)){e.next=34;break}return e.next=30,new Promise(function(e){return setTimeout(e,0)});case 30:return e.next=32,eH(t);case 32:e.next=35;break;case 34:eu("No employee locations available");case 35:e.next=41;break;case 37:e.prev=37,e.t0=e.catch(3),console.error("Error fetching employee locations:",e.t0),eu("Failed to fetch employee locations");case 41:return e.prev=41,eN(!1),e.finish(41);case 44:case"end":return e.stop()}},e,null,[[3,37,41,44]])})),[eS,eE,eZ,ex,eH]);(0,l.useCallback)((o=(0,i.Z)(c().mark(function e(t){var a,n,s,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=7>=(a=new Date).getDate()?(0,d.WU)((0,p.k)(a,a.getDate()+23),"yyyy-MM-dd"):(0,d.WU)((0,p.k)(a,30),"yyyy-MM-dd"),s=(0,d.WU)(a,"yyyy-MM-dd"),e.prev=3,e.next=6,C.Z.get("".concat(T,"/visit/getByDateSorted"),{headers:{Authorization:"Bearer ".concat(eS)},params:{startDate:n,endDate:s,page:0,size:1,sort:"visitDate,desc",employeeName:t}});case 6:return r=e.sent.data.content[0],e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(3),console.error("Error fetching latest visit:",e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}},e,null,[[3,11]])})),function(e){return o.apply(this,arguments)}),[eS]),(0,l.useEffect)(function(){eS&&eP&&!eZ&&eM((0,h.CS)(eP))},[eM,eS,eP,eZ]),(0,l.useEffect)(function(){eS&&e_()},[eS,e_]),(0,l.useEffect)(function(){eE&&ec&&eY()},[eE,eY,ec]),(0,l.useEffect)(function(){eS&&eZ&&eU(V,Y)},[eS,eZ,V,Y,eU]);var eX=(0,l.useMemo)(function(){return Object.entries(I.reduce(function(e,t){var a=(t.employeeState||"unknown").trim().toLowerCase();return e[a]||(e[a]={employees:new Set,visits:0}),t.statsDto&&t.statsDto.completedVisitCount>0&&(e[a].employees.add("".concat(t.employeeFirstName||"Unknown"," ").concat(t.employeeLastName||"")),e[a].visits+=t.statsDto.completedVisitCount),e},{})).filter(function(e){var t=(0,r.Z)(e,2);return(t[0],t[1]).employees.size>0}).map(function(e){var t=(0,r.Z)(e,2),a=t[0],n=t[1];return(0,S.jsx)(A,{state:a.charAt(0).toUpperCase()+a.slice(1)||"Unknown State",totalEmployees:n.employees.size,onClick:function(){return eV(a)}},a)})},[I,eV]),eJ=(0,l.useMemo)(function(){return U?Object.entries(I.filter(function(e){return(e.employeeState.trim().toLowerCase()||"unknown")===U}).reduce(function(e,t){var a=t.employeeFirstName+" "+t.employeeLastName;return!e[a]&&t.statsDto&&t.statsDto.completedVisitCount>0&&(e[a]=P(P({},t),{},{completedVisitCount:t.statsDto.completedVisitCount})),e},{})).map(function(e){var t=(0,r.Z)(e,2),a=t[0],n=t[1];return(0,S.jsx)(k.default,{employeeName:a.charAt(0).toUpperCase()+a.slice(1),totalVisits:n.completedVisitCount,onClick:function(){return eF(a)}},a)}):[]},[U,I,eF]),eK=function(){return(0,S.jsx)(S.Fragment,{children:(0,n.Z)(Array(6)).map(function(e,t){return(0,S.jsx)(b.Zb,{children:(0,S.jsxs)(b.aY,{className:"p-3 sm:p-6",children:[(0,S.jsx)(N.O,{className:"h-3 sm:h-4 w-[150px] sm:w-[250px] mb-3 sm:mb-4"}),(0,S.jsx)(N.O,{className:"h-3 sm:h-4 w-[120px] sm:w-[200px]"})]})},t)})})},eQ=(0,l.useCallback)((0,i.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return eN(!0),e.prev=1,ez.current&&(ez.current.remove(),ez.current=null),e.next=5,e_();case 5:return R(null),q(null),el(!0),eu(null),eD(!1),e.next=12,Promise.all([eU(V,Y),eY()]);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error("Error resetting map:",e.t0),eu("Failed to reset map view");case 18:return e.prev=18,eN(!1),e.finish(18);case 21:case"end":return e.stop()}},e,null,[[1,14,18,21]])})),[e_,eU,eY,V,Y]);return(0,S.jsx)("div",{className:"container-dashboard w-full max-w-[100vw] mx-auto py-4 sm:py-8 px-3 sm:px-4 overflow-x-hidden",children:(0,S.jsxs)("div",{className:"p-4",children:[(0,S.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,S.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:U?"unknown"===U?"Unknown State":U:"Sales Dashboard"}),(0,S.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,S.jsx)(E.default,{selectedOption:K,onDateRangeChange:eq}),U&&(0,S.jsxs)(j.z,{variant:"outline",size:"sm",onClick:eG,children:[(0,S.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})]})]}),U?(0,S.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:en?eK():eJ.length>0?eJ:(0,S.jsx)("p",{className:"col-span-full text-center text-muted-foreground",children:"No employees with completed visits in this date range."})}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[(0,S.jsxs)(M.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative overflow-hidden rounded-2xl sm:rounded-3xl bg-gradient-to-br from-[#1c1c28] to-[#1c1c28]/90 hover:shadow-xl transition-all duration-300 group",children:[(0,S.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,n.Z)([,,,,,]).map(function(e,t){return(0,S.jsx)(M.E.div,{className:"absolute h-px bg-gradient-to-r from-transparent via-[#ff6b6b] to-transparent",style:{width:"100%",top:"".concat(20+20*t,"%"),left:"-100%"},animate:{left:["100%"]},transition:{duration:3,repeat:1/0,delay:.4*t,ease:"linear"}},t)})}),(0,S.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32",children:(0,S.jsx)(M.E.div,{className:"w-full h-full",initial:{opacity:0},animate:{opacity:.2},children:(0,S.jsxs)("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[(0,S.jsx)("defs",{children:(0,S.jsxs)("linearGradient",{id:"visitGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,S.jsx)("stop",{offset:"0%",style:{stopColor:"#ff6b6b",stopOpacity:.8}}),(0,S.jsx)("stop",{offset:"100%",style:{stopColor:"#ff6b6b",stopOpacity:.2}})]})}),(0,n.Z)(Array(6)).map(function(e,t){return(0,n.Z)(Array(6)).map(function(e,a){return(0,S.jsx)(M.E.circle,{cx:20+12*a,cy:20+12*t,r:"1",fill:"#ff6b6b",initial:{opacity:0},animate:{opacity:[0,1,0],scale:[0,1.5,0]},transition:{duration:2,repeat:1/0,delay:(t+a)*.2,ease:"easeInOut"}},"".concat(t,"-").concat(a))})}),(0,S.jsx)(M.E.path,{d:"M20,20 L80,80 M20,80 L80,20",stroke:"url(#visitGrad)",strokeWidth:"0.5",initial:{pathLength:0},animate:{pathLength:[0,1,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}})]})})}),(0,S.jsxs)("div",{className:"p-6 relative z-10",children:[(0,S.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,S.jsx)(M.E.div,{className:"p-3 bg-gradient-to-br from-[#ff6b6b] to-[#ff8585] rounded-2xl shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.95},animate:{boxShadow:["0 0 0 0 rgba(255, 107, 107, 0.4)","0 0 0 20px rgba(255, 107, 107, 0)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:(0,S.jsx)(g.Z,{className:"h-6 w-6 text-white"})}),(0,S.jsxs)("div",{children:[(0,S.jsx)(M.E.p,{className:"text-gray-400 text-base",animate:{opacity:[.7,1,.7]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:"Total Visits"}),(0,S.jsx)("p",{className:"text-white/80 text-sm",children:"Today's Overview"})]})]}),(0,S.jsxs)("div",{className:"relative",children:[(0,S.jsx)(M.E.div,{className:"text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#ff6b6b] to-[#ff8585]",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:300,damping:20},children:I.reduce(function(e,t){var a;return e+((null===(a=t.statsDto)||void 0===a?void 0:a.completedVisitCount)||0)},0)}),(0,S.jsx)("div",{className:"absolute -right-2 top-0 flex space-x-1",children:(0,n.Z)([,,,]).map(function(e,t){return(0,S.jsx)(M.E.div,{className:"w-2 h-2 rounded-full bg-[#ff6b6b]",animate:{y:[-4,4,-4],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,delay:.2*t,ease:"easeInOut"}},t)})})]}),(0,S.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,S.jsx)("div",{className:"flex items-center justify-between",children:(0,S.jsxs)(M.E.div,{className:"flex items-center space-x-2 px-3 py-1.5 bg-[#ff6b6b]/10 rounded-full",whileHover:{scale:1.05},animate:{backgroundColor:["rgba(255,107,107,0.1)","rgba(255,107,107,0.2)","rgba(255,107,107,0.1)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[(0,S.jsx)(M.E.div,{className:"w-2 h-2 rounded-full bg-[#ff6b6b]",animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),(0,S.jsx)("span",{className:"text-[#ff6b6b] text-sm font-medium",children:"Live Updates"})]})}),(0,S.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[.8,.6,.4].map(function(e,t){return(0,S.jsxs)("div",{className:"relative h-1 bg-[#ff6b6b]/20 rounded-full overflow-hidden",children:[(0,S.jsx)(M.E.div,{className:"absolute inset-0 bg-gradient-to-r from-[#ff6b6b] to-[#ff8585]",initial:{width:0},animate:{width:"".concat(100*e,"%")},transition:{duration:1.5,delay:.2*t,ease:"easeOut"}}),(0,S.jsx)(M.E.div,{className:"absolute inset-0 bg-white/20",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear"}})]},t)})})]})]})]}),(0,S.jsxs)(M.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"relative overflow-hidden rounded-2xl sm:rounded-3xl bg-gradient-to-br from-[#1c1c28] to-[#1c1c28]/90 hover:shadow-xl transition-all duration-300",children:[(0,S.jsx)("div",{className:"absolute inset-0",children:(0,S.jsx)(M.E.div,{className:"w-full h-full",children:(0,S.jsxs)("svg",{viewBox:"0 0 100 100",className:"w-full h-full opacity-20",children:[(0,S.jsxs)("defs",{children:[(0,S.jsxs)("linearGradient",{id:"employeeGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,S.jsx)("stop",{offset:"0%",style:{stopColor:"#4f46e5",stopOpacity:.8}}),(0,S.jsx)("stop",{offset:"100%",style:{stopColor:"#4f46e5",stopOpacity:.2}})]}),(0,S.jsxs)("filter",{id:"glow",children:[(0,S.jsx)("feGaussianBlur",{stdDeviation:"1",result:"coloredBlur"}),(0,S.jsxs)("feMerge",{children:[(0,S.jsx)("feMergeNode",{in:"coloredBlur"}),(0,S.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,S.jsx)(M.E.circle,{cx:"50",cy:"50",r:"8",fill:"#4f46e5",filter:"url(#glow)",animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),[0,60,120,180,240,300].map(function(e,t){return(0,S.jsxs)("g",{children:[(0,S.jsx)(M.E.circle,{cx:50+30*Math.cos(e*Math.PI/180),cy:50+30*Math.sin(e*Math.PI/180),r:"4",fill:"#4f46e5",initial:{scale:0},animate:{scale:[0,1,0],opacity:[0,1,0]},transition:{duration:3,repeat:1/0,delay:.5*t,ease:"easeInOut"}}),(0,S.jsx)(M.E.line,{x1:"50",y1:"50",x2:50+30*Math.cos(e*Math.PI/180),y2:50+30*Math.sin(e*Math.PI/180),stroke:"url(#employeeGrad)",strokeWidth:"1",initial:{pathLength:0},animate:{pathLength:[0,1],opacity:[.3,.8]},transition:{duration:2,repeat:1/0,delay:.3*t,ease:"easeInOut"}})]},e)}),[20,35].map(function(e,t){return(0,S.jsx)(M.E.circle,{cx:"50",cy:"50",r:e,fill:"none",stroke:"#4f46e5",strokeWidth:"0.5",initial:{scale:.8,opacity:0},animate:{scale:[.8,1.2],opacity:[0,.2,0]},transition:{duration:3,repeat:1/0,delay:1*t,ease:"easeInOut"}},e)})]})})}),(0,S.jsxs)("div",{className:"p-6 relative z-10",children:[(0,S.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,S.jsx)("div",{className:"p-3 bg-[#4f46e5] rounded-2xl",children:(0,S.jsx)(v.Z,{className:"h-6 w-6 text-white"})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-gray-400",children:"Active Employees"}),(0,S.jsx)("p",{className:"text-white/80",children:"Team Overview"})]})]}),(0,S.jsx)(M.E.div,{className:"text-5xl font-bold text-white mb-4",animate:{scale:[1,1.02,1],opacity:[1,.9,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:new Set(I.map(function(e){return e.employeeId})).size}),(0,S.jsx)("div",{className:"flex items-center space-x-3",children:(0,S.jsx)(M.E.span,{className:"px-3 py-1 bg-[#4f46e5]/20 text-[#4f46e5] rounded-full text-sm",animate:{backgroundColor:["rgba(79,70,229,0.2)","rgba(79,70,229,0.3)","rgba(79,70,229,0.2)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"Active Today"})}),(0,S.jsxs)("div",{className:"mt-6",children:[(0,S.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,S.jsx)(M.E.span,{className:"text-gray-400",animate:{opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"Activity Level"})}),(0,S.jsx)("div",{className:"flex space-x-1",children:(0,n.Z)(Array(10)).map(function(e,t){return(0,S.jsx)("div",{className:"relative h-6 flex-1",children:(0,S.jsx)(M.E.div,{className:"absolute bottom-0 w-full h-1 rounded-full ".concat(t<8?"bg-[#4f46e5]":"bg-gray-700"),animate:t<8?{height:["4px","16px","4px"],opacity:[.7,1,.7]}:{},transition:{duration:1.5,repeat:1/0,ease:"easeInOut",delay:.1*t},children:t<8&&(0,S.jsx)(M.E.div,{className:"absolute inset-0 rounded-full bg-[#4f46e5]/20",animate:{scale:[1,1.5,1],opacity:[.2,.4,.2]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:.1*t}})})},t)})})]})]})]}),(0,S.jsxs)(M.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"relative overflow-hidden rounded-2xl sm:rounded-3xl bg-gradient-to-br from-[#1c1c28] to-[#1c1c28]/90 hover:shadow-xl transition-all duration-300",children:[(0,S.jsx)("div",{className:"absolute inset-0",children:(0,S.jsx)(M.E.div,{className:"w-full h-full",children:(0,S.jsxs)("svg",{viewBox:"0 0 100 100",className:"w-full h-full opacity-20",children:[(0,S.jsxs)("defs",{children:[(0,S.jsxs)("linearGradient",{id:"locationGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,S.jsx)("stop",{offset:"0%",style:{stopColor:"#10b981",stopOpacity:.8}}),(0,S.jsx)("stop",{offset:"100%",style:{stopColor:"#10b981",stopOpacity:.2}})]}),(0,S.jsx)("pattern",{id:"grid",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:(0,S.jsx)("path",{d:"M 10 0 L 0 0 0 10",fill:"none",stroke:"#10b981",strokeWidth:"0.5",opacity:"0.2"})})]}),(0,S.jsx)("rect",{width:"100",height:"100",fill:"url(#grid)"}),[{x:30,y:30},{x:70,y:40},{x:50,y:60},{x:25,y:70},{x:80,y:65}].map(function(e,t){return(0,S.jsxs)("g",{children:[(0,S.jsx)(M.E.circle,{cx:e.x,cy:e.y,r:"5",fill:"none",stroke:"#10b981",strokeWidth:"0.5",animate:{scale:[1,2],opacity:[.5,0]},transition:{duration:2,repeat:1/0,delay:.3*t,ease:"easeOut"}}),(0,S.jsx)(M.E.path,{d:"M ".concat(e.x,",").concat(e.y," m -4,-10 a 4,4 0 1,1 8,0 l -4,10 z"),fill:"#10b981",initial:{scale:0},animate:{scale:[0,1],y:[0,-5,0]},transition:{duration:2,repeat:1/0,delay:.4*t,ease:"easeInOut"}})]},t)}),(0,S.jsx)(M.E.path,{d:"M50,50 L50,20 A30,30 0 0,1 76.6,35",stroke:"url(#locationGrad)",strokeWidth:"2",fill:"none",animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},style:{transformOrigin:"50px 50px"}})]})})}),(0,S.jsxs)("div",{className:"p-6 relative z-10",children:[(0,S.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,S.jsx)("div",{className:"p-3 bg-[#10b981] rounded-2xl",children:(0,S.jsx)(x.Z,{className:"h-6 w-6 text-white"})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-gray-400",children:"Live Locations"}),(0,S.jsx)("p",{className:"text-white/80",children:"GPS Tracking"})]})]}),(0,S.jsx)(M.E.div,{className:"text-5xl font-bold text-white mb-4",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:400,damping:10},children:eg.length}),(0,S.jsx)("div",{className:"flex items-center space-x-3",children:(0,S.jsx)("span",{className:"px-3 py-1 bg-[#10b981]/20 text-[#10b981] rounded-full text-sm",children:"Active now"})}),(0,S.jsx)("div",{className:"mt-6 grid grid-cols-4 gap-2",children:(0,n.Z)([,,,,]).map(function(e,t){return(0,S.jsx)(M.E.div,{className:"h-2 bg-[#10b981]/30 rounded-full overflow-hidden",initial:{width:0},animate:{width:"100%"},transition:{delay:.1*t,duration:.5},children:(0,S.jsx)(M.E.div,{className:"h-full bg-[#10b981] rounded-full",initial:{width:"0%"},animate:{width:"100%"},transition:{duration:1.5,repeat:1/0,repeatType:"reverse",ease:"easeInOut",delay:.2*t}})},t)})})]})]})]}),(0,S.jsxs)("div",{className:"mb-4 sm:mb-6",children:[(0,S.jsx)("h2",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 px-1",children:"States Overview"}),(0,S.jsx)("div",{className:"grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:en?eK():eX.length>0?eX:(0,S.jsx)("p",{className:"col-span-full text-center text-muted-foreground text-sm sm:text-base",children:"No states with active employees in this date range."})})]}),(0,S.jsx)("div",{className:"mb-8",children:(0,S.jsxs)(b.Zb,{children:[(0,S.jsx)(b.Ol,{children:(0,S.jsx)(b.ll,{children:"Live Employee Locations"})}),(0,S.jsx)(b.aY,{children:ew?(0,S.jsx)("div",{className:"flex justify-center items-center h-[600px]",children:(0,S.jsx)(w.Z,{color:"#4A90E2",size:50})}):(0,S.jsx)(S.Fragment,{children:eg.length>0?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"relative",children:[(0,S.jsx)("div",{ref:eI,className:"rounded-lg border-2 border-gray-300 shadow-lg mb-4",style:{width:"100%",height:"600px"}}),(0,S.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,S.jsxs)(j.z,{variant:"secondary",size:"sm",onClick:eQ,className:"bg-white shadow-md hover:bg-gray-100 flex items-center gap-2",children:[(0,S.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,S.jsx)("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),(0,S.jsx)("path",{d:"M3 3v5h5"})]}),"Reset Map View"]})}),eC&&(0,S.jsxs)("div",{className:"absolute bottom-6 left-6 bg-white p-3 rounded-lg shadow-md",children:[(0,S.jsx)("div",{className:"text-sm font-semibold mb-2",children:"Map Legend"}),(0,S.jsxs)("div",{className:"space-y-2",children:[(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsx)("div",{className:"w-4 h-4 rounded-full bg-[#22C55E] mr-2"}),(0,S.jsx)("span",{children:"Current Location"})]}),(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsx)("div",{className:"w-4 h-4 rounded-full bg-[#EF4444] mr-2"}),(0,S.jsx)("span",{children:"Home Location"})]}),(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsx)("div",{className:"w-4 h-4 rounded-full bg-[#3B82F6] mr-2"}),(0,S.jsx)("span",{children:"Visits"})]})]})]})]}),(0,S.jsx)(D.default,{employeeLocations:eg,onEmployeeClick:eW})]}):(0,S.jsx)("div",{className:"flex justify-center items-center h-[600px]",children:(0,S.jsx)("p",{className:"text-muted-foreground",children:"No live location data available"})})})})]})})]})]})})}},7731:function(e,t,a){"use strict";a.r(t);var n=a(67294),s=a(83800),r=a(59792),i=a(50571),o=a(66083),c=a(54254),l=a(85893);t.default=function(e){var t=e.selectedOption,a=e.onDateRangeChange,d=(0,n.useState)(!1),u=d[0],p=d[1],m=(0,n.useState)(!1),f=m[0],h=m[1],x=(0,n.useState)((0,s.WU)(new Date,"yyyy-MM-dd")),v=x[0],y=x[1],g=(0,n.useState)((0,s.WU)(new Date,"yyyy-MM-dd")),b=g[0],j=g[1],w=(0,n.useState)(null),N=w[0],k=w[1],E=function(e){if(p(!1),"Custom Date Range"===e)h(!0);else{var t="",n="";switch(e){case"Today":t=(0,s.WU)(new Date,"yyyy-MM-dd"),n=(0,s.WU)(new Date,"yyyy-MM-dd");break;case"Last 7 Days":t=(0,s.WU)((0,r.k)(new Date,7),"yyyy-MM-dd"),n=(0,s.WU)(new Date,"yyyy-MM-dd");break;case"Last 15 Days":t=(0,s.WU)((0,r.k)(new Date,15),"yyyy-MM-dd"),n=(0,s.WU)(new Date,"yyyy-MM-dd");break;case"Last 30 Days":t=(0,s.WU)((0,r.k)(new Date,30),"yyyy-MM-dd"),n=(0,s.WU)(new Date,"yyyy-MM-dd")}a(t,n,e)}};return(0,n.useEffect)(function(){k(null)},[v,b]),(0,l.jsxs)("div",{className:"relative inline-block text-left w-64",children:[(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",id:"options-menu","aria-haspopup":"true","aria-expanded":u,onClick:function(){p(!u)},children:[(0,l.jsx)("span",{className:"truncate",children:t}),(0,l.jsx)(c.Z,{className:"h-5 w-5 ml-2","aria-hidden":"true"})]})}),u&&(0,l.jsx)("div",{className:"origin-top-right absolute right-0 mt-2 w-full rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-50",children:(0,l.jsx)("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:["Today","Last 7 Days","Last 15 Days","Last 30 Days","Custom Date Range"].map(function(e){return(0,l.jsx)("a",{href:"#",className:"".concat(e===t?"bg-gray-100 text-gray-900":"text-gray-700"," block px-4 py-2 text-sm"),role:"menuitem",onClick:function(){return E(e)},children:e},e)})})}),f&&(0,l.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,l.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-6 pb-20 text-center sm:block sm:p-0",children:[(0,l.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,l.jsx)("div",{className:"absolute inset-0 bg-gray-900 opacity-75"})}),(0,l.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,l.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full relative z-50",children:[(0,l.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:text-left",children:[(0,l.jsx)("h3",{className:"text-2xl leading-6 font-semibold text-gray-900 mb-4",children:"Custom Date Range"}),(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,l.jsx)("input",{type:"date",name:"startDate",id:"startDate",className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",value:v,onChange:function(e){return y(e.target.value)}})]}),(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,l.jsx)("input",{type:"date",name:"endDate",id:"endDate",className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",value:b,onChange:function(e){return j(e.target.value)}})]}),N&&(0,l.jsx)("p",{className:"mt-2 text-sm text-red-600",children:N})]})})}),(0,l.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,l.jsx)("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-6 py-3 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:function(){var e=(0,i.D)(v),t=(0,i.D)(b);(0,o.j)(t,e)>30?k("You can't choose a Date Range more than 30 days"):(k(null),a(v,b,"Custom Date Range"),h(!1))},children:"Apply"}),(0,l.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-6 py-3 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:function(){return h(!1)},children:"Cancel"})]})]})]})})]})}},28577:function(e,t,a){"use strict";a.r(t),a(67294);var n=a(85893);t.default=function(e){var t=e.employeeName,a=e.totalVisits,s=e.onClick;return(0,n.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6 cursor-pointer transition duration-300 ease-in-out transform hover:-translate-y-1 hover:scale-105",onClick:s,children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4 capitalize",children:t}),(0,n.jsx)("div",{className:"flex justify-between",children:(0,n.jsxs)("p",{className:"text-gray-600",children:["Total Completed Visits: ",(0,n.jsx)("span",{className:"font-bold",children:a})]})})]})}},92195:function(e,t,a){"use strict";a.r(t);var n=a(27812);a(67294);var s=a(65474),r=a(85893),i=function(e,t){var a=new Date("".concat(e,"T").concat(t)),n=a.getDate(),s=a.toLocaleString("en-US",{month:"short"}),r=a.getFullYear().toString().slice(-2),i="".concat(n," ").concat(s,"' ").concat(r),o=a.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});return"".concat(i," ").concat(o)};t.default=function(e){var t=e.employeeLocations,a=e.onEmployeeClick,o=(0,n.Z)(t).sort(function(e,t){return e.empName.localeCompare(t.empName)});return(0,r.jsxs)(s.Zb,{className:"mt-8",children:[(0,r.jsx)(s.Ol,{children:(0,r.jsx)(s.ll,{className:"text-2xl font-bold",children:"Live Employee Locations"})}),(0,r.jsx)(s.aY,{children:(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(function(e){return(0,r.jsxs)("div",{className:"flex items-center p-4 bg-white rounded-lg shadow-lg transform transition-transform hover:scale-105 cursor-pointer",onClick:function(){return a(e)},children:[(0,r.jsx)("img",{src:"/Address.gif",alt:"Location",className:"h-16 w-16 mr-4 rounded-full border-2 border-gray-300"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:e.empName}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Last updated: ",i(e.updatedAt,e.updatedTime)]})]})]},e.id)})})})]})}},96274:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Dashboard",function(){return a(53204)}])},21080:function(){}},function(e){e.O(0,[2644,3800,4437,9998,7662,2888,9774,179],function(){return e(e.s=96274)}),_N_E=e.O()}]);